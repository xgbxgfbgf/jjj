(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-code"],{"03e4":function(t,e,i){"use strict";i("1c20")},"0452":function(t,e,i){"use strict";i("a31d")},"0acb":function(t,e,i){"use strict";i("a6c3")},"0ea3":function(t,e,i){"use strict";i("3a04")},"107a":function(t,e,i){"use strict";i("d4f0")},1252:function(t,e,i){},"15ea":function(t,e,i){},"1c20":function(t,e,i){},2287:function(t,e,i){"use strict";i("8ac0")},"22db":function(t,e,i){"use strict";i("e56b")},"25d4":function(t,e,i){"use strict";i("2d0f")},"29e0":function(t,e,i){"use strict";i("1252")},"2ac6":function(t,e,i){"use strict";var o=i("6022"),a=i("4a75"),s=i("005c"),r=i("131c");const n=t=>{let e;if(""!=t.preview_url.value)e=t.preview_url.value;else{const i=t.video_url.value.split("/");e=`http://qiniu-nc.clewm.net/climinavideoposter/${i[i.length-1]}&imageView2/1/w/200/h/200`}return e},c=()=>{WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",()=>{WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})};e["a"]=async t=>{const e=Object(a["y"])()?window.location.href:window.initUrl||window.location.href,i=await o["f"].getWxConfig(encodeURIComponent(e)),l=i;if(l&&1===l.status){const i={debug:!1,appId:l.data.appId,timestamp:l.data.timestamp,nonceStr:l.data.nonceStr,signature:l.data.signature,jsApiList:l.data.jsApiList,openTagList:["wx-open-launch-weapp"]};let o={};t.qiYeConfig&&(o={beta:!0,debug:!1,appId:t.qiYeConfig.corpid,timestamp:t.qiYeConfig.timestamp,nonceStr:t.qiYeConfig.nonceStr,signature:t.qiYeConfig.signature,jsApiList:t.qiYeConfig.jsApiList});const a=Object(s["r"])()&&t.qiYeConfig?o:i;wx.config(a),wx.error(t=>{console.error("微信分享配置出错"),console.error(t)}),wx.ready(()=>{if(t&&t.callback&&t.callback(),!Object(s["r"])()&&t&&t.data){const o=t.data.qrcode_compontent,a=t.data.qrcode_top_component,s=Number(t.data.show_share),c=Number(t.data.show_collect);let l=e,d="https://blogcdnimg.clewm.net/2019/09/weixin-link.png",h=t.data.qrcode_record.list_name;if(o.length){const t=o.filter(t=>"text"===t.component_code);if(t.length){const e=Object(r["j"])(t,t=>{const e=Object(r["x"])(t,"attribute_list.0.content_html.value","").replace(/<[^>]+>/gi,"").replace(/&nbsp;/g,"");return""!==e});e&&(l=e.attribute_list[0].content_html.value.replace(/<[^>]+>/gi,"").replace(/&nbsp;/g,""))}if("video"===o[0].component_code)d=n(o[0].attribute_list[0]);else{const t=o.filter(t=>"image"===t.component_code);t.length&&t[0].attribute_list.length&&t[0].attribute_list[0].image_url&&(d=t[0].attribute_list[0].image_url.value+"?x-oss-process=image/resize,m_fill,h_200,w_200")}}if(a&&a.length){const e=a.filter(t=>"text"===t.component_code);var i;if(e.length&&e[0].attribute_list.length)if(e[0].attribute_list[0].content_html)h=(null!==(i=e[0].attribute_list[0].content_html.value)&&void 0!==i?i:"").replace(/<a.*?>.*?<\/a>/gi,"")||t.data.qrcode_record.list_name;const o=a.filter(t=>"image"===t.component_code);o.length&&o[0].attribute_list.length&&o[0].attribute_list[0].image_url&&(d=o[0].attribute_list[0].image_url.value+"?x-oss-process=image/resize,m_fill,h_200,w_200")}s||wx.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:wechat","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone"]}),c||wx.hideMenuItems({menuList:["menuItem:favorite"]}),wx.updateAppMessageShareData&&wx.updateAppMessageShareData({title:h,desc:l||e,link:e+"&from=timeline",imgUrl:d}),wx.updateTimelineShareData&&wx.updateTimelineShareData({title:h,link:e+"&from=timeline",imgUrl:d})}})}"object"===typeof WeixinJSBridge&&"function"===typeof WeixinJSBridge.invoke?c():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c))}},"2d0f":function(t,e,i){},"2d38":function(t,e,i){"use strict";i("efa1")},"30a0":function(t,e,i){"use strict";i("9a3e")},3294:function(t,e,i){"use strict";e["a"]=()=>{const t=navigator.userAgent.toLowerCase(),e=t?t.match(/BeStore/i):"",i=/android/i.test(t),o=/iphone|ipad|ipod/i.test(t),a="bestore"===e.toString();window.WeixinJSBridge?window.WeixinJSBridge.call("closeWindow"):window.AlipayJSBridge?window.AlipayJSBridge.call("closeWebview"):a&&i?window.obj.closePageLppzRequest(""):a&&o?window.webkit.messageHandlers.closePageLppzRequest.postMessage(""):window.close()}},3359:function(t,e,i){"use strict";i("61ea")},3616:function(t,e,i){},"38cb":function(t,e,i){},"39c5":function(t,e,i){"use strict";i("e1e6")},"39d8":function(t,e,i){},"3a04":function(t,e,i){},"425d":function(t,e,i){"use strict";i("e9b2")},4538:function(t,e,i){"use strict";i("6a70")},4962:function(t,e,i){"use strict";i("5fd4")},"4d42":function(t,e,i){"use strict";i("bd26")},"4d7d":function(t,e,i){},5920:function(t,e,i){},"5fd4":function(t,e,i){},"61ea":function(t,e,i){},6233:function(t,e,i){"use strict";i("15ea")},6485:function(t,e,i){"use strict";i("39d8")},"66bc":function(t,e,i){},"6a70":function(t,e,i){},7154:function(t,e,i){},7189:function(t,e,i){"use strict";i("7154")},8211:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"remindWrap"},[i("page-header",{attrs:{bg:"#f4f4f4",color:"rgba(0, 0, 0, 0.87)",title:"记录快照"}}),t.loading?i("div",{staticClass:"loading",style:"min-height: "+t.minLoadingH+"px; text-align:center; padding-top:"+t.$$u(20)},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e(),t.loading?t._e():i("div",[t.hasDel?i("div",{style:"min-height: "+t.minLoadingH+"px;"},[i("div",{staticClass:"deleted"},[i("img",{staticClass:"deleted-image",attrs:{src:"https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png"}}),i("span",{staticClass:"deleted-tips"},[t._v("记录在 "+t._s(t.delTime)+" 被 管理员 删除")])]),i("div",{staticClass:"bottom-tip",on:{click:t.viewRecord}},[t._v(" 记录快照能做什么？ ")])]):i("div",[i("div",{staticClass:"remindContent",style:"min-height: "+t.minContentH+"px"},[i("group",{attrs:{data:t.recordInfo,isPaidUser:t.isPaidUser,isFromRecordRemind:!0}})],1),t.showPowerBy?i("div",{staticClass:"powerBy __powerBy__"},[t._v(" 由 "),i("span",{on:{click:t.viewCli}},[t._v("草料二维码")]),t._v(" 提供技术支持 ")]):t._e()])])],1)},a=[],s=i("9ab4"),r=i("1b40"),n=i("6022"),c=i("005c"),l=i("f28c"),d=i("c3d1");let h=class extends r["d"]{constructor(){super(...arguments),this.loading=!0,this.showPowerBy=!1,this.hasDel=!1,this.delTime="",this.recordInfo={},this.minContentH=0,this.minLoadingH=0,this.isPaidUser=0}async mounted(){this.getRecord(),this.getMinContentHeight()}padStart(t,e,i=""){return t.length>=e?t:`${new Array(e-t.length+1).join(i)}${t}`}getTime(t){t=JSON.parse(JSON.stringify(t)),t.update_time<1e10&&(t.update_time*=1e3);const e=new Date(t.update_time),i=e.getFullYear();return`${i}/${this.padStart((e.getMonth()+1).toString(),2,"0")}/${this.padStart(e.getDate().toString(),2,"0")} ${this.padStart(e.getHours().toString(),2,"0")}:${this.padStart(e.getMinutes().toString(),2,"0")}`}async getRecord(){const t=await n["c"].getRecord(this.url),e=await n["c"].getQrcodeOrgMsg(this.url);if(1===t.code){let e="";this.$$getValue(t,"data.is_del")&&(e=this.getTime(t.data)),this.loading=!1,this.recordInfo=this.$$getValue(t,"data",{}),this.showPowerBy=!!this.$$getValue(t,"data.show_powered_by",0),this.hasDel=1===this.$$getValue(t,"data.is_del"),this.delTime=e}1===e.code&&(this.isPaidUser=this.$$getValue(e,"data.edition_msg.is_paid_user",0)),this.getMinContentHeight()}getMinContentHeight(){const{clientHeight:t}=document.documentElement,e=document.querySelector(".__page_header__");let i=0;e&&(i=parseInt(Object(c["e"])(e,"height"),10)),this.minLoadingH=t-i,this.minContentH=this.showPowerBy?t-i-88:this.minLoadingH}viewCli(){this.$$logic.h5(()=>{window.open(`${window.location.protocol}//${window.location.host}?url=http://qr61.cn/o2eikt/q12CFJV`)})}viewRecord(){this.$$logic.h5(()=>{window.open(`${window.location.protocol}//${window.location.host}?url=http://qr71.cn/o2eikt/qeRX60k`)})}};Object(s["a"])([Object(r["c"])({type:String,default:""})],h.prototype,"url",void 0),h=Object(s["a"])([Object(r["a"])({components:{Group:l["a"],PageHeader:d["a"]}})],h);var p=h,u=p,g=(i("425d"),i("2877")),m=Object(g["a"])(u,o,a,!1,null,"24776b09",null);e["a"]=m.exports},"821b":function(t,e,i){},"83a9":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isH5?t._e():i("page-header",{attrs:{"hide-icon":t.isH5,bg:t.headerbg,color:t.pageHeaderColor,title:t.headerTitle}}),t.recordShow?t._e():i("view-code-comp",{ref:"viewCodeComp",attrs:{url:t.url,pwd:t.pwd,validInfo:t.validInfo,needShow:t.needShow,alipay:t.alipay,showToMinaTips:t.showToMinaTips&&!t.errorPage&&!t.lockedPage&&!t.validPage,categoryType:t.categoryType,orgName:t.orgName,errorCode:t.codeData.code},on:{loaded:t.codeLoaded}}),i("error-page",{attrs:{errorCode:t.codeData.code,auditReason:t.codeData.audit_reason,url:t.url,errorTips:t.errorTips,needShow:t.errorPage,isNotaryError:t.isNotaryError}}),i("locked-page",{attrs:{url:t.url,codeId:t.codeId,reminder:t.reminder,code:t.codeData.code,needShow:t.lockedPage,renderPwd:t.renderPwd,rememberPsw:t.rememberPsw},on:{confirmed:t.codeReloaded,checkboxChange:t.checkboxChange}}),i("valid-page",{attrs:{codeData:t.codeData,validInfo:t.validInfo,validCode:t.validInfo.validCode,show:t.validPage}}),t.recordShow?i("record-remind",{attrs:{url:t.url}}):t._e(),t.isScan?i("div",{staticClass:"scanContent"},[i("div",{staticClass:"outScan scanNext",on:{click:t.scanNext}},[i("i",{staticClass:"clifont anticon-cli-angle-right scanIcon"})]),i("div",{staticClass:"outScan scanPrev",on:{click:t.scanPrev}},[i("i",{staticClass:"clifont anticon-cli-angle-left scanIcon"})]),t.isUserCode?t._e():i("div",{staticClass:"outScan scanUser",on:{click:t.scanUserinfo}},[i("i",{staticClass:"clifont anticon-user scanIcon"})])]):t._e()],1)},a=[],s=i("9ab4"),r=i("1b40"),n=i("6022"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow?i("div",[t.showQiYeWxLoading?i("div",{staticClass:"work-weixin-wrap"},[t.showOpenQiYeWxLoading?i("div",{staticClass:"work-weixin-wrap-box"},[i("img",{attrs:{src:"https://static.clewm.net/cli/images/cli-loading@2x.gif",alt:"loading"}}),i("span",{staticClass:"text"},[t._v("正在打开草料二维码")])]):i("div",{staticClass:"loading",style:"text-align:center; padding-top:"+t.$$u(20)},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})])]):i("div",[t.needShow&&!t.toMinaFail||t.showGroupInfo?i("div",{staticClass:"view-code"},[i("Modal",{ref:"wechatErrorTipModal",attrs:{content:t.wechatErrorTipModalConfig.content,showCancel:!1,"confirm-name":t.scanPara.confirmName}}),i("Modal",{ref:"modal",attrs:{content:t.isWechatScanError?"由于微信扫码服务器不稳定，当前表单功能无法正常使用，请稍后再试。":t.scanPara.content,tip:t.scanPara.tip,showCancel:!t.isWechatScanError&&t.scanPara.showCancel,"confirm-name":t.scanPara.confirmName,"cancel-name":t.scanPara.cancelName,"confirm-content":t.scanPara.confirmContent,"cancel-content":t.scanPara.cancelContent,slotContent:t.scanPara.slotContent,noConfirmBtn:t.scanPara.noConfirmBtn},on:{onHide:t.onModalHide}},[this.slotUrlSchema?i("a",{staticStyle:{position:"relative",width:"100%",heiht:"100%",display:"flex","align-items":"center","justify-content":"center","text-decoration":"none"},attrs:{slot:"confirmSlot",href:this.slotUrlSchema},slot:"confirmSlot"},[i("span",{staticStyle:{color:"#4caf50"}},[t._v("前往小程序")])]):t._e(),t.slotToMina?i("div",{staticStyle:{position:"relative",width:"100%",heiht:"100%",display:"flex","align-items":"center","justify-content":"center","text-decoration":"none"},attrs:{slot:"confirmSlot",id:"confirm-btn"},slot:"confirmSlot"},[i("span",{staticStyle:{color:"#4caf50"}},[t._v("前往小程序")]),i("to-mina",{attrs:{username:t.originalId,path:t.scanPara.slotPath,type:t.scanPara.type,"parent-id":"confirm-btn","is-watch-parent":""}})],1):t._e()]),t.showGroupInfo?i("group-info-page",{attrs:{info:t.codeCheckAuth,org_msg:t.codeData.org_msg},on:{showTip:t.tip}}):[t.loading?i("div",{staticClass:"loading"},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e(),i("div",{staticClass:"empty-module",style:{background:"pure"===t.commonInfo.codeColorInfo.type?t.commonInfo.codeColorInfo.themeColor:t.$$getValue(t.commonInfo,"codeColorInfo.gradient.from")}}),t.code40206&&!t.loading?i("div",{staticClass:"missingTip"},[t._v(" 当前访问量过大，部分功能暂不可用，请刷新重试。 ")]):t._e(),t.loading?t._e():i("div",{style:{background:"summary"===t.codeType&&"normal_new"===t.categoryType||"summary"===t.codeType&&"card"===t.categoryType?"#ededed":t.commonInfo.isCompEmpty?"pure"===t.commonInfo.codeColorInfo.type?t.commonInfo.codeColorInfo.themeColor:t.$$getValue(t.commonInfo,"codeColorInfo.gradient.gradientCSS"):"white"}},[i("div",{staticClass:"__code_module-content",style:t.$$setStyle({common:Object.assign({},t.minHeight?{minHeight:t.minHeight+"px"}:{},t.needFlexCenter()?{justifyContent:"center",position:"relative"}:{})})},[i("div",{style:{background:t.commonInfo.isCompEmpty?"":"pure"===t.commonInfo.codeColorInfo.type?t.commonInfo.codeColorInfo.themeColor:t.$$getValue(t.commonInfo,"codeColorInfo.gradient.gradientCSS")}},[t.isTopImg()||"summary"===t.codeType?t._e():i("tempate",[i("code-title",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.commonInfo.codeHeaderTitleInfo.title,statusList:t.statusList,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo}}),i("notary-card",{attrs:{"code-data":t.codeData,headCmpInfo:t.headCmpInfo},on:{tip:t.tip}})],1),i("head-module",{attrs:{codeData:t.codeData,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),codeColorInfo:t.commonInfo.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,title:t.commonInfo.codeHeaderTitleInfo.title,swiperBgColor:t.swiperBgColor,allImgs:t.allImgs,bottomColor:t.bottomColor,showRecordView:t.showRecordExceptFloat,hasStatusOrTask:!!t.tasksList.length||!!t.statusList.length,headCmpInfo:t.headCmpInfo,currentFontSize:t.currentFontSize},on:{fileReadToMina:t.onFileReadToMina}}),t.isTopImg()?[i("code-title",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.commonInfo.codeHeaderTitleInfo.title,statusList:t.statusList,headCmpInfo:t.headCmpInfo}}),i("notary-card",{attrs:{"code-data":t.codeData,headCmpInfo:t.headCmpInfo},on:{tip:t.tip}})]:t._e(),i("code-status",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.commonInfo.codeHeaderTitleInfo.title,url:t.url,codeData:t.codeData,statusList:t.statusList,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),hasBottomBorder:t.commonInfo.showRecordView||!!t.tasksList.length,currentFontSize:t.currentFontSize,headCmpInfo:t.headCmpInfo},on:{showTip:t.tip}}),i("code-tasks",{attrs:{color:t.commonInfo.codeColorInfo.foreColor,bg:t.commonInfo.codeColorInfo.themeColor,title:t.commonInfo.codeHeaderTitleInfo.title,url:t.url,codeData:t.codeData,tasksList:t.tasksList,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),hasBottomBorder:t.commonInfo.showRecordView,hasStatusList:!!t.statusList.length,headCmpInfo:t.headCmpInfo}}),!t.noRecord&&"summary"!==t.codeType&&t.commonInfo.isRecordCode&&(t.commonInfo.hasOpenRecordView&&!t.richShowRecordView||t.commonInfo.hasOpenRecordLog||1===t.$$getValue(t.codeData,"qrcode_record.log_msg")&&t.$$getValue(t.codeData,"operateData.length"))&&t.isRecordOperateTop?i("RecordPreview",{attrs:{"code-data":t.codeData,showToMinaTips:t.showToMinaTips,originalId:t.originalId,wxConfigReady:t.wxConfigReady,isH5FromWeixin:t.isH5FromWeixin,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),noNewestRecord:t.richShowRecordView,hasOpenRecordLog:t.commonInfo.hasOpenRecordLog,title:t.commonInfo.codeHeaderTitleInfo.title,showOperatePanel:t.operatePos===t.Operate_Pos.Head,showDynamic:t.dynamicPos===t.DynamicPos.Head,fontSizeMsg:t.fontSizeMsg,currentFontSize:t.currentFontSize,cmpInfo:t.headCmpInfo},on:{showTip:t.tip}}):t._e()],2),i("div",{class:t.frompc&&"normal_new"===t.categoryType?"summary-pc-wrapper":""},["summary"===t.codeType?i("summary-action",{attrs:{title:t.commonInfo.codeHeaderTitleInfo.title,sort:t.summaryCodeSort,categoryType:t.categoryType,qrcodeCount:t.qrcodeCount},on:{search:t.onSummaryCodeSearch,sort:t.onSummaryCodeSort,changeCategoryType:t.changeCategoryType,setIsSearching:t.setIsSearching}}):t._e(),t._l(t.codeData.qrcode_compontent,(function(e){return i("div",{key:e.id},["audio"===e.component_code||"batchAudio"===e.component_code?i("div",{staticClass:"comp-wrap audio-wrap",attrs:{"data-type":e.component_code}},[i("audio-module",{attrs:{audioApply:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),currentFontSize:t.currentFontSize}})],1):t._e(),"video"===e.component_code?i("div",{staticClass:"comp-wrap video-wrap",attrs:{"data-type":e.component_code}},[i("video-module",{attrs:{data:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),currentFontSize:t.currentFontSize}})],1):t._e(),"batchVideo"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-video",{attrs:{data:e,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1)}})],1):t._e(),"excelTable"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-table",{attrs:{data:e}})],1):t._e(),"batchTable"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-table",{attrs:{data:e}})],1):t._e(),"contactus"===e.component_code&&(t.$$getValue(e,"attribute_list.0.title.value")||t.$$getValue(e,"attribute_list.0.contact_phone.value")||t.$$getValue(e,"attribute_list.0.contact_mail.value")||t.$$getValue(e,"attribute_list.0.address.value")||t.$$getValue(e,"attribute_list.0.work_time.value"))?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("contact-module",{attrs:{data:e}})],1):t._e(),"address"===e.component_code&&t.$$getValue(e,"attribute_list.0.address.value")?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("address-module",{attrs:{data:e}})],1):t._e(),"batchImage"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-image",{attrs:{data:e,allImgs:t.allImgs}})],1):t._e(),"batchLocate"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-location",{attrs:{data:e}})],1):t._e(),"file"===e.component_code||"batchFile"===e.component_code?i("div",{staticClass:"comp-wrap file-wrap",attrs:{"data-type":e.component_code}},[i("file-module",{attrs:{data:e,currentFontSize:t.currentFontSize}})],1):t._e(),"text"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("text-module",{attrs:{data:e,codeData:t.codeData,dataType:t.codeType,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1)},on:{showTip:t.tip,showToOtherMinaTip:t.toOtherMina,showToCliMina:t.toCliMina}})],1):t._e(),"batchText"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("empty-module-text",{attrs:{data:e}})],1):t._e(),"redirect"===e.component_code?i("div",{staticClass:"comp-wrap",class:"summary"===t.codeType?"skip-preview-summary":"",attrs:{"data-type":e.component_code}},[t.summaryLoading?i("div",{staticClass:"loading"},[i("img",{attrs:{src:"https://ncstatic.clewm.net/rsrc/2019/0412/13/2a4b6db7be8d8417044c3285f5f1cace.gif?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):i("redirect-module",{attrs:{data:e,dataType:t.codeType,summaryFilter:t.summaryFilter,url:t.url,pwd:t.pwd,codeData:t.codeData,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),summaryCodeCurPage:t.summaryCodeCurPage,originalId:t.originalId,orgValidParams:t.orgValidParams,categoryType:t.categoryType,isSearching:t.isSearching},on:{showTip:t.tip,asyncRenderCompManual:t.asyncRenderManual}})],1):t._e(),"image"===e.component_code?i("div",{staticClass:"no-padding-wrap img-wrap"},[i("image-module",{attrs:{data:e,codeColorInfo:t.commonInfo.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,allImgs:t.allImgs,currentFontSize:t.currentFontSize}})],1):t._e(),"table"===e.component_code?i("div",{staticClass:"comp-wrap",attrs:{"data-type":e.component_code}},[i("table-module",{attrs:{data:e}})],1):t._e()])}))],2),!t.noRecord&&"summary"!==t.codeType&&t.commonInfo.isRecordCode&&(t.commonInfo.hasOpenRecordView&&!t.richShowRecordView||t.commonInfo.hasOpenRecordLog||1===t.$$getValue(t.codeData,"qrcode_record.log_msg")&&t.$$getValue(t.codeData,"operateData.length"))&&t.isRecordOperateBottom?i("RecordPreview",{attrs:{"code-data":t.codeData,showToMinaTips:t.showToMinaTips,originalId:t.originalId,wxConfigReady:t.wxConfigReady,isH5FromWeixin:t.isH5FromWeixin,isPaidUser:t.$$getValue(t.codeData,"org_msg.is_paid_user",1),noNewestRecord:t.richShowRecordView,hasOpenRecordLog:t.commonInfo.hasOpenRecordLog,title:t.commonInfo.codeHeaderTitleInfo.title,showOperatePanel:t.operatePos===t.Operate_Pos.BodyBottom,showDynamic:t.dynamicPos===t.DynamicPos.Body,placeBottom:"",currentFontSizeWithoutApply:t.currentFontSize,fontSizeMsg:t.fontSizeMsg,currentFontSize:t.currentFontSize,afterContent:t.hasContent,cmpInfo:t.footCmpInfo},on:{showTip:t.tip}}):t._e()],1),t.noBottomContent?t._e():i("div",{staticClass:"__code_bottom-content"},[i("div",{staticClass:"pd16"},[i("code-bottom-content",{attrs:{"code-data":t.codeData,isRecordCode:t.commonInfo.isRecordCode,validInfo:t.validInfo,bottomColor:t.bottomColor,isEnableToMina:t.isEnableToMina,originalId:t.originalId},on:{showTip:t.tip}})],1)]),t.showExpandBtn||t.showToMinaTips?i("div",{style:t.calcHeight()}):t._e()])]],2):t._e(),t.showToMinaTips&&t.$$appStore.wxConfigReady?i("div",{staticClass:"tipsWrapper",style:t.calcMinaBottom()},[i("div",{staticClass:"tipsTitle"},[t._v(" "+t._s(t.commonInfo.isRecordCode?"表单仅支持在微信小程序中填写":"草料二维码小程序查看，效果更佳")+" ")]),i("div",{staticClass:"minaBtn"},[t._v("打开")]),i("div",{staticStyle:{position:"absolute",left:"0",top:"0",bottom:"0",right:"0"}},[i("wx-open-launch-weapp",{staticClass:"union-launch-btn",staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{"data-type":"topToMina",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 270px; background: #000; color: #fff; visibility: hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1)]):t._e()]),t.toMinaFail?i("wxwork-error-page",{attrs:{isWorkWatched:t.isWorkWatched,orgName:t.orgName,isNotSameCompany:t.isNotSameCompany}}):t._e(),i("Modal",{ref:"tipModal",attrs:{content:"该内容仅支持在微信中打开",showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}})],1):t._e()},l=[],d=(i("caad"),i("2ac6")),h=i("005c"),p=i("4a75"),u=i("2173"),g=i("08f7"),m=i("cac3"),f=i("1949");const _=t=>{const{auth_type:e,group_list:i=[]}=Object(g["a"])(t,"auth_list.0")||{};if(e===m["b"].WxWork)return!0;let o=!0;return Object(f["a"])(i,t=>{5!==t.group_type&&(o=!1)}),e===m["b"].Group&&o};var y=i("f1d0"),b=i("131c"),v=i("03d1"),$=i("d197"),w=i("8e05");class C{constructor({project:t,position:e,statusList:i,tasksList:o,preData:a,stateShowMode:s,qrcodeTopComponent:r,qrcodeCompontent:n,recordSummaryStatus:c,expandLog:l,qrcodeRecord:d,formData:h,isEditor:p,soncodeEditPosition:u,recordMsg:g,hasDynamicViewAuth:m,operateMsg:f}){var _;const y=Object(b["o"])(g),v=Object(b["s"])(g),w=y===$["d"].Head||v===$["i"].Head,C=y===$["d"].Body||v===$["i"].BodyBottom,O=Object(b["j"])(null===g||void 0===g||null===(_=g.auth_info)||void 0===_?void 0:_.auth_list,t=>{const{data_type:e,privi_type:i}=t;return 7===e&&"visible"===i}),{log_status:S}=null!==d&&void 0!==d?d:{},j=Object(b["C"])([1,"1"],S),I=Object(b["i"])(n,t=>{const{component_code:e}=t;return!Object(b["C"])(["recordlog","recordview"],e)});let x=!0;Object(b["l"])(r,t=>{const{component_code:e,status:i}=t;if(Object(b["C"])(["audio","video","image","file"],e)&&!Object(b["C"])([1,"1"],i))return x=!1,!1});const T=!I.length,k=T&&x,V=j&&!(null===f||void 0===f||!f.length)||!c;Object(b["a"])(this,{project:t,position:e,statusList:i,tasksList:o,preData:a,stateShowMode:s,qrcodeTopComponent:r,qrcodeCompontent:n,recordSummaryStatus:c,expandLog:l,qrcodeRecord:d,formData:h,isEditor:p,soncodeEditPosition:u,recordMsg:g,hasDynamicViewAuth:m,operateMsg:f,dynamicShowPos:y,operateShowPos:v,isRecordOperateTop:w,isRecordOperateBottom:C,recordViewAuth:O,isRecordCode:j,isCodeEmpty:T,isComponentEmpty:k,showRecordOperate:V});let M="1",P="",D=!1;const L=this.getHeadImage();if(L){var q,R,F,E,H,z;const{attribute_list:t}=L,e=Object(b["i"])(t,t=>{var e;return!(null===(e=t.image_url)||void 0===e||!e.value)});M=null!==(q=null===(R=e[0])||void 0===R||null===(F=R.image_style)||void 0===F?void 0:F.value)&&void 0!==q?q:"1",P=null!==(E=null===(H=e[0])||void 0===H||null===(z=H.prew_type)||void 0===z?void 0:z.value)&&void 0!==E?E:"",D=e.length>1}Object(b["a"])(this,{headImgStyle:M,headImgPrewType:P,headImgIsMultiple:D,isTopImg:"3"===M})}isOnlyTitleShow(){const{preData:t,isRecordCode:e,isComponentEmpty:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{};return a&&i&&!e}isTitleVerticalCenter(){const{statusList:t,tasksList:e,isRecordCode:i,isCodeEmpty:o}=this;return!(null!==t&&void 0!==t&&t.length)&&!(null!==e&&void 0!==e&&e.length)&&o&&!i}isHistoryContentShow(){const{preData:t,isRecordCode:e,isComponentEmpty:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{};return(a||!i||e)&&!(a&&i&&!e)}isHistoryContentVerticalCenter(){const{isCodeEmpty:t,showRecordOperate:e}=this;return t&&!e}isVerticalCenter(){const{isTopImg:t,headImgPrewType:e,headImgIsMultiple:i}=this;return this.isOnlyTitleShow()&&this.isTitleVerticalCenter()||this.isHistoryContentShow()&&this.isHistoryContentVerticalCenter()&&!t&&!("1"===e&&i)}hasStatus(){const{statusList:t}=this;return!(null===t||void 0===t||!t.length)}isHistoryNameShow(){const{preData:t,isTopImg:e}=this,{codeHeaderTitleInfo:i}=null!==t&&void 0!==t?t:{},{title:o}=null!==i&&void 0!==i?i:{};return o&&!e}isTitle3Show(){const t=this.isHistoryContentShow(),e=this.hasStatus(),i=this.isHistoryNameShow();return t&&!e&&i}isTitle4Show(){const{isTopImg:t}=this,e=this.isHistoryContentShow();return e&&t}hasStatusOrTask(){const{statusList:t,tasksList:e}=this;return!!(null!==t&&void 0!==t&&t.length||null!==e&&void 0!==e&&e.length)}isSpcTitleShow(){const{statusList:t,preData:e,isRecordCode:i,isComponentEmpty:o}=this,{codeHeaderTitleInfo:a}=null!==e&&void 0!==e?e:{},{title:s}=null!==a&&void 0!==a?a:{};return!(null===t||void 0===t||!t.length)&&(s||!o||i)&&!(s&&o&&!i)}getTitles(){const{preData:t}=this,{codeHeaderTitleInfo:e}=null!==t&&void 0!==t?t:{},{title:i}=null!==e&&void 0!==e?e:{};return i?Object(b["O"])(i.split(/(\n|\r\n)/g),t=>{if(t.length<=0)return t;if(t.length<=6)return{prefix:t};const e=t.substring(0,t.length-5),i=t.slice(-5);return{prefix:e,suffix:i}}):[]}hasTitlePlaceholder(){const{preData:t}=this,{codeHeaderTitleInfo:e}=null!==t&&void 0!==t?t:{},{title:i}=null!==e&&void 0!==e?e:{};return!!i&&(Object(b["y"])(i,"placeholder-wrapper")||Object(b["y"])(i,"placeholder-edit-nav")||Object(b["y"])(i,"placeholder-no-edit-nav"))}getTitleGap(){const{preData:t,isTopImg:e}=this,{codeHeaderTitleInfo:i}=null!==t&&void 0!==t?t:{},{title:o}=null!==i&&void 0!==i?i:{},a={},s=this.isOnlyTitleShow(),r=this.hasStatus(),n=this.isSpcTitleShow(),c=this.isHistoryNameShow(),l=this.isHistoryContentShow(),d=this.isRecordOperationShow(),h=this.isRecordCheckShow();if(s)Object(b["a"])(a,{top:0,bottom:0}),(r||d&&h)&&Object(b["a"])(a,{top:12,bottom:16});else if(n&&c||l&&!r&&c)Object(b["a"])(a,{top:16,bottom:24}),r&&Object(b["a"])(a,{top:12,bottom:16});else if(l&&e){Object(b["a"])(a,{top:0,bottom:0}),o&&Object(b["a"])(a,{top:16,bottom:16});const t=this.getTitles(),e=this.hasTitlePlaceholder();r&&(t.length||e)&&Object(b["a"])(a,{top:12,bottom:16})}return a}getNotaryGap(){return{top:0,bottom:12}}getStatusGap(){const{stateShowMode:t}=this,e=t===y["a"].TwoCol,i=!1;return{top:e&&i?8:0,bottom:12}}getTaskGap(){const t=this.hasStatus();return{top:t?0:12,bottom:12}}getHeadModule(){const{qrcodeTopComponent:t}=this;return Object(b["j"])(t,t=>{const{component_code:e,status:i}=t;return Object(b["C"])(["audio","video","image","file"],e)&&!Object(b["C"])([1,"1"],i)})}getHeadImage(){const t=this.getHeadModule(),{component_code:e}=null!==t&&void 0!==t?t:{};return"image"===e?t:null}isHeadImageEmpty(){const{qrcodeRecord:t,formData:e,isEditor:i,soncodeEditPosition:o,project:a}=this,{tpl_qrcode_status:s}=null!==t&&void 0!==t?t:{},r=this.getHeadModule(),{component_code:n,is_empty_component:c}=null!==r&&void 0!==r?r:{},{id:l,fieldId:d}=Object(b["v"])(r);let h;if(a===y["e"].WXA){const t=Object(b["p"])(e);({canEdit:h}=t[d]||{}),h=i&&!o&&h}else a===y["e"].MPCLI&&(h=i);return"image"===n&&l&&(c||4===s)&&4!==s&&!(3===s&&h)}isRecordOperateWrapperShow(){const{position:t,isRecordOperateTop:e,isRecordOperateBottom:i,showRecordOperate:o}=this;return o&&("top"===t&&e||"bottom"===t&&i)}isHeadModuleLast(){const{preData:t,isTopImg:e}=this,{codeHeaderTitleInfo:i}=null!==t&&void 0!==t?t:{},{title:o}=null!==i&&void 0!==i?i:{},a=this.hasStatusOrTask();let s;return s=e?!o&&!a:!a,s}isRecordOperationShow(){const{recordSummaryStatus:t}=this,e=this.isRecordItemContentShow();return!t||e}isDynamicShow(){const{dynamicShowPos:t,position:e}=this;return Object(b["C"])(["top","formList"],e)&&t===$["d"].Head||"bottom"===e&&t===$["d"].Body}isRecordCheckShow(){const{recordSummaryStatus:t,dynamicShowPos:e,hasDynamicViewAuth:i,recordViewAuth:o,project:a}=this,{hide_nopower:s=0}=null!==o&&void 0!==o?o:{},r=this.isDynamicShow();return!t&&e!==$["d"].Hide&&(a===y["e"].WXA&&(i||1!==s)||a===y["e"].MPCLI)&&r}isRecordItemContentShow(){const{expandLog:t,operateShowPos:e,position:i,operateMsg:o}=this;let a=!1;return"top"===i?a=Object(b["C"])([w["b"].Bottom,w["b"].Hide],t)||e===$["i"].BodyBottom:"bottom"===i&&(a=Object(b["C"])([w["b"].Bottom,w["b"].Hide],t)||e===$["i"].Head),null!==o&&void 0!==o&&o.length||(a=!0),!a}isRecordContentEmpty(){const t=this.isRecordOperationShow(),e=this.isRecordCheckShow(),i=this.isRecordItemContentShow(),o=t&&(e||i);return!o}getHeadModuleGap(){const{recordSummaryStatus:t=1,expandLog:e,preData:i,isCodeEmpty:o,showRecordOperate:a,headImgStyle:s}=this,r=this.isHeadImageEmpty(),n=this.hasStatusOrTask(),c=!t,{codeColorInfo:l,codeHeaderTitleInfo:d}=null!==i&&void 0!==i?i:{},{themeColor:h="",type:p="",foreColor:u=""}=null!==l&&void 0!==l?l:{},{title:g}=null!==d&&void 0!==d?d:{},m=c||e!==w["b"].Bottom;let f,_=!1;if("3"===s&&g?(f=0,a&&m&&(f=12,_=!0)):a&&m||n?(f=12,_=!0):"1"!==s||o?f=0:(f=28,(Object(b["C"])(h,"#fff")||"gradient"===p&&Object(b["C"])(["#000","#000000"],u))&&(f=16)),o&&!a&&"1"!==s&&(f=32),_){const t=this.isHeadModuleLast(),e=this.isRecordContentEmpty(),i=this.isRecordOperateWrapperShow();(t&&Object(b["C"])(["2","3"],s)&&!i||t&&Object(b["C"])(["2","3"],s)&&i&&e)&&(f=0)}return r&&(f=0),{top:0,bottom:f}}getRecordOperateWrapperGapTop(){const{preData:t,statusList:e,tasksList:i}=this,{codeHeaderTitleInfo:o}=null!==t&&void 0!==t?t:{},{title:a}=null!==o&&void 0!==o?o:{},s=this.getHeadModule();let r=0;return a||s||null!==e&&void 0!==e&&e.length||null!==i&&void 0!==i&&i.length||(r=12),r}getRecordOperationGapTop(){const{preData:t,qrcodeCompontent:e,position:i}=this;let o=0;const a=Object(b["i"])(e,t=>{const{component_code:e}=t;return"recordlog"!==e}),s=a.length>0&&t;return"bottom"===i&&s&&(o=16),o}getRecordOperationGapBottom(){const{expandLog:t,preData:e}=this,{codeColorInfo:i}=null!==e&&void 0!==e?e:{},{themeColor:o,type:a}=null!==i&&void 0!==i?i:{},s=this.isRecordContentEmpty();let r=Object(b["C"])(["#fff","#ffffff"],o)||"gradient"===a?16:28;return t!==w["b"].BlockList&&s&&(r=0),r}getRecordCheckGap(){const t=this.getRecordOperateWrapperGapTop(),e=this.getRecordOperationGapTop(),i=this.getRecordOperationGapBottom(),o=this.isRecordItemContentShow();return{top:t+e,bottom:o?0:i}}getRecordItemContentGap(){var t;const{recordViewAuth:e,recordMsg:i,project:o}=this,{hide_nopower:a=0}=null!==e&&void 0!==e?e:{},s=this.isRecordCheckShow(),r=this.isDynamicShow(),n=1===a&&(null===i||void 0===i||null===(t=i.auth_info)||void 0===t?void 0:t.power_status)!==$["m"].HAS,c=(o===y["e"].WXA&&!n||o===y["e"].MPCLI)&&r;let l=0;if(s&&c)l=12;else if(!s){const t=this.getRecordOperateWrapperGapTop(),e=this.getRecordOperationGapTop();l=t+e}const d=this.getRecordOperationGapBottom();return{top:l,bottom:d}}getData(){const t=this.isVerticalCenter(),e=this.isOnlyTitleShow(),i=this.isHistoryContentShow(),o=this.hasStatus(),a=this.isHistoryNameShow(),s=this.isTitle3Show(),r=this.isTitle4Show(),n=this.hasStatusOrTask(),c=this.isSpcTitleShow(),l=this.isRecordOperateWrapperShow(),d=this.isRecordOperationShow(),h=this.isRecordCheckShow(),p=this.isRecordItemContentShow(),u=this.getTitleGap(),g=this.getNotaryGap(),m=this.getStatusGap(),f=this.getTaskGap(),_=this.getHeadModuleGap(),y=this.getRecordCheckGap(),b=this.getRecordItemContentGap();return{isVerticalCenter:t,isOnlyTitleShow:e,isHistoryContentShow:i,hasStatus:o,isHistoryNameShow:a,isTitle3Show:s,isTitle4Show:r,hasStatusOrTask:n,isSpcTitleShow:c,isRecordOperateWrapperShow:l,isRecordOperationShow:d,isRecordCheckShow:h,isRecordItemContentShow:p,title:{gap:u},notary:{gap:g},status:{gap:m},task:{gap:f},headModule:{gap:_},recordCheck:{gap:y},recordItemContent:{gap:b}}}}var O=C,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"title-wrapper "+(t.title?"":"x-noTitle")},[t.title&&t.titleIsPlaceholder?i("pre",{class:"common-title "+t.titleType+" "+(t.statusList.length?"common-title-ForStatus":""),style:{color:t.color,whiteSpace:t.$$appStore.codeStatus.length?"normal":"pre-wrap",paddingTop:t.$$u(t.headCmpInfo.title.gap.top),paddingBottom:t.$$u(t.headCmpInfo.title.gap.bottom)}},t._l(t.titleList,(function(e,o){return i("span",{key:e,domProps:{innerHTML:t._s(o%2===1?e:t.htmlEnd6Text(e))}})})),0):t.title?i("pre",{class:"common-title "+t.titleType+" "+(t.statusList.length?"common-title-ForStatus":"")+" font-size-22-"+t.currentFontSize+" "+(t.isIos?"common-title-ios":""),style:{color:t.color,whiteSpace:"pre-wrap",paddingTop:t.$$u(t.headCmpInfo.title.gap.top),paddingBottom:t.$$u(t.headCmpInfo.title.gap.bottom)},domProps:{innerHTML:t._s(t.htmlEnd6Text(t.title))}}):t._e(),t._v(" "),t.title||"top-title"!==t.titleType?t._e():i("div",{staticClass:"virtual-title",style:{backgroundColor:t.bg}})])},j=[];let I=class extends r["d"]{constructor(){super(...arguments),this.titleType="code-title",this.titleIsPlaceholder=!1,this.titleList=[],this.excludePlaceholderTitle="",this.isIos=Object(h["s"])()}titleChange(){this.updateData()}bgChange(){this.updateData()}colorChange(){this.updateData()}beforeMount(){this.updateData()}htmlEscape(t){return t?t.replace(/</g,"&lt").replace(/>/g,"&gt"):t}htmlEnd6Text(t){if(!t)return t;const{htmlEscape:e}=this,i=Object(p["I"])(t.split(/(\n|\r\n)/g),t=>{if(t.length<=6)return t;const i=t.substring(0,t.length-6),o=t.slice(-6);return`${e(i)}<span style='white-space: nowrap;'>${e(o)}</span>`});return i.join("")}updateData(){const{codeInfo:t}=this.$$appStore;this.statusList.length&&t.isCompEmpty&&!t.isHeadCode&&!t.isRecordCode?this.titleType="top-title":!t.isCompEmpty||t.isHeadCode||t.isRecordCode?"file"!==t.headType&&"audio"!==t.headType||!t.isHeadCode||t.isRecordCode||!t.isCompEmpty||(this.titleType="top-title"):this.titleType="middle-title";const{title:e}=this;if(e&&(this.titleIsPlaceholder=Object(p["t"])(e,"placeholder-wrapper")||Object(p["t"])(e,"placeholder-edit-nav")||Object(p["t"])(e,"placeholder-no-edit-nav"),this.titleIsPlaceholder)){const t=Object(p["p"])();this.titleList=e.split(t),this.excludePlaceholderTitle=e.replace(t,"")}}};Object(s["a"])([Object(r["c"])({default:"",type:String})],I.prototype,"title",void 0),Object(s["a"])([Object(r["e"])("title")],I.prototype,"titleChange",null),Object(s["a"])([Object(r["c"])({type:Array,default:[]})],I.prototype,"statusList",void 0),Object(s["a"])([Object(r["c"])({default:"white",type:String})],I.prototype,"bg",void 0),Object(s["a"])([Object(r["e"])("bg")],I.prototype,"bgChange",null),Object(s["a"])([Object(r["c"])({default:"rgba(0, 0, 0, 0.87)",type:String})],I.prototype,"color",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],I.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],I.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["e"])("color")],I.prototype,"colorChange",null),I=Object(s["a"])([r["a"]],I);var x=I,T=x,k=(i("9934"),i("2877")),V=Object(k["a"])(T,S,j,!1,null,"1ea4a5eb",null),M=V.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{ref:"launchPlaceholder",staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",staticStyle:{display:"block",width:"100%",height:"100%"},attrs:{"data-type":t.type,username:t.originalId,path:t.path}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(" \x3c!-- 真正的手机端的跳转区域是由这块div高度撑起,调试的时候可以去掉 visibility:hidden 看效果 --\x3e <style>.btn {display: block; width: 100%; height: "+t._s(t.openLaunchHeight)+'px; background: rgba(0,0,0,0.5); color: #fff; visibility:hidden; }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e()},D=[],L=i("8f21");let q=class extends r["d"]{constructor(){super(...arguments),this.parentHeight="",this.observer=null,this.win=window}get isEnableToMina(){return Object(h["q"])()}get originalId(){return this.$$appStore.xcxOriginalId}get toMinaEnvReady(){return this.$$appStore.wxConfigReady&&this.originalId}mounted(){console.info(this.height)}beforeDestory(){this.observer&&(this.observer.disconnect(),this.observer.takeRecords(),this.observer=null)}getParent(){let t=0;const e=()=>{if(t+=1,!this.parentId)return null;const i=document.querySelector("#"+this.parentId);return i||(t>3?null:new Promise(t=>{setTimeout(()=>{t(e())},500)}))};return e()}async watchParentHeight(){const t=await this.getParent();if(!t)return;const e={childList:!0},i=()=>{const e=getComputedStyle(t).getPropertyValue("height");if(e===this.parentHeight)return;this.parentHeight=e;const i=t.getElementsByClassName("launch-placeholder")[0],{type:o,originalId:a,path:s}=this;i.innerHTML=`\n        <wx-open-launch-weapp\n          class="launch-btn"\n          data-type="${o}"\n          style="display:block;width:100%;height:100%;"\n          username="${a}"\n          path="${s}"\n        >\n          <template>\n            <style>.btn {display: block; width: 100%; height: ${e}; background: #000; color: #fff; visibility:hidden; }</style>\n            <div class="btn">打开小程序${a}</div>\n          </template>\n        </wx-open-launch-weapp>\n      `,this.addOpenLaunchListener()},{win:o}=this,a=o.MutationObserver||o.WebKitMutationObserver||o.MozMutationObserver;this.observer=new a(i),this.observer.observe(t,e)}async addOpenLaunchListener(){const t=this.$refs.launchPlaceholder;if(!t)return;const e=t.getElementsByClassName("launch-btn")[0],{type:i}=this;let o=0;const a={cvid:(new L["a"]).id};"topRecordHistory"===i?o=146063:"goRecordFormPage"===i&&(o=146056,a.expandLog=0),e.addEventListener("launch",()=>{console.log("launch"),n["a"].logClick(104,o,"",a)}),e.addEventListener("error",t=>{console.log("error");try{a.errMsg=JSON.stringify(t.detail),n["a"].logClick(104,o,"",a)}catch(e){console.log(e)}})}};Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],q.prototype,"type",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],q.prototype,"path",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],q.prototype,"parentId",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:50})],q.prototype,"height",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],q.prototype,"isWatchParent",void 0),q=Object(s["a"])([Object(r["a"])({computed:{show(){const{toMinaEnvReady:t,isEnableToMina:e,isWatchParent:i}=this,o=t&&e;return o&&(setTimeout(()=>{this.addOpenLaunchListener()},500),i&&this.watchParentHeight()),o},openLaunchHeight(){const{height:t,win:e}=this,i=Object(p["N"])(t),o=e.hotcss.rem2px(i,e.innerWidth);return o}}})],q);var R=q,F=R,E=Object(k["a"])(F,P,D,!1,null,null,null),H=E.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("i",{staticClass:"clifont anticon-about"}),t.isNotSameCompany||t.isWorkWatched?i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]):t._e(),t.isNotSameCompany||t.isWorkWatched?t._e():i("div",{staticClass:"tips"},[t._v(" 请联系管理员，为你开通「草料二维码」应用的权限 ")]),t.isNotSameCompany||t.isWorkWatched?i("div",{staticClass:"btn",staticStyle:{background:"#f2f2f2",color:"rgba(0, 0, 0, 0.85)"},on:{click:t.closePage}},[t._v(" 关闭 ")]):i("div",{staticClass:"btn",on:{click:t.goManagerTips}},[t._v(" 联系管理员开通 ")])])},B=[],W=i("3294");let N=class extends r["d"]{constructor(){super(...arguments),this.title=""}mounted(){if(console.log(this.isNotSameCompany),console.log(this.isWorkWatched),!this.isNotSameCompany)return this.isWorkWatched?(console.log(this.orgName),void(this.title=`仅限「${this.orgName}」内部员工，使用企业微信查看`)):void(this.title="你没有查看数据的权限");this.title=`该二维码仅限「${this.orgName}」内部员工查看`}goManagerTips(){const{href:t}=window.location;console.log(t),t.indexOf("exp-")>-1?window.location.href="https://app.wecom.work/595859":t.indexOf("cliim.net")>-1?window.location.href="https://app.wecom.work/121686":t.indexOf("cliim.com")>-1?window.location.href="https://app.wecom.work/255188":window.location.href="https://app.wecom.work/932263"}closePage(){Object(W["a"])()}};Object(s["a"])([Object(r["c"])({type:String,default:"未知企业"})],N.prototype,"orgName",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],N.prototype,"isNotSameCompany",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],N.prototype,"isWorkWatched",void 0),N=Object(s["a"])([Object(r["a"])({components:{}})],N);var A=N,U=A,Q=(i("29e0"),Object(k["a"])(U,z,B,!1,null,"4fca8fca",null)),G=Q.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[i("i",{staticClass:"clifont anticon-about"}),t.authInfo.group_list&&t.authInfo.group_list.length?i("div",{staticClass:"title"},[t._v(" 只有 "),t.org_msg.name?i("span",[t._v("「"+t._s(t.org_msg.name)+"」")]):t._e(),13===t.authInfo.auth_type?i("span",[t._v("组织成员")]):t._l(t.authInfo.group_list,(function(e,o){return i("span",{key:e.id,staticClass:"text"},[e.wxwork_deptid?i("ww-open-data",{staticStyle:{display:"inline-block"},attrs:{corpid:e.corp_id,openid:e.wxwork_deptid,type:"departmentName"}}):i("span",[t._v(t._s(e.group_name))]),t.showSpit(o)?i("span",{staticClass:"split"},[t._v("、")]):t._e()],1)})),t._v(" 可查看 ")],2):t._e(),i("div",{staticClass:"desc"},[t._v(t._s(t.subTitle))]),t.btnText?i("div",{staticClass:"btn",on:{click:t.toCliMina}},[t._v(t._s(t.btnText))]):t._e(),i("Modal",{ref:"modal",attrs:{content:"该内容仅支持在微信中操作",showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}})],1)},Y=[],X=i("ecb3");let K=class extends r["d"]{constructor(){super(...arguments),this.subTitle="",this.btnText="",this.authInfo={}}showSpit(t){return t<this.$$getValue(this.authInfo,"group_list.length",0)-1}mounted(){const t=Object(b["x"])(this.info,"auth_list.0");this.authInfo=t;const{group_list:e,auth_type:i}=t,o=Object(p["g"])(e,t=>t.allow_join);o&&o.length?this.subTitle=13===i?"如果你属于该组织，请先加入":"如果你属于以上身份组，请先加入":this.subTitle="如有需要，请联系管理员开通权限",this.btnText=[1,13].includes(i)?"验证我的身份":""}toCliMina(){this.$$appStore.h5QueryString.frompc?this.$refs.modal.showModal():this.$emit("showTip","toMina","normal")}};Object(s["a"])([Object(r["c"])({type:Object,default:{}})],K.prototype,"info",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:!1})],K.prototype,"org_msg",void 0),K=Object(s["a"])([Object(r["a"])({components:{Modal:X["a"]}})],K);var Z=K,tt=Z,et=(i("03e4"),Object(k["a"])(tt,J,Y,!1,null,"d5e38d10",null)),it=et.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 5!==t.stateShowMode&&t.statusList.length?i("div",{class:"codeStatusWrapper wrapper_"+t.stateShowMode+" "+(t.hasBottomBorder?"hasBottomBorder":"")+" "+(2===t.stateShowMode?"codeStatusWrapperCard":""),style:{marginTop:t.$$u(t.headCmpInfo.status.gap.top),marginBottom:t.$$u(t.headCmpInfo.status.gap.bottom)}},[t._l(t.statusList,(function(e,o){return i("div",{key:o,class:"statusItem_"+t.stateShowMode+" "+(3===t.stateShowMode?"twoColWrap":"statusItem "+(t.frompc?"has-active-status":"")),style:3===t.stateShowMode&&(t.statusList.length%2===0&&(o===t.statusList.length-1||o===t.statusList.length-2)||t.statusList.length%2===1&&o===t.statusList.length-1)?"margin-bottom:0;":"",attrs:{"data-id":e.state_id},on:{click:function(e){t.frompc?t.tip("edit"):t.showTip("toMina","normal")}}},[3===t.stateShowMode?[i("div",{staticClass:"title",class:"font-size-13-"+t.currentFontSize},[t._v(" "+t._s(e.state_name)+" ")]),i("div",{staticClass:"status",class:"font-size-18-"+t.currentFontSize,style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")]),i("div",{staticClass:"time",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 ")])]:1===t.stateShowMode?[i("div",{staticClass:"itemLeft"},[i("div",{staticClass:"itemTitle"},[i("span",{staticClass:"stateName",class:"font-size-17-"+t.currentFontSize},[t._v(t._s(e.state_name))]),i("span",{staticClass:"stateText",class:"font-size-17-"+t.currentFontSize,style:"color: "+(e.color||"rgba(0, 0, 0, 0.85)")},[t._v(" "+t._s(e.text)+" ")])])]),i("div",{staticClass:"itemRight"},[i("div",{staticClass:"updateTime",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 ")]),i("i",{staticClass:"clifont anticon-gengduo",class:"font-size-12-"+t.currentFontSize})])]:4===t.stateShowMode?[i("div",{staticClass:"cardItemWrap"},[i("div",{staticClass:"topItem",class:"font-size-15-"+t.currentFontSize},[i("div",{staticClass:"name-text"},[t._v(t._s(e.state_name))])]),i("div",{staticClass:"contItem",class:"font-size-20-"+t.currentFontSize},[i("div",{style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")])]),i("div",{staticClass:"otherItem",class:"font-size-12-"+t.currentFontSize},[t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 "),e.tplType7State&&e.tplType7State.remark.imgs.length?i("span",[i("i",{staticClass:"remarkImgIcon clifont anticon-youcetubiao2"}),t._v(t._s(e.tplType7State.remark.imgs.length)+" ")]):t._e()])]),i("div",{staticClass:"btnAction",class:"font-size-14-"+t.currentFontSize},[i("i",{staticClass:"clifont anticon-shuaxinzhuangtai"}),t._v(" 更新 ")])]:[i("div",{staticClass:"cardItemWrap"},[i("div",{staticClass:"topItem",class:"font-size-17-"+t.currentFontSize},[i("div",{staticClass:"name-text"},[t._v(t._s(e.state_name))])]),i("div",{staticClass:"contItem",class:"font-size-20-"+t.currentFontSize},[i("div",{style:"color: "+(e.color||"#999")},[t._v(" "+t._s(e.text)+" ")])]),i("div",{staticClass:"otherItem",class:"font-size-13-"+t.currentFontSize},[e.state_change_log&&e.state_change_log[0]?[e.state_change_log[0].wxWorkMsg&&e.state_change_log[0].wxWorkMsg.corp_id&&e.state_change_log[0].wxWorkMsg.user_id&&t.$$appStore.h5QueryString.frompc?[i("ww-open-data",{staticStyle:{display:"inline-block",color:"#333"},attrs:{corpid:e.state_change_log[0].wxWorkMsg.corp_id,openid:e.state_change_log[0].wxWorkMsg.user_id,type:"userName"}})]:i("span",{staticClass:"name"},[t._v(" "+t._s(e.state_change_log[0].opereater_name)+" ")])]:t._e(),t._v(" "+t._s(e.formatUpdateTime[0])+" "+t._s(e.formatUpdateTime[1])+" 更新 "),e.tplType7State&&e.tplType7State.remark.imgs.length?i("span",[i("i",{staticClass:"remarkImgIcon clifont anticon-youcetubiao2",class:"font-size-14-"+t.currentFontSize}),t._v(" "+t._s(e.tplType7State.remark.imgs.length)+" ")]):t._e()],2)])]],2)})),i("Modal",{ref:"modal",attrs:{content:"该内容仅支持在微信中打开",showCancel:!1,tip:"请使用微信扫一扫","confirm-name":"我知道了","confirm-content":"","cancel-content":""}})],2):t._e()},at=[];let st=class extends r["d"]{constructor(){super(...arguments),this.frompc=!!this.$$appStore.h5QueryString.frompc,this.isFontWhite=!1,this.stateShowMode=$["c"]}beforeMount(){const t=Object(b["x"])(this.codeData,"codeCommonInfo.codeColorInfo.foreColor")||"";this.isFontWhite=Object(p["x"])(t,"#fff"),this.stateShowMode=Object(b["x"])(this.codeData,"state_show_mode",$["c"])}tip(t){const e=()=>{};t&&this.$refs.modal.showModal(e)}showTip(t,e){this.$emit("showTip",t,e)}goStatusLog({currentTarget:{dataset:{id:t}}}){if(this.$$appStore.h5QueryString.frompc&&t){const{url:e,codeData:i,isPaidUser:o}=this,a=Object(b["x"])(i,"qrcode_record.id"),s={qrocdeId:a,qrcodeRoute:e,stateId:t,isPaidUser:o};this.$$go("/pages/status-log-list/main",s)}}};Object(s["a"])([Object(r["c"])({default:"",type:String})],st.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],st.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],st.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:1})],st.prototype,"statusList",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],st.prototype,"hasBottomBorder",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],st.prototype,"currentFontSize",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],st.prototype,"headCmpInfo",void 0),st=Object(s["a"])([Object(r["a"])({components:{Modal:X["a"]}})],st);var rt=st,nt=rt,ct=(i("e724"),Object(k["a"])(nt,ot,at,!1,null,"957cf51e",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.tasksList.length?i("div",{class:"codeTasksWrapper "+(t.hasBottomBorder?"hasBottomBorder":"")+" "+(t.hasStatusList?"noTopMargin":"")+" "+(t.$$appStore.h5QueryString.frompc?"fromPc":""),style:{marginTop:t.$$u(t.headCmpInfo.task.gap.top),marginBottom:t.$$u(t.headCmpInfo.task.gap.bottom)}},[i("div",{staticClass:"title"},[t._v(" 最新计划完成情况 ")]),t._l(t.tasksList,(function(e,o){return i("div",{key:o,staticClass:"item"},[i("div",{staticClass:"taskItem"},[i("div",{class:"status status-"+(0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?t.$$getValue(e,"qrcode_task_record.excute_status"):"5")},[i("div",{staticClass:"status-bg"}),0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?[0===t.$$getValue(e,"qrcode_task_record.excute_status")||3===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-check statusIcon"}):t._e(),1===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-time-circle statusIcon"}):t._e(),4===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-cli-close-1 statusIcon"}):t._e(),2===t.$$getValue(e,"qrcode_task_record.excute_status")?i("i",{staticClass:"clifont anticon-warning-circle statusIcon"}):t._e(),i("div",{staticClass:"statusText"},[t._v(" "+t._s(t.getTaskExcuteNameByStatus(t.$$getValue(e,"qrcode_task_record.excute_status")))+" ")])]:[i("i",{staticClass:"clifont anticon-no-need-circle statusIcon"}),i("div",{staticClass:"statusText"},[t._v(" 无需执行 ")])]],2),i("div",{staticClass:"content"},[i("div",{staticClass:"nameBox"},[i("div",{staticClass:"name"},[i("span",[t._v(t._s(t.$$getValue(e,"task_record.name")))]),i("div",{staticClass:"times"},[t._v(" "+t._s(t.$$getValue(e,"task_record.repeat_text"))+" ")])])]),0===t.$$getValue(e,"qrcode_task_record.task_filter_status")?i("div",[1===t.$$getValue(e,"qrcode_task_record.excute_status")||2===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 请在 "),i("span",[t._v(t._s(t.$$getValue(e,"task_excute_record.excute_end_time")))]),t._v(" 前完成 ")])]):t._e(),4===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 应在 "),i("span",[t._v(t._s(t.$$getValue(e,"task_excute_record.excute_end_time")))]),t._v(" 前完成， 已超期 ")])]):t._e(),0===t.$$getValue(e,"qrcode_task_record.excute_status")||3===t.$$getValue(e,"qrcode_task_record.excute_status")?i("div",{staticClass:"content-box"},[i("div",[t._v(" "+t._s(t.$$getValue(e,"qrcode_task_record.opereater_name")||"未命名用户")+"在"+t._s(t.$$getValue(e,"qrcode_task_record.update_time"))+" "+t._s(t.$$getValue(e,"qrcode_task_record.operate_type")||"完成")+" "),t.$$getValue(e,"qrcode_task_record.from_target_result")?[t._v(" ，"),i("span",{staticClass:"nowrap"},[t._v("结果：")]),t._v(t._s(t.$$getValue(e,"qrcode_task_record.from_target_result"))+" ")]:t._e()],2)]):t._e()]):i("div",[t.$$getValue(e,"qrcode_task_record.state_filter_msg_text")?i("div",{staticClass:"content-box"},[i("div",[t._v(" 由于"+t._s(t.$$getValue(e,"qrcode_task_record.state_filter_msg_text"))+"，本周期无需执行 ")])]):t._e()])])])])}))],2):t._e()},ht=[];let pt=class extends r["d"]{formatMsg(){Object(p["j"])(this.tasksList,t=>{t.task_excute_record.excute_end_time=this.formatTime(t.task_excute_record.excute_end_time),t.qrcode_task_record.update_time=this.formatTime(t.qrcode_task_record.update_time);let e=Object(b["x"])(t,"qrcode_task_record.state_filter_msg","");if(e){e=JSON.parse(e);const i=[];Object(p["j"])(e,t=>{i.push(`${t.state_name}为${t.state_option_text}`)}),t.qrcode_task_record.state_filter_msg_text=i.join("、")}let i="";const o=t.task_record||{},a=["日","周","月","年"],s=a[o.repeat_unite-1];i=o.repeat_scope?`每${s}${o.repeat_scope.split(",").length}次`:`每${1===o.repeat_index?"":o.repeat_index}${s}1次`,t.task_record.repeat_text=i})}getTaskExcuteColorByStatus(t){return 0===t?"#20BF64":1===t?"#166BC7":2===t?"#F57C00":3===t||4===t?"#E64340":"#166BC7"}getTaskExcuteNameByStatus(t){return 0===t?"按期完成":1===t?"待完成":2===t?"即将超期":3===t?"超期完成":4===t?"超期未完成":"待完成"}formatTime(t){const e=new Date(1e3*t),i=this.formatNumber(e.getHours()),o=this.formatNumber(e.getMinutes()),a=864e5,s=new Date((new Date).toDateString()).getTime()+a,r=s-1e3*t;if(r>2*a&&r<3*a)return`前天 ${i}:${o}`;if(r>a&&r<2*a)return`昨天 ${i}:${o}`;if(r>0&&r<a)return`今天 ${i}:${o}`;if(r<0&&-r<a)return`明天 ${i}:${o}`;if(r<0&&-r>a&&-r<2*a)return`后天 ${i}:${o}`;const n=new Date,c=n.getFullYear(),l=c!==e.getFullYear();return`${l?e.getFullYear()+"年":""}${this.formatNumber(e.getMonth()+1)}月${this.formatNumber(e.getDate())}日 ${i}:${o}`}formatNumber(t){return t=t.toString(),t[1]?t:"0"+t}};Object(s["a"])([Object(r["c"])({default:"",type:String})],pt.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],pt.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],pt.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>[]})],pt.prototype,"tasksList",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],pt.prototype,"hasBottomBorder",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],pt.prototype,"hasStatusList",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],pt.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["e"])("tasksList")],pt.prototype,"formatMsg",null),pt=Object(s["a"])([r["a"]],pt);var ut=pt,gt=ut,mt=(i("da7e"),Object(k["a"])(gt,dt,ht,!1,null,"ed6bd2ea",null)),ft=mt.exports,_t=i("b347"),yt=i("6522"),bt=i("9f69"),vt=i("6231"),$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contact"},[i("div",{staticClass:"topView"},[t.title?i("div",{staticClass:"contactTitle",domProps:{textContent:t._s(t.title)}}):t._e(),t.note?i("div",{staticClass:"contactNote",domProps:{innerHTML:t._s(t.note.replace(/\n/g,"<br/>"))}}):t._e(),t._l(t.phonesArray,(function(e,o){return i("div",{key:o,staticClass:"contactItem",attrs:{"data-phone":e},on:{click:t.phoneCall}},[i("i",{staticClass:"clifont anticon-cli-phone"}),i("div",{staticClass:"content",domProps:{textContent:t._s(e)}}),i("div",{staticClass:"operation"},[t._v(" "+t._s(t.$$t("code.call"))+" ")])])})),t._l(t.mailsArray,(function(e,o){return i("div",{key:o,staticClass:"contactItem",attrs:{"data-data":e},on:{click:t.mailCopy}},[i("i",{staticClass:"clifont anticon-Contact"}),i("div",{staticClass:"content",domProps:{textContent:t._s(e)}}),i("div",{staticClass:"operation"},[t._v(" "+t._s(t.$$t("code.copy"))+" ")])])})),t.contactData.address.value?i("div",{class:["contactItem",t.hasLocateImg?" hasLocateImg":""],on:{click:t.openMap}},[i("i",{staticClass:"clifont anticon-cli-address-o"}),i("div",{staticClass:"content",domProps:{textContent:t._s(t.contactData.address.value)}}),t.contactData.latitude.value&&t.contactData.longitude.value?i("div",{staticClass:"operation"},[t._v(" 导航 ")]):t._e()]):t._e(),t.hasLocateImg?i("div",{staticClass:"locateMapCard",style:{backgroundImage:"url("+t.contactData.locate_image.value+")"},on:{click:t.openMap}}):t._e()],2)])},wt=[];let Ct=class extends r["d"]{beforeMount(){this.contactData=this.data.attribute_list[0]}phoneCall({currentTarget:{dataset:{phone:t}}}){this.isH5?window.location.href=this.$$makePhoneCall(t):this.$$makePhoneCall({phoneNumber:t})}mailCopy({currentTarget:{dataset:{data:t}}}){this.$$setClipboardData({data:t})}openMap(){if(Object(h["l"])("nomapjump"))return;const{contactData:t}=this;let e=this.$$getValue(t,"latitude.value",""),i=this.$$getValue(t,"longitude.value","");e=parseFloat(e),i=parseFloat(i),Number.isNaN(e)||Number.isNaN(i)||(this.isH5?this.$$openLocation(e,i):this.$$openLocation({latitude:e,longitude:i,name:this.contactData.address.value,scale:14}))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ct.prototype,"data",void 0),Ct=Object(s["a"])([Object(r["a"])({computed:{title(){const{contactData:t}=this,e=this.$$getValue(t,"title",{}),{id:i,value:o}=e;let a=o;return i||o||(a="联系我们"),a},note(){const{contactData:t}=this;return this.$$getValue(t,"work_time.value","")},color(){const t=this.$$appStore.codeInfo.codeColorInfo.themeColor,e=this.$$appStore.codeInfo.codeColorInfo.foreColor,{lowThemeColor:i}=this.$$appStore.codeInfo.codeColorInfo;return"#ffffff"===t||"#f4f4f4"===t?"#1AAD19":"#000000"===e?i:t},actionIconClass(){return{"font-size":""+(this.title?this.$$u(56):this.$$u(38)),right:this.$$u(-12),color:this.color}},phonesArray(){const{contactData:t}=this,e=this.$$getValue(t,"contact_phone.value",""),i=Object(p["R"])(e,{filterEmptyTels:!0});return i},mailsArray(){const{contactData:t}=this,e=this.$$getValue(t,"contact_mail.value",""),i=Object(p["R"])(e,{filterEmptyTels:!0});return i},isPhoneEmpty(){const{contactData:t}=this,e=this.$$getValue(t,"contact_phone.value","");return Object(p["B"])(e)},hasLocateImg(){const{contactData:t}=this;return t.address.value&&t.latitude.value&&t.longitude.value&&"1"===t.show_type.value&&t.locate_image.value}}})],Ct);var Ot=Ct,St=Ot,jt=(i("6485"),Object(k["a"])(St,$t,wt,!1,null,null,null)),It=jt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.title&&t.latitude&&t.longitude?i("div",["0"!=t.show_type&&t.locate_image?t._e():i("div",{staticClass:"textPreview",on:{click:t.openMap}},[i("i",{staticClass:"itemIcon clifont anticon-cli-address-o"}),i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")])]),"1"==t.show_type&&t.locate_image?i("div",{staticClass:"mapCard",on:{click:t.openMap}},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"address"},[t._v(" "+t._s(t.address)+" ")]),i("div",{staticClass:"mpCard_image",style:{backgroundImage:"url("+t.locate_image+")"}})]):t._e()]):t._e()},Tt=[];let kt=class extends r["d"]{constructor(){super(...arguments),this.addressData={}}created(){this.addressData=this.data.attribute_list[0]}openMap(){if(Object(h["l"])("nomapjump"))return;let t=this.$$getValue(this.addressData,"latitude.value"),e=this.$$getValue(this.addressData,"longitude.value");const i=this.$$getValue(this.addressData,"title.value");t=parseFloat(t),e=parseFloat(e),Number.isNaN(t)||Number.isNaN(e)||(this.isH5?this.$$openLocation(t,e):this.$$openLocation({latitude:t,longitude:e,name:i,scale:14}))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],kt.prototype,"data",void 0),kt=Object(s["a"])([Object(r["a"])({computed:{title(){const{addressData:t}=this;return this.$$getValue(t,"title.value","")},address(){const{addressData:t}=this;return this.$$getValue(t,"address.value","")},show_type(){const{addressData:t}=this;return this.$$getValue(t,"show_type.value","")},locate_image(){const{addressData:t}=this;return this.$$getValue(t,"locate_image.value","")},latitude(){const{addressData:t}=this;return this.$$getValue(t,"latitude.value","")},longitude(){const{addressData:t}=this;return this.$$getValue(t,"longitude.value","")}}})],kt);var Vt=kt,Mt=Vt,Pt=(i("d3cd"),Object(k["a"])(Mt,xt,Tt,!1,null,null,null)),Dt=Pt.exports,Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return!t.isSearching||t.summaryFilter.list_name?i("div",{class:("summary"===t.dataType||0!==t.displayStyleValue&&1!==t.displayStyleValue?"":"normalCode")+" "+("summary"===t.dataType?"summaryCode":"")+" "+("summary"===t.dataType&&"normal_new"===t.categoryType?"summaryNewCode":"")+" "+("summary"===t.dataType&&t.isCodeEmpty?"summaryCodeEmpty":"")},[t.isH5?i("div",{class:"summary"!==t.dataType?"listWrapNew":"normal"===t.categoryType?"listWarp":"normal_new"===t.categoryType?"listWarp listWarpNew":"listCardWrap"},t._l(t.stateData.attribute_list,(function(e,o){return i("div",{key:o,staticClass:"list"},["summary"===t.dataType&&"normal"===t.categoryType?i("div",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"imgBox"},["qrcode"!==t.$$getValue(e,"type.value")&&"template_child"!==t.$$getValue(e,"type.value")||e.first_image?t._e():i("div",{staticClass:"listImgBox"},[i("img",{staticClass:"list-code-icon-img",attrs:{src:"https://ncstatic.clewm.net/feres/00d11994_cf3e8930_1662464673.png"}})]),"qrcode"!==t.$$getValue(e,"type.value")&&"template_child"!==t.$$getValue(e,"type.value")||!e.first_image?t._e():i("img",{staticClass:"firstImg",attrs:{src:e.first_image}}),"batch_qrcode"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[t._v(" "+t._s(e.title.shortTitle)+" ")]):t._e(),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"cateOuterWrapper",style:t.$$getValue(e,"web_url.qrcode_arr.length",0)<=1?"justify-content: center;":""},[t.$$getValue(e,"web_url.qrcode_arr.length",0)>0?i("div",{staticClass:"cateOuterWrapper",style:t.$$getValue(e,"web_url.qrcode_arr.length",0)<=1?"justify-content: center;":""},t._l(e.web_url.qrcode_arr,(function(o,a){return i("div",{key:a,staticClass:"cateOuterIconWrapper",style:{display:a>=4?"none":"block",marginTop:a>=2?t.$$u(-16):t.$$u(-6)}},[e.first_image[a]?i("img",{staticClass:"cateIconImg",style:{width:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),height:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25)},attrs:{src:e.first_image[a]+"?x-oss-process=image/resize,w_100/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"cateIconWrapper",style:{width:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),height:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(34):t.$$u(25),fontSize:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(10):t.$$u(8),lineHeight:1===t.$$getValue(e,"web_url.qrcode_arr.length",0)?t.$$u(14):t.$$u(12)}},[i("img",{staticClass:"list-code-cata-icon-img",attrs:{src:"https://ncstatic.clewm.net/feres/00d11994_cf3e8930_1662464673.png"}})])])})),0):i("div",{staticClass:"emptyCategory"},[t._v("空目录")])]):t._e()]),i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"skipOmitTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])]),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"}):t._e()]):t._e(),"summary"===t.dataType&&"normal_new"===t.categoryType?i("div",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"imgBox"},["qrcode"===t.$$getValue(e,"type.value")||"template_child"===t.$$getValue(e,"type.value")||"batch_qrcode"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[i("img",{staticClass:"img",attrs:{src:"https://ncstatic.clewm.net/feres/6b2aef83_5be85271_1657777453.png"}})]):t._e(),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"listImgBox"},[i("img",{staticClass:"img",attrs:{src:"https://ncstatic.clewm.net/feres/6b2aef83_a717262f_1657777008.png"}})]):t._e()]),i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"skipOmitTitle"},[i("div",{staticClass:"cataTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"qrcodeCount"},[t._v(t._s(e.web_url.qrcode_count))])])]),"category"===t.$$getValue(e,"type.value")?i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"}):t._e()]):t._e(),"summary"!==t.dataType||"card"!==t.categoryType||"qrcode"!==e.type.value&&"template_child"!==e.type.value&&"batch_qrcode"!==e.type.value?t._e():i("div",{staticClass:"cardCodeWrapper",style:{width:t.$$u(t.cardCodeWidth)},on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[e.first_image?i("img",{staticClass:"headerImg",style:{width:t.$$u(t.cardCodeWidth),height:t.$$u(t.cardCodeWidth)},attrs:{src:e.first_image+"?x-oss-process=image/resize,w_400/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"headerDefaultImg",style:{width:t.$$u(t.cardCodeWidth),height:t.$$u(t.cardCodeWidth)}},[i("img",{staticClass:"card-code-icon-img",attrs:{src:"https://ncstatic.clewm.net/feres/00d11994_cf3e8930_1662464673.png"}})]),i("div",{staticClass:"cardCodeName"},[i("div",{staticClass:"cardOmitName"},[t._v(" "+t._s(e.title.value)+" ")])])]),"summary"===t.dataType&&"card"===t.categoryType&&"category"===e.type.value?i("div",{staticClass:"cardCategoryWrapper",on:{click:function(i){return t.redirectCode(e.web_url.value,e.type&&e.type.value)}}},[i("div",{staticClass:"cardInfoWrapper",style:0===e.web_url.qrcode_count?"padding: 8px 4px":""},[i("div",{staticClass:"categoryTitle"},[t._v(" "+t._s(e.title.value||"未命名目录")+" ")]),i("div",{staticClass:"qrcodeCount"},[t._v(" "+t._s(e.web_url.qrcode_count)+" ")]),i("div",{staticClass:"cardIcon weui-cell__ft clifont anticon-cli-angle-right"})]),t.$$getValue(e,"web_url.qrcode_arr.length",0)>0?i("div",{staticClass:"cardImgWrapper"},t._l(e.web_url.qrcode_arr,(function(o,a){return i("div",{key:a,staticClass:"cardAllImgWrapper"},[e.first_image[a]?i("img",{staticClass:"cardIconImg",style:{width:t.$$u(t.cardImgWidth),height:t.$$u(t.cardImgWidth)},attrs:{src:e.first_image[a]+"?x-oss-process=image/resize,w_100/quality,Q_100/interlace,1/auto-orient,1"}}):i("div",{staticClass:"cardIconImgWrapper",style:{width:t.$$u(t.cardImgWidth),height:t.$$u(t.cardImgWidth)}},[i("img",{staticClass:"card-code-cata-icon-img",attrs:{src:"https://ncstatic.clewm.net/feres/00d11994_cf3e8930_1662464673.png"}})])])})),0):t._e()]):t._e(),"summary"!==t.dataType?i("div",{class:(o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom")+" skipLinkStyle"+t.displayStyleValue,on:{click:function(i){return t.redirectCode(e.web_url.value,e.target_type&&e.target_type.value)}}},[0===t.displayStyleValue||1===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[1===t.displayStyleValue?i("span",{staticClass:"img1"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]):t._e(),i("span",{staticClass:"text"},[t._v(t._s(e.title.value||"未命名链接"))])]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):t._e(),2===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("span",{staticClass:"img2"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]),i("div",{staticClass:"arrowWarp",style:e.title.value?"":"background: none"},[i("span",{staticClass:"text"},[t._v(t._s(e.title.value||""))]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})])])]):t._e(),3===t.displayStyleValue||4===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"arrowWarp",style:"color: #"+(3===t.displayStyleValue?e.font_color.value:e.theme_color.value)+";background-color: #"+(3===t.displayStyleValue?e.theme_color.value:"fff")+"; border-color: #"+(3===t.displayStyleValue?"":e.theme_color.value)},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])])]):t._e(),e.target_type&&"10"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"},on:{click:function(i){return t.otherMinaClick(e.web_url.value,e.target_type&&e.target_type.value)}}},[t.getMinaInfo(e.web_url.value,"gh_id")?i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"ToOtherMina",username:t.getMinaInfo(e.web_url.value,"gh_id")||"",path:t.getMinaInfo(e.web_url.value,"path")||""}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.getMinaInfo(e.web_url.value,"gh_id"))+"</div> ")])]):t._e()],1):t._e(),e.target_type&&"7"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"goFormListPage",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url+"&fromH5ListTplId="+e.id}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e(),e.target_type&&"8"===e.target_type.value&&t.isEnableToMina?i("div",{staticClass:"launch-placeholder",staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%","z-index":"1"}},[i("wx-open-launch-weapp",{staticClass:"launch-btn",style:"display:block;width:"+t.$$u(240)+";height:100%;margin: 0 auto;",attrs:{"data-type":"goFormListPage",username:t.originalId,path:"/pages/code/code.html?q="+t.$$appStore.h5QueryString.url+"&fromH5RecordCheck=1"}},[i("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <style>.btn {display: block; width: 100%; height: 100px; background: #000; color: #fff; visibility:hidden }</style> <div class="btn">打开小程序'+t._s(t.originalId)+"</div> ")])])],1):t._e()]):t._e()])})),0):t._e(),t.isWechat?i("div",{staticClass:"listWarp"},t._l(t.stateData.attribute_list,(function(e,o){return i("div",{key:o,staticClass:"list"},["category"===t.dataType?i("navigator",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",attrs:{"open-type":"navigate","hover-class":"none",url:e.web_url.value?"/pages/view-code/main?url="+e.web_url.value:""}},[i("div",{staticClass:"imgBox"},["qrcode"!==t.getCodeTypeByUrl(e.web_url.value)||e.first_image?t._e():i("div",[i("img",{staticClass:"img",attrs:{src:"https://ncstatic.clewm.net/feres/6b2aef83_5be85271_1657777453.png"}})]),"qrcode"===t.getCodeTypeByUrl(e.web_url.value)&&e.first_image?i("img",{staticClass:"firstImg",attrs:{src:e.first_image}}):t._e(),"batch"===t.getCodeTypeByUrl(e.web_url.value)?i("i",{staticClass:"clifont anticon-cli-batchicon"}):t._e(),"category "===t.getCodeTypeByUrl(e.web_url.value)?i("img",{staticClass:"catalogIcon",attrs:{src:t.catalogIcon,alt:""}}):t._e()]),i("div",{staticClass:"skipTitle"},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):i("navigator",{class:o===t.stateData.attribute_list.length-1?"skipLink":"skipLinkBottom",attrs:{"open-type":"navigate","hover-class":"none",url:e.web_url.value?"/pages/view-code/main?url="+e.web_url.value:""}},[0===t.displayStyleValue||1===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[1===t.displayStyleValue?i("span",{staticClass:"img1"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]):t._e(),t._v(" "+t._s(e.title.value||"未命名链接")+" ")]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})]):t._e(),2===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("span",{staticClass:"img2"},[e.pic_value.value?i("img",{staticClass:"imgBg",attrs:{src:e.pic_value.value,mode:"aspectFill"}}):i("span",{staticClass:"theme",style:"background-color: #"+(e.theme_color.value||"f6f8f9")},[i("icon",{staticClass:"clifont anticon-cli-link",style:"color: #"+(e.font_color.value||"999")})],1)]),i("div",{staticClass:"arrowWarp"},[i("span",[t._v(t._s(e.title.value||"未命名链接"))]),i("div",{staticClass:"skipIcon clifont anticon-cli-angle-right"})])])]):t._e(),3===t.displayStyleValue||4===t.displayStyleValue?i("div",{staticClass:"itemWarp"},[i("div",{staticClass:"skipTitle"},[i("div",{staticClass:"arrowWarp",style:"color: #"+(3===t.displayStyleValue?e.font_color.value:e.theme_color.value)+";background-color: #"+(3===t.displayStyleValue?e.theme_color.value:"fff")+"; border-color: #"+(3===t.displayStyleValue?"":e.theme_color.value)},[t._v(" "+t._s(e.title.value||"未命名链接")+" ")])])]):t._e()])],1)})),0):t._e(),"summary"===t.dataType&&t.$$getValue(t.stateData,"page_msg.lasted_page")-t.$$getValue(t.stateData,"page_msg.current_page")>0&&t.$$getValue(t.stateData,"page_msg.current_page")-t.summaryCodeCurPage===0?i("div",{staticClass:"goNextPage",on:{click:t.goNextPage}},[t.nextPageLoading&&t.restCount?i("img",{staticClass:"loadingIcon",attrs:{src:t.loadingIcon}}):t._e(),i("span",[t._v(" "+t._s(t.nextPageLoading?"正在加载中...":"剩下"+t.restCount+"个，点击加载更多")+" ")])]):t._e(),"summary"===t.dataType&&t.isCodeEmpty?i("div",{staticClass:"summaryCodeEmptyMsg"},[t.summaryFilter.list_name?i("div",{staticClass:"noSearchCode"},[t._v(" 暂无搜索结果 ")]):[i("img",{staticClass:"summaryCodeEmptyIcon",attrs:{src:t.summaryCodeEmptyIcon,alt:""}}),i("span",[t._v("该目录下暂无内容")])]],2):t._e()]):t._e()},qt=[],Rt=i("a7a1");let Ft=class extends r["d"]{constructor(){super(...arguments),this.logMsg={last_desc:{},data_list:[]},this.stateData={},this.catalogIcon=Rt["m"]+"/images/mina-cli/file-box@3x.png",this.loadingIcon=Rt["m"]+"/images/loading_new.gif",this.summaryCodeEmptyIcon=Rt["m"]+"/images/mina-cli/mina_no_summary_code@2x.png",this.nextPageLoading=!1,this.isEnableToMina=!1,this.cardImgWidth=0,this.cardCodeWidth=0}asyncRenderCompManual(t){return t}dataChange(){if(this.data.attribute_list=Object(b["m"])(this.data.attribute_list),this.displayStyleValue=+this.$$getValue(this.data,"attribute_list.0.display_style.value","0"),this.stateData=this.data,this.getCategoryUrl()){const t=Object(b["d"])(this.data.attribute_list);Object(p["j"])(t,t=>{if(this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.getFirstImg(this.data),this.data.attribute_list=t}this.$forceUpdate()}getMinaInfo(t,e){return t||this.$emit("showTip","errorLink"),"gh_id"===e?t.split("|")[1]:"path"===e?Object(p["s"])(t.split("|")[2]):t.split("|")[0]}mounted(){if(this.cardImgWidth=Math.floor(60.6),this.cardCodeWidth=Math.floor(167.5),this.data.attribute_list=Object(b["m"])(this.data.attribute_list),this.displayStyleValue=+this.$$getValue(this.data,"attribute_list.0.display_style.value","0"),this.getCategoryUrl()){const t=Object(b["d"])(this.data.attribute_list);Object(p["j"])(t,t=>{if(this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.data.attribute_list=t,this.getFirstImg(this.data)}this.updateDataAndPageMsg(this.data),this.isEnableToMina=Object(h["q"])()}getCategoryUrl(){const{href:t}=window.location;return t.indexOf("%2Fsy%2F")>-1}getShortTitle(t){t=t||"未命名链接";const e=t.match(/[\d]|[a-zA-Z]|[\u4e00-\u9fa5]+/g)||[],i=/[\u4e00-\u9fa5]/,o=e.join("");let a;return a=i.test(e[0])?o.substring(0,2):o.substring(0,1),a}getCodeTypeByUrl(t){return Object(b["n"])(t)}otherMinaClick(t){const e=this.getMinaInfo(t,"gh_id")||"";e||this.$$toast("小程序跳转失败，请联系二维码制作者设置小程序原始ID",5e3,!1,"65%")}redirectClickLog(t,e){if(!t)return;if(!e&&0!==e)return;let i=this.$$getValue(this.codeData,"qrcode_record.id","");i=""+i;const o=this.$$getValue(this.codeData,"qrcode_record.coding","");if(0===e)n["a"].logClick(151,124e3,"活码",{qrCodeId:i,coding:o});else if(1===e)n["a"].logClick(151,124001,"模板",{qrCodeId:i,coding:o});else if(2===e)n["a"].logClick(151,124002,"批次",{qrCodeId:i,coding:o});else if(3===e)n["a"].logClick(151,124003,"子码",{qrCodeId:i,coding:o});else if(4===e)n["a"].logClick(151,124004,"目录汇总",{qrCodeId:i,coding:o});else if(5===e)n["a"].logClick(151,124005,"旧版活码",{qrCodeId:i,coding:o});else if(6===e)n["a"].logClick(151,124006,"网址",{qrCodeId:i,coding:o});else if(7===e)n["a"].logClick(151,124007,"表单",{qrCodeId:i,coding:o,recordId:t});else if(8===e)n["a"].logClick(151,124008,"记录汇总",{qrCodeId:i,coding:o});else if(10===e){const e=t,a=e.split("|");n["a"].logClick(151,124010,"其他小程序",{qrCodeId:i,coding:o,appid:a[0],ghid:a[1],path:a[2]})}}redirectCode(t,e){if(!t)return;if(this.isEnableToMina&&(7===+e||8===+e||10===+e))return;this.redirectClickLog(t,+e);const i=this.$$getValue(this.$$appStore,"h5QueryString.frompc",0),o=100,a=i?{frompc:1,msg:1,noimgprev:1,nomapjump:1,nocompjump:1,noScanCount:1,noscroll:1,_time:Date.now(),bodypb:8,bodypt:o,noRecordList:1}:{};if("summary"===this.dataType&&"batch_qrcode"===e||1===+e)window.location.href="/recent-batch-code?qrcode_route="+t;else if(6===+e||5===+e)this.isH5?window.open(t):this.openUrl(t);else if(7===+e)this.gotoRecord(t);else if(8===+e)this.goHistory();else if(2===+e){const e=t.split("|");window.location.href=`/recent-batch-code?qrcode_route=${e[3]}&batch_id=${e[1]}&batchIdx=${e[4]}`}else if(10===+e)this.$emit("showTip","otherMinaNotWx");else{let e=`/?url=${t}&${Object(b["c"])(a)}`;t.indexOf("/sy")>-1&&(e=`/?url=${t}&${Object(b["c"])(a)}&categoryType=${this.categoryType}&fromRedirect=true`),window.location.href=e}}async openUrl(t){if(this.isH5)return;const e=this.$$getValue(t.split("://"),"1");if(e){const i=new RegExp("^qr[0-9][0-9].cn/[ABCDEF].{5}$").test(e),o=new RegExp("^qr[0-9][0-9].cn/[HIJ].{5}$").test(e);if(i){const e=await n["b"].getQrcodeTypeUrl(t);if(!e)return void this.showModal(t);const{data:i,status:o}=e;if(!i||0===o)return void this.showModal(t);if(this.$$getValue(i,"url"))if("jump"===this.$$getValue(i,"type"))this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(this.$$getValue(i,"url")));else{const e=t.substring(t.length-6,t.length);e&&(t="https://c3.cli.im/"+e,this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(t)))}else this.showModal(t)}else if(o){const e=t.substring(t.length-6,t.length);e&&(t="https://c3.cli.im/"+e,this.$$go("/webview/pages/webview/webview?q="+encodeURIComponent(t)))}else this.showModal(t)}}showModal(t){this.$$showModal({title:"这是一个外部链接",content:"小程序暂不支持打开外部链接，复制链接后在浏览器中粘贴查看",confirmText:"复制链接",confirmColor:"#586C94",success({confirm:e}){e&&wx.setClipboardData({data:t})}})}gotoRecord(t){const{log_msg:e}=this.codeData,i=this.$$getValue(e,"data_list",[]);let o={};Object(p["j"])(i,e=>{e.tpl_id===+t&&(o=e)}),this.$$appStore.h5QueryString.frompc?o.id?this.$$go("/pages/record-form/main",{org_id:o.org_id,tpl_id:o.tpl_id,token:encodeURIComponent(JSON.stringify(o.record_tpl_token||{}))}):this.$$go("/pages/record-form/main",{noTpl:!0}):this.showTip()}goHistory(){this.$$appStore.h5QueryString.frompc?this.$$go("/pages/record-history/main",{isPaidUser:this.isPaidUser}):this.showTip()}showTip(){this.$emit("showTip")}async goNextPage(){const{position:t}=this.$$appStore,e=this.$$getValue(this.data,"page_msg",{});if(this.$$getValue(e,"lasted_page")-this.$$getValue(e,"current_page")>0){this.nextPageLoading=!0;const i=await n["c"].getSyCodeInfo({url:this.url,lastedId:this.$$getValue(e,"lasted_id"),pageSize:this.$$getValue(e,"list_size"),page:+this.$$getValue(e,"current_page",0)+1,listType:this.$$getValue(e,"list_type"),psw:this.pwd,pos:t,...this.summaryFilter}),o=this.$$getValue(i,"qrcode_compontent.0.page_msg",{});this.nextPageLoading=!1;const a=Object(b["d"])(this.stateData);a.attribute_list=a.attribute_list.concat(this.$$getValue(i,"qrcode_compontent.0.attribute_list",[])),a.page_msg=o,this.stateData=a,this.summaryCodeCurPage=o.current_page,this.data.page_msg=o;const s=Object(b["d"])(this.stateData);Object(p["j"])(s.attribute_list,t=>{if(t.web_url.qrcode_arr=new Array(1),this.$$getValue(t,"web_url.attribute_id")){const e=this.$$getValue(t,"web_url.qrcode_count",0)>5?5:this.$$getValue(t,"web_url.qrcode_count",0);t.web_url.qrcode_arr=new Array(e)}const e=this.getShortTitle(this.$$getValue(t,"title.value","未命名链接"));t.title&&(t.title.shortTitle=e)}),this.data.attribute_list=s,this.displayStyleValue=+this.$$getValue(this.stateData,"attribute_list.0.display_style.value","0"),this.updateDataAndPageMsg(this.stateData),this.getFirstImg(this.stateData)}}async getFirstImg(t){const e=[],i=[],o=this.$$getValue(t,"attribute_list",[]);if(Object(p["j"])(o,t=>{Object(p["x"])(["category"],this.$$getValue(t,"type.value"))&&void 0===t.first_image&&i.push(this.$$getValue(t,"web_url.category_id","")),Object(p["x"])(["qrcode","template_child"],this.$$getValue(t,"type.value"))&&void 0===t.first_image&&e.push(this.$$getValue(t,"web_url.value",""))}),e.length>0||i.length>0){const o=await n["c"].getSyCodImgAll({web_urls:e.join(","),category_ids:i.join(","),org_id:this.$$getValue(this.orgValidParams,"org_id"),org_time:this.$$getValue(this.orgValidParams,"org_time"),org_publickey:this.$$getValue(this.orgValidParams,"org_publickey")});1===o.code&&Object(p["j"])(o.data,e=>{Object(p["j"])(t.attribute_list,t=>{if(this.$$getValue(t,"web_url.value","")===e.web_url)return t.first_image=e.header_first_image||e.body_first_image,!1;if(+this.$$getValue(t,"web_url.category_id","")===+e.category_ids){const i=this.getShortTitle(this.$$getValue(e,"list_name","未命名链接"));return this.$$getValue(t,"first_image.length",0)>0?(Object(p["z"])(t.shortTitle)&&t.shortTitle.push(i),Object(p["z"])(t.first_image)&&t.first_image.push(e.header_first_image||e.body_first_image)):(t.shortTitle=[i],t.first_image=[e.header_first_image||e.body_first_image]),!1}return!0})})}this.stateData=Object(b["d"])(t)}updateDataAndPageMsg(t){t&&Object(b["J"])(t)&&(this.stateData=Object(b["d"])(t),this.displayStyleValue=+this.$$getValue(this.stateData,"attribute_list.0.display_style.value","0"),this.$forceUpdate())}get restCount(){const t=this.$$getValue(this.data,"page_msg");let e=+t.record_total-+t.current_page*+t.list_size;return e>=0||(e=0),e}get isCodeEmpty(){const t=this.$$getValue(this.data,"page_msg.lasted_page",0);return 0===+this.$$getValue(this.data,"attribute_list.length",0)&&0===+t}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ft.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],Ft.prototype,"originalId",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"qrcode"})],Ft.prototype,"dataType",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"pwd",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ft.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:()=>1})],Ft.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],Ft.prototype,"summaryCodeCurPage",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{}})],Ft.prototype,"summaryFilter",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:{}})],Ft.prototype,"orgValidParams",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Ft.prototype,"categoryType",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Ft.prototype,"isSearching",void 0),Object(s["a"])([Object(r["b"])("asyncRenderCompManual")],Ft.prototype,"asyncRenderCompManual",null),Object(s["a"])([Object(r["e"])("data")],Ft.prototype,"dataChange",null),Ft=Object(s["a"])([r["a"]],Ft);var Et=Ft,Ht=Et,zt=(i("2d38"),Object(k["a"])(Ht,Lt,qt,!1,null,null,null)),Bt=zt.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"normal_new"!==t.categoryType||t.isSearch?"wrapper":"summaryNewCode wrapper"},[t.isSearch?i("div",{staticClass:"search-form"},[i("i",{staticClass:"searchIcon clifont anticon-cli-search"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.search},on:{blur:t._confirmSearch,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.search?i("div",{staticClass:"closeIcon",on:{click:t._clearSearch}},[i("i",{staticClass:"clifont anticon-cli-close"})]):t._e()]):t._e(),t.isSearch?t._e():i("div",{staticClass:"title"},[i("div",{staticClass:"title-text"},[t._v(" "+t._s(t.title)+" ")])]),"normal_new"!==t.categoryType||t.isSearch?i("block",[i("div",{staticClass:"old-action-wrap"},[t.isSearch?t._e():i("i",{staticClass:"sortIcon clifont anticon-cli-search",on:{click:t._openSearch}}),t.isSearch?t._e():i("i",{staticClass:"sortIcon clifont anticon-paixu2",on:{click:t._sortAction}}),t.isSearch?t._e():i("div",{staticClass:"splitLine"}),t.isSearch||"normal"!==t.categoryType?t._e():i("i",{staticClass:"sortIcon clifont anticon-liebiaozhanshi",on:{click:t._viewTypeAction}}),t.isSearch||"card"!==t.categoryType?t._e():i("i",{staticClass:"normal-card-icon-new clifont anticon-kapianzhanshi",on:{click:t._viewTypeAction}})])]):i("block",[i("div",{staticClass:"qrcode-count"},[t._v("共"+t._s(t.qrcodeCount)+"个码")]),i("div",{staticClass:"search-wrap",on:{click:t._openSearch}},[t.isSearch?t._e():i("i",{staticClass:"clifont anticon-cli-search",on:{click:t._openSearch}}),t._v(" 搜索 ")]),i("div",{staticClass:"action-wrapper"},[i("div",{staticClass:"sort-action",on:{click:t._sortAction}},[i("i",{staticClass:"clifont anticon-paixu2"}),i("div",{staticClass:"text"},[t._v(t._s(t.currentSortItem.name||"排序"))]),i("div",[i("i",{staticClass:"clifont anticon-cli-angle-down"})])]),i("i",{staticClass:"normal-icon-new clifont anticon-putongmulu",on:{click:t._viewTypeAction}})])]),t.isSearch?i("div",{staticClass:"cancelTips",on:{click:t._cancelSearch}},[t._v("取消")]):t._e(),i("bottom-modal",{ref:"bottomModal"},[i("div",{staticClass:"moreActionWrapper",attrs:{slot:"content"},slot:"content"},t._l(t.sortData,(function(e){return i("div",{key:e.id,class:"item "+(e.id===t.sort?"active":""),on:{click:function(i){return t._selectSort(e.id)}}},[i("span",[t._v(t._s(e.name))]),i("i",{staticClass:"confirmIcon clifont anticon-duoxuan"})])})),0)]),i("bottom-modal",{ref:"typeBottomModal"},[i("div",{staticClass:"moreActionWrapper",attrs:{slot:"content"},slot:"content"},t._l(t.viewType,(function(e){return i("div",{key:e.id,class:"item "+(e.type===t.categoryType?"active":""),on:{click:function(i){return t._selectType(e.type)}}},[i("span",[t._v(t._s(e.name))]),i("i",{staticClass:"confirmIcon clifont anticon-duoxuan"})])})),0)])],1)},Nt=[],At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popup"},[i("transition",{attrs:{name:"fade"}},[t.show?i("div",{staticClass:"mask",on:{click:t.close}}):t._e()]),i("transition",{attrs:{name:"slide"}},[t.show?i("div",{staticClass:"bottom-modal"},[t._t("content")],2):t._e()])],1)},Ut=[];let Qt=class extends r["d"]{constructor(){super(...arguments),this.show=!1}showModal(){this.show||(this.show=!0,this.$emit("open"))}close(){this.show&&(this.show=!1,this.$emit("close"))}shadeClicked(){this.close()}};Object(s["a"])([Object(r["c"])({type:Boolean,default:!0})],Qt.prototype,"showMask",void 0),Qt=Object(s["a"])([r["a"]],Qt);var Gt=Qt,Jt=Gt,Yt=(i("4962"),Object(k["a"])(Jt,At,Ut,!1,null,"d3e5a23c",null)),Xt=Yt.exports;let Kt=class extends r["d"]{constructor(){super(...arguments),this.sortData=[{id:0,name:"创建时间降序"},{id:1,name:"更新时间降序"},{id:2,name:"名称（A～Z）"},{id:3,name:"名称（Z～A）"}],this.viewType=[{id:2,name:"普通目录",type:"normal_new"},{id:0,name:"带图列表",type:"normal"},{id:1,name:"大图列表",type:"card"}],this.search="",this.isSearch=!1,this.currentSortItem=this.sortData[0]}mounted(){this.currentSortItem=this.sortData[this.sort]}_clearSearch(){this.search="",this._confirmSearch()}_openSearch(){this.isSearch=!0,this.$emit("setIsSearching",!0)}_cancelSearch(){this.isSearch=!1,this.search="",this._confirmSearch(),this.$emit("setIsSearching",!1)}_confirmSearch(){this.$emit("search",{value:this.search})}_sortAction(){this.$refs.bottomModal.showModal()}_viewTypeAction(){this.$refs.typeBottomModal.showModal()}_selectSort(t){this.$refs.bottomModal.close();let e={};this.sortData.forEach(i=>{i.id===Number(t)&&(e=i)}),this.currentSortItem=e,this.$emit("sort",{id:t})}_selectType(t){this.$refs.typeBottomModal.close(),this.categoryType=t,this.$emit("changeCategoryType",t)}_chooseCategoryCard(){this.categoryType="card",this.$emit("changeCategoryType","card")}_chooseCategoryNormal(){this.categoryType="normal",this.$emit("changeCategoryType","normal")}_chooseCategoryOriginNormal(){this.categoryType="normal_new",this.$emit("changeCategoryType","normal_new")}};Object(s["a"])([Object(r["c"])({type:Number,default:0})],Kt.prototype,"sort",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],Kt.prototype,"qrcodeCount",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],Kt.prototype,"title",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"normal"})],Kt.prototype,"categoryType",void 0),Kt=Object(s["a"])([Object(r["a"])({components:{BottomModal:Xt}})],Kt);var Zt=Kt,te=Zt,ee=(i("e192"),Object(k["a"])(te,Wt,Nt,!1,null,"8e79336e",null)),ie=ee.exports,oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.templateComponentId?i("div",{staticClass:"placeholderWrapper",attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-file placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):i("div",{staticClass:"fileWrapper"},[t.emptyFile?t._e():i("div",[t.title?i("div",{staticClass:"title"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.title)+" ")]):t._e(),i("div",{staticClass:"fileList"},t._l(t.fileList,(function(e,o){return i("FileItem",{key:o,attrs:{fileObj:e,index:o},on:{handleClickFileItem:t.openFile}})})),1),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.slideImage}}):t._e()],1),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])])},ae=[],se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fileContent",on:{click:function(e){return t.handelClickFile(t.fileObj)}}},[i("div",{staticClass:"fileType",style:"background-image:url('"+t.fileIconPath+"');"}),i("div",{staticClass:"descContent"},[i("div",{staticClass:"fileName"},[t._v(" "+t._s(t.fileMajorName)),i("span",{staticClass:"nowrap"},[t._v(t._s(t.extension))])]),i("div",{staticClass:"fileSize"},[t._v(" "+t._s(t.$$getValue(t.fileObj,"file_size.value",""))+" ")])])])},re=[];let ne=class extends r["d"]{constructor(){super(...arguments),this.fileMajorName="",this.extension="",this.fileIconPath="",this.fileCanPreview=!1}handleClickFileItem(t,e){return{fileObj:t,action:e}}beforeMount(){this.getFileData()}beforeUpdate(){this.getFileData()}getFileData(){const t=this.$$getValue(this.fileObj,"file_name.value",""),e=t.split(".").slice(-1),i="."+e,o=t.slice(0,t.lastIndexOf("."));this.extension=i,this.fileMajorName=o;const a=this.$$getValue(e,"0");this.fileCanPreview=Object(p["x"])(Rt["a"],a),this.fileIconPath=Object(p["m"])(a)}handelClickFile(t){this.fileCanPreview?this.handleClickFileItem(t):this.checkCanDownload(t)?this.handleClickFileItem(t,"download"):this.$$toast(this.$$t("code.downloadFile.cannotDownload"),2e3,!1,"65%")}getType(t){const e=this.$$getValue(t,"file_url.value","").split(".");return e[this.$$getValue(e,"length",1)-1]||""}checkCanDownload(t){return"1"===this.$$getValue(t,"can_download.value","1")}isiOS(){const t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}iOSversion(){const t=navigator.userAgent,e=t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".");return parseInt(e,10)}isWeixinOrQQ(){const t=navigator.userAgent;return t.match(/MicroMessenger\/[0-9]/i)||t.match(/QQ\/[0-9]/i)}ios13WeixinGuide(t){const e=document.getElementsByTagName("html")[0].getAttribute("ver"),i=Rt["m"]+"/view-doc/download.html";window.open(`${i}?file=${t}&ver=${e}`)}download(){if(this.isH5){const t=this.$$getValue(this.fileObj,"file_name.value",""),e=this.$$getValue(this.fileObj,"file_url.value"),i=this.$$getValue(t.split(".").slice(-1),"0","").toLocaleLowerCase();if(Object(p["x"])(Rt["e"],i))return void this.handleClickFileItem(this.fileObj);if(!this.isiOS())return this.isWeixinOrQQ()?void this.ios13WeixinGuide(e):void window.open(e);if(this.iOSversion()<13||this.isWeixinOrQQ())return void this.ios13WeixinGuide(e);window.open(e)}else this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){this.$$setClipboardData({data:this.$$getValue(this.fileObj,"file_url.value")})}})}};Object(s["a"])([Object(r["c"])({type:Object})],ne.prototype,"fileObj",void 0),Object(s["a"])([Object(r["c"])({type:Number})],ne.prototype,"index",void 0),Object(s["a"])([Object(r["b"])("handleClickFileItem")],ne.prototype,"handleClickFileItem",null),ne=Object(s["a"])([r["a"]],ne);var ce=ne,le=ce,de=(i("2287"),Object(k["a"])(le,se,re,!1,null,"1700c0b5",null)),he=de.exports,pe=i("6f26");let ue=class extends r["d"]{constructor(){super(...arguments),this.emptyFile=!1,this.fileList=[],this.title="",this.slideImage=[],this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0}created(){this.title=this.$$getValue(this.data,"attribute_list.0.title.value",""),this.fileList=this.$$getValue(this.data,"attribute_list")}beforeMount(){const{id:t,title:e,fieldId:i}=Object(p["q"])(this.data);this.templateComponentId=t,this.templateComponentTitle=e,this.fieldId=i}mounted(){this.fileList=this.fileList.filter(t=>!!this.$$getValue(t,"file_url.value","")),this.data.attribute_list=this.data.attribute_list.filter(t=>!!this.$$getValue(t,"file_url.value","")),this.$$getValue(this.data,"attribute_list.0.file_url.value",!1)||(this.emptyFile=!0)}openFile({fileObj:t,action:e}){if(this.isH5){const i=this.$$getValue(t,"file_name.value",""),o=this.$$getValue(t,"can_download.value",0),a=this.$$getValue(i.split(".").slice(-1),"0","").toLocaleLowerCase(),s=this.$$getValue(t,"file_url.value","");if(Object(p["x"])(Rt["e"],a))return this.slideImage=[s],void this.$refs.preview.openPreview(parseInt("0",10));const r=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),n=this.$$getValue(this.$$appStore,"oid");this.$$openDocument({filePath:s,fileName:i,canDownload:o,coding:r,openId:n,action:e})}else this.$$downloadFile({url:this.$$getValue(t,"file_url.value","")}).then(t=>{this.$$openDocument({filePath:t.tempFilePath}).then()})}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ue.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],ue.prototype,"currentFontSize",void 0),ue=Object(s["a"])([Object(r["a"])({components:{FileItem:he,Preview:pe["a"]}})],ue);var ge=ue,me=ge,fe=(i("0ea3"),Object(k["a"])(me,oe,ae,!1,null,"0f411f82",null)),_e=fe.exports,ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.templateComponentId?i("div",{staticClass:"placeholderWrapper",style:t.$$setStyle({common:{width:t.$$getValue(t.imageStyleObjects,"0.width"),paddingTop:"3"===t.imgStyle?t.$$u(50):null}}),attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-image placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):i("div",{class:"imageWrapper "+(t.isHeadImg?"isHeadImg":"")},[0===t.imageShowType?i("swiper",{attrs:{imageArr:t.imageUrls,imagePreviewUrls:t.imagePreviewUrls,cusStyle:t.$$setStyle({common:{height:t.swiperHeight,backgroundColor:t.swiperBgColor}}),haveSpaceBetween:"1"===t.imgStyle,imageStyleObject:t.imageStyleObjects[0],isHeadImg:t.isHeadImg,codeColorInfo:t.codeColorInfo,imageStyle:t.imageStyle,autoplay:t.autoplay,interval:t.interval,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,imageSizes:t.imageSizes},on:{previewImage:t.previewImage}}):i("div",{staticClass:"imgList"},t._l(t.imageUrls,(function(e,o){return i("div",{key:o,attrs:{"data-preview-url":t.imagePreviewUrls[o],"data-preview-index":o},on:{click:t.previewImage,touchstart:t.keepPress,touchend:t.keepPressEnd,touchcancel:t.keepPressEnd}},[i("image-dif",{attrs:{src:e,cusStyle:t.$$setStyle({common:Object.assign({},t.imageStyleObjects[o],{margin:"0 auto"})}),imageSize:t.imageSizes[o],"data-preview-url":t.imagePreviewUrls[o],previewType:!0,"data-preview-index":o}})],1)})),0),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.allImgs}}):t._e(),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])],1)},be=[],ve=i("d885"),$e=i("af0c");class we{constructor(t){this.imageData=[],this.imageUrl=[],this.imageShowType=0,this.imageSizes=[],this.imageData=t,this.decode()}decode(){this.imageUrl=this.slideImageEX(),this.imageShowType=this.getShowType(),this.imageSizes=this.getImageSizes()}getShowType(){return this.imageData.length>1&&0===parseInt(this.imageData[0].prew_type.value,10)?0:1}slideImageEX(){const t=[];return this.imageData.forEach(e=>{t.push(e.image_url.value)}),t}getImageSizes(){const t=[];return this.imageData.forEach(e=>{t.push({width:parseInt(e.image_width.value,10),height:parseInt(e.image_height.value,10)})}),t}}var Ce=we,Oe=i("77ed");const Se={};let je=class extends r["d"]{constructor(){super(...arguments),this.slideImage=[],this.imageShowType=0,this.imgStyle="1",this.imageStyleObjects=[],this.swiperHeight="300px",this.imageSizes=[],this.imageStyle=y["b"].IMAGE_STYLE_1,this.autoplay=!1,this.interval=0,this.imagePreviewUrls=[],this.imageUrls=[],this.pressTime=0,this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0}getValidImgs(){const{data:t}=this;return Object(p["g"])(this.$$getValue(t,"attribute_list",[]),t=>!!this.$$getValue(t,"image_url.value",""))}getImageModuleInfo(t,e){const i=Object(p["c"])(this.getValidImgs()),o=this.$$getValue(i,"0.prew_type.value","1");if(t&&e&&i.length){const o=i[0],a=this.$$getValue(o,"image_width",{}),s=this.$$getValue(o,"image_height",{});a.value=t,s.value=e}const{pixelRatio:a,windowWidth:s}=this.$$getSystemInfo();if(this.templateComponentId&&i.length){const t=i[0],e=this.$$getValue(t,"image_width",{});e.value=750}const r=new v["a"]({data:{attribute_list:i},project:y["e"].MPCLI,dpr:a,windowWidth:s,imageStyle1Margin:0!==Number(o)&&this.isHeadImg?10:16});let n="0";const c=[],l=[],d=Object(p["I"])(r.images,(t,e)=>(e||({height:n}=t.getStyleObject()),c.push(t.computedUrl),l.push(t.computedPreviewUrl),t.getStyleObject()));let h=parseFloat(n);Object(p["E"])(h)&&(h=0);const{computedWindowWidth:u}=this.$$getSystemInfo();return h+=Oe["a"].px2rem({px:u/375*30,computedWindowWidth:u}),{imageStyleObjects:d,swiperHeight:h+"rem",imageStyle:r.imageStyle,imageUrls:c,imagePreviewUrls:l}}beforeMount(){this.imgStyle=this.getImgStyle(),this.autoplay="0"!==this.getImgAutoPlay(),this.interval=1e3*Number(this.getImgAutoPlay());const t=this.getValidImgs();let e="",i="";if(this.isH5&&t.length){const o=t[0],a=this.$$getValue(o,"image_width.value",""),s=this.$$getValue(o,"image_height.value","");if(!a||!s){const t=this.$$getValue(o,"image_url.value",""),a=Se[t];a?({width:e,height:i}=a):setTimeout(()=>{const e=new Image;e.onload=()=>{const{src:t,width:i,height:o}=e;Se[t]={width:i,height:o};const{imageStyleObjects:a,swiperHeight:s,imageStyle:r}=this.getImageModuleInfo(i,o);this.imageStyleObjects=a,this.swiperHeight=s,this.imageStyle=r},e.src=t})}}const{id:o,title:a,fieldId:s}=Object(p["q"])(this.data);this.templateComponentId=o,this.templateComponentTitle=a,this.fieldId=s;const{imageStyleObjects:r,swiperHeight:n,imageStyle:c,imageUrls:l,imagePreviewUrls:d}=this.getImageModuleInfo(e,i);this.imageStyleObjects=r,this.swiperHeight=n,this.imageStyle=c,this.imagePreviewUrls=d,this.imageUrls=l;const h=new Ce(t);this.slideImage=h.imageUrl,this.imageSizes=h.imageSizes,this.imageShowType=h.imageShowType}mounted(){}previewImage(t){const{target:{dataset:{previewUrl:e}}}=t;null!=e&&(this.isH5?this.$refs.preview.openPreview(e):this.$$previewImage({current:e,urls:this.slideImage}))}keepPress(){this.pressTime=(new Date).getTime()}keepPressEnd(t){(new Date).getTime()-this.pressTime>1e3&&t.preventDefault()}getImgStyle(t=0){const e=this.$$getValue(this.data,`attribute_list.${t}.image_style.value`,"1")||"1";return e}getImgAutoPlay(t=0){const e=this.$$getValue(this.data,`attribute_list.${t}.prew_type.value`);return 0===Number(e)&&this.$$getValue(this.data,`attribute_list.${t}.auto_play_time.value`,"0")||"0"}getPreviewWidth(){const t=this.$$getSystemInfo().windowWidth;return t+"px"}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],je.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Object})],je.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],je.prototype,"isHeadImg",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],je.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],je.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],je.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],je.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],je.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],je.prototype,"currentFontSize",void 0),je=Object(s["a"])([Object(r["a"])({components:{Swiper:ve["a"],ImageDif:$e["a"],Preview:pe["a"]}})],je);var Ie=je,xe=Ie,Te=(i("9f5e"),Object(k["a"])(xe,ye,be,!1,null,"727639dc",null)),ke=Te.exports,Ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0!==t.imgLength?i("div",[t.imgData.title.value?i("div",{staticClass:"previewTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.imgData.title.value)+" ")]):t._e(),t.imgLength>1?i("div",{staticClass:"imageContent"},t._l(t.picUrls,(function(e,o){return i("span",{key:o,staticClass:"show",style:t.$$setStyle({common:{width:t.picWidth,paddingBottom:t.picWidth,height:0},h5:{width:t.picWidth,paddingBottom:t.picWidth}}),attrs:{"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o]},on:{click:t.previewImage}},[e?i("image-dif",{attrs:{src:e,"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o],cusStyle:t.$$setStyle({common:{width:"100%",paddingBottom:"100%"}}),imageSize:t.imageSizes[o],emptyModule:!0,mode:"aspectFill"}}):t._e(),t.waterArr[o]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":o,"data-preview-url":t.picPreviewUrls[o]}},[i("span",[t._v("水印生成中")])]):t._e()],1)})),0):t._e(),1===t.imgLength&&0===t.imageSpec?i("div",{staticClass:"imageOnlyContent"},[i("image-dif",{attrs:{src:t.picUrls[0],cusStyle:"width: 100%;height: "+t.onePicHeight+"px","data-preview-index":1,"data-preview-url":t.picPreviewUrls[0],previewType:!0,imageSize:t.imageSizes[0]}}),t.waterArr[0]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":1,"data-preview-url":t.picPreviewUrls[0]}},[i("span",[t._v("水印生成中")])]):t._e()],1):t._e(),1===t.imgLength&&1===t.imageSpec?i("div",{staticClass:"specOnlyContent"},[i("image-dif",{attrs:{src:t.picUrls[0],cusStyle:"width: 100%;height: "+t.onePicHeight+"px","data-preview-index":1,"data-preview-url":t.picPreviewUrls[0],previewType:!0,imageSize:t.imageSizes[t.index]}}),t.waterArr[0]?i("div",{staticClass:"waterShadow",attrs:{"data-preview-index":1,"data-preview-url":t.picPreviewUrls[0]}},[i("span",[t._v("水印生成中")])]):t._e()],1):t._e(),t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.allImgs}}):t._e()],1):t._e()},Me=[];class Pe{constructor(t,e,i){this.imageArr=[],this.waterArr=[],this.imageSizes=[],this.imgLength=0,this.picWidth="calc(33.33% - 27px)",this.ossWidth=0,this.onePicHeight=0,this.imageSpec=0,this.imageData=t,this.ossWidth=e,this.imageSpec=i}async decode(){const t=t=>{const e=new Image;return e.src=t,new Promise(i=>{e.onload=function(){i({value:t,height:e.height,width:e.width})}})},e=async()=>{const e=[];for(const i in this.imageData){const o=this.imageData[i];if(o.value.value)this.imageArr.push(o.value.value),this.waterArr.push(o.watermaker_loading),this.imageSizes.push({width:o.value.width,height:o.value.height}),e.push(o.value);else if(o.value){const i=await t(o.value);this.imageArr.push(o.value),this.waterArr.push(o.watermaker_loading),this.imageSizes.push({width:0,height:0}),e.push(i)}}return e},i=await e();this.imgLength=this.imageArr.length;const o=i[0];if(o&&o.height){let t=1;this.imageSpec&&(t=.4),this.onePicHeight=o.height*(this.ossWidth/o.width)*t}1===this.imgLength?this.picWidth=`calc(100% - ${Object(p["i"])(9)})`:Object(b["C"])([2,4],this.imgLength)?this.picWidth=`calc(50% - ${Object(p["i"])(9)})`:this.picWidth=`calc(33.33% - ${Object(p["i"])(9)})`}}var De=Pe;let Le=class extends r["d"]{constructor(){super(...arguments),this.imgLength=0,this.ossWidth=this.$$getSystemInfo().windowWidth-40,this.picWidth="calc(33.33% - 27px)",this.picUrls=[],this.picPreviewUrls=[],this.waterArr=[],this.onePicHeight=0,this.imageSpec=0,this.imageSizes=[]}async beforeMount(){this.imgData=this.data.attribute_list[0],this.imageSpec=parseInt(this.$$getValue(this.data.attribute_list[0],"image_spec.value",0),10)||0;const t=this.$$getValue(this.imgData,"image_url.value",[]),e=new De(t,this.ossWidth,this.imageSpec);this.picUrls=v["a"].getComputedUrl({data:t,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:1}),this.picPreviewUrls=v["a"].getComputedUrl({data:t,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:0}),await e.decode(),this.waterArr=e.waterArr,this.imgLength=e.imgLength,this.picWidth=e.picWidth,this.imageSizes=e.imageSizes,this.onePicHeight=e.onePicHeight}previewImage(t){if(this.isH5){const{target:{dataset:{previewUrl:e}}}=t;this.$refs.preview.openPreview(e)}else{const{currentTarget:{dataset:{previewUrl:e}}}=t;this.$$previewImage({current:e,urls:this.picPreviewUrls})}}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Le.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],Le.prototype,"allImgs",void 0),Le=Object(s["a"])([Object(r["a"])({components:{ImageDif:$e["a"],Preview:pe["a"]}})],Le);var qe=Le,Re=qe,Fe=(i("9a3e6"),Object(k["a"])(Re,Ve,Me,!1,null,null,null)),Ee=Fe.exports,He=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.locationData.latitude.value?i("div",[i("div",{staticClass:"locationTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.locationData.title.value)+" ")]),i("div",{staticClass:"locationContent",on:{click:t.openLocation}},[i("i",{staticClass:"clifont anticon-cli-address-o locationIcon"}),i("div",{staticClass:"description"},[i("div",{staticClass:"locationName"},[t._v(" "+t._s(t.locationData.locate_name.value)+" ")]),i("div",{staticClass:"recordTime"},[t._v(" "+t._s(t.locationData.locate_time.value)+" ")])])])]):t._e()},ze=[];let Be=class extends r["d"]{created(){this.locationData=this.data.attribute_list[0]}openLocation(){this.isH5?this.$$openLocation(parseFloat(this.locationData.latitude.value),parseFloat(this.locationData.longitude.value)):this.$$openLocation({latitude:parseFloat(this.locationData.latitude.value),longitude:parseFloat(this.locationData.longitude.value),name:this.locationData.locate_name.value,scale:14})}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Be.prototype,"data",void 0),Be=Object(s["a"])([r["a"]],Be);var We=Be,Ne=We,Ae=(i("f6c1"),Object(k["a"])(Ne,He,ze,!1,null,null,null)),Ue=Ae.exports,Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.data.attribute_list[0].content_html.value?i("div",[t.data.attribute_list[0].title.value?i("div",{staticClass:"previewTitle"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.data.attribute_list[0].title.value)+" ")]):t._e(),t.data.attribute_list[0].content_html.value?i("pre",{staticClass:"previewContent"},[t._v(t._s(t.data.attribute_list[0].content_html.value))]):t._e()]):t._e()},Ge=[];let Je=class extends r["d"]{};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Je.prototype,"data",void 0),Je=Object(s["a"])([r["a"]],Je);var Ye=Je,Xe=Ye,Ke=(i("a9bd"),Object(k["a"])(Xe,Qe,Ge,!1,null,null,null)),Ze=Ke.exports,ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-module-table"},[t.tableTitle.length?i("h3",{staticClass:"title"},[i("div",{style:"background: "+t.$$getValue(this.$$appStore,"codeInfo.codeColorInfo.themeColor","#357bb3")}),t._v(" "+t._s(t.tableTitle)+" ")]):t._e(),i("div",{staticClass:"tb-wrapper"},t._l(t.tableData,(function(e,o){return i("div",{key:o,class:"row"===e.type?"tr item":"tr"},["cut-line"===e.type?i("div",{class:0===o?"top-border cut-title td":"cut-title td",attrs:{colspan:"2"}},[t._v(" "+t._s(e.content)+" ")]):t._e(),"row"===e.type?i("div",{class:0===o?"top-border title td":"title td"},[t._v(" "+t._s(e.key)+" ")]):t._e(),"row"===e.type?i("div",{class:0===o?"top-border content td":"content td"},[t._v(" "+t._s(e.content)+" ")]):t._e()])})),0)])},ei=[];class ii{constructor(t){this.tableData=[],this.title="",this.decodedData=[],this.tableData=t,this.decode()}decode(){const t=this.tableData;t[0].title&&(this.title=t[0].title.value,t.shift()),t[0].hint&&t.shift();const e=t.map(t=>{if(t.table_title){if(!t.table_title.value)return;return{type:"cut-line",content:t.table_title.value}}const{table_text:e,table_type:i,table_value:o}=t;let a="";switch(i.value){case"1":a=o.value;break;case"2":const t=i.enum_msg.find(t=>t.enum_value===Number(o.value))||{};a=t.enum_text||"";break;case"3":const e=o.value.split(",").map(t=>Number(t));a=i.enum_msg.filter(t=>Object(b["C"])(e,t.enum_value)).map(t=>t.enum_text).join("、");break;case"4":a=o.value;break}return{type:"row",content:a,key:""===e.value?"字段名未设置":e.value}});this.decodedData=e.filter(Boolean)}}var oi=ii;let ai=class extends r["d"]{constructor(){super(...arguments),this.tableTitle="",this.tableData=[]}mounted(){const t=new oi(this.data.attribute_list);this.tableTitle=t.title,this.tableData=t.decodedData}};Object(s["a"])([Object(r["c"])({type:Object})],ai.prototype,"data",void 0),ai=Object(s["a"])([r["a"]],ai);var si=ai,ri=si,ni=(i("25d4"),Object(k["a"])(ri,ti,ei,!1,null,"923c94c6",null)),ci=ni.exports,li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("company-card",{attrs:{"code-data":t.codeData}}),i("div",{staticClass:"oinfo"},[i("op-menu",{attrs:{"code-data":t.codeData,showTip:t.showTip,bottomColor:t.bottomColor,showMangerEntery:!(t.isPoweredBy||t.isRecordCode),isEnableToMina:t.isEnableToMina},on:{showTip:t.getShowTip}}),t.isPoweredBy||t.isRecordCode||t.shouldShowComplain||t.subTplCodeOpenEdit||t.isTrialEdtion?i("code-mark",{attrs:{"code-data":t.codeData,isPoweredBy:t.isPoweredBy,isTrialEdtion:t.isTrialEdtion,showTip:t.showTip,isRecordCode:t.isRecordCode,shouldShowComplain:t.shouldShowComplain,bottomColor:t.bottomColor,originalId:t.originalId,subTplCodeOpenEdit:t.subTplCodeOpenEdit},on:{showTip:t.getShowTip}}):t._e(),t.validOpenTime.startTime||t.validLocation.radius?i("div",{staticClass:"validinfo",style:{color:t.bottomColor.defaultColor}},[t._v(" 该二维码可在「 "),t.validLocation.radius?i("span",[t._v(" "+t._s(t.validLocation.address)+"附近"+t._s(t.validLocation.radius)+" ")]):t._e(),t.validOpenTime.startTime?i("span",[t._v(" "+t._s(t.validOpenTime.startTime)+"-"+t._s(t.validOpenTime.endTime)+" ")]):t._e(),t._v(" 」访问 ")]):t._e()],1)],1)},di=[],hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"company-card"},[i("a",{attrs:{href:"javascript:;"},on:{click:t.jump}},[i("div",{staticClass:"left"},[i("div",{staticClass:"title",class:t.titlePlaceholder},[t._v(" "+t._s(t.info.name||"企业名称未输入")+" "),t.info.logo||4!==t.info.authStatus?t._e():i("div",{staticClass:"pendant"},[i("img",{attrs:{mode:"aspectFit",src:"https://ncstatic.clewm.net/rsrc/2019/0411/15/638fafca3077c546d34b95bdfeed760f.png?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})])]),i("div",{staticClass:"desc"},[t._v(t._s(t.info.desc))]),i("div",{staticClass:"tip"},[t._v("点击了解详情")])]),t.info.logo?i("div",{staticClass:"right"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t.info.logo}})]),4===t.info.authStatus?i("div",{staticClass:"pendant"},[i("img",{attrs:{mode:"aspectFit",src:"https://ncstatic.clewm.net/rsrc/2019/0411/15/638fafca3077c546d34b95bdfeed760f.png?x-oss-process=image/resize,w_750/quality,Q_80/interlace,1/auto-orient,0"}})]):t._e()]):t._e()])]):t._e()},pi=[];let ui=class extends r["d"]{constructor(){super(...arguments),this.show=!1,this.info={}}get titlePlaceholder(){return this.$$getValue(this.info,"name")?"":"placeholder"}mounted(){const t=this.codeData;if(t.is_org_dest_qrcode)return;if(!t.org_msg)return;if(!t.org_msg.org_dest_qrcode_route)return;const{name:e,logo_path:i,org_dest_qrcode_route:o,memo:a,auth_status:s}=t.org_msg;this.info={name:e,logo:i,url:o,desc:a,authStatus:s},this.show=!0}jump(){Object(h["l"])("nocompjump")||(window.location.href="/?url="+this.info.url)}};Object(s["a"])([Object(r["c"])({type:Object})],ui.prototype,"codeData",void 0),ui=Object(s["a"])([Object(r["a"])({})],ui);var gi=ui,mi=gi,fi=(i("e195"),Object(k["a"])(mi,hi,pi,!1,null,"1038fe90",null)),_i=fi.exports,yi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isPoweredBy||t.isTrialEdtion?i("div",{staticClass:"mark",style:{color:t.bottomColor.defaultColor,fontSize:t.bottomFontSize},attrs:{id:"mark"}},[t.isTrialEdtion?[i("a",{staticClass:"pageFrom",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" 正在试用草料二维码 ")]),i("a",{style:{color:t.bottomColor.textColor,display:"flex"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" 旗舰版 ")])]:t.showTip||t.isTrialEdtion?[i("a",{attrs:{href:"//cli.im/price#6",target:"_blank","click-log":"122, 22"}},[t._v(" 付费升级 ")]),t._v(" ，可去除草料底部标识和投诉， "),i("a",{attrs:{href:"//cli.im/help/48192",target:"_blank","click-log":"122, 23"}},[t._v(" 了解详情 ")])]:[i("a",{staticClass:"pageFrom",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.by"))+" ")]),i("a",{style:{color:t.bottomColor.textColor,display:"flex"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.title"))+" ")]),i("a",{staticClass:"pageMade",style:{color:t.bottomColor.defaultColor},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.build"))+" ")])]],2):t._e(),i("div",{staticClass:"reportContent clearfix"},[t.isRecordCode?i("div",{staticClass:"link",style:{color:t.bottomColor.defaultColor,textAlign:"left",position:"relative"},on:{click:t.goHistory}},[t._v(" 我填写的 ")]):t._e(),i("div",{staticClass:"link links",style:{color:t.bottomColor.defaultColor}},[t.subTplCodeOpenEdit?i("div",{on:{click:t.adminEntry}},[t._v("管理员入口")]):t._e(),t.shouldShowComplain?i("div",{style:{paddingLeft:t.$$u(6)},on:{click:t.goComplain}},[t._v(" "+t._s(t.$$t("code.report"))+" ")]):t._e()])])])},bi=[];let vi=!1,$i=class extends r["d"]{constructor(){super(...arguments),this.isEnableToMina=!1}mounted(){setTimeout(()=>{this.scroll(),window.addEventListener("scroll",this.scroll)},2e3),this.isEnableToMina=Object(h["q"])()}destroyed(){window.removeEventListener("scroll",this.scroll,!1)}goComplain(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),e=this.$route.fullPath,i={};t&&(i.coding=t),e&&(i.codepath=e),n["a"].logClick(113,18007,"",{openid:(new L["a"]).id,coding:t}),this.$$go("/pages/complain/select/main",i)}goHistory(){this.$$appStore.h5QueryString.frompc?this.$$go("/pages/record-history/main"):this._showTip("","fromH5CheckMyRecord")}adminEntry(){this._showTip("adminEntry")}bottomFontSize(){return this.$$appStore.h5QueryString.frompc?this.$$u("13px"):this.$$u("12px")}scroll(){const t=this.$$getValue(document.getElementById("mark"),"offsetTop",0),e=document.documentElement.scrollTop;if(t>=e&&t<e+window.innerHeight&&!vi){vi=!0;const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding");n["a"].logClick(114,118037,"",{cvid:(new L["a"]).id,coding:t||this.getCoding()})}}getCoding(){let t=this.$route.query.url;return t||(t=""),t&&t.indexOf("://")>-1&&([,t]=t.split("://")),t&&([,,t]=t.split("/")),t||""}async goQA(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),e=this.$$getValue(this.$$appStore,"codeData.qrcode_top_component"),i=this.$$getValue(this.$$appStore,"codeData.qrcode_compontent"),o=this.$$getValue(this.$$appStore,"codeData.qrcode_record.create_from"),a=t=>"file"===this.$$getValue(t,"component_code"),s=Object(b["U"])(e,a)||Object(b["U"])(i,a);this.isTrialEdtion?window.location.href="http://qr71.cn/o2eikt/qR970lA":(await n["a"].logClick(114,118038,"",{cvid:(new L["a"]).id,coding:t||this.getCoding(),isRecordCode:this.isRecordCode,isFileCode:s,createFrom:o}),64!==Number(o)?this.isRecordCode?window.location.href="/?url=http://qr61.cn/o2eikt/q0e8Ynp":window.location.href="/?url=http://qr61.cn/o2eikt/q2RCdM0":window.location.href="/?url=http://qr61.cn/o2eikt/qGNuIZ1")}_showTip(t,e){this.$emit("showTip",t,e)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],$i.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$i.prototype,"showTip",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],$i.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],$i.prototype,"isPoweredBy",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$i.prototype,"isTrialEdtion",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],$i.prototype,"shouldShowComplain",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:!1})],$i.prototype,"isRecordCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$i.prototype,"subTplCodeOpenEdit",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],$i.prototype,"originalId",void 0),$i=Object(s["a"])([r["a"]],$i);var wi=$i,Ci=wi,Oi=(i("39c5"),Object(k["a"])(Ci,yi,bi,!1,null,"459a4c02",null)),Si=Oi.exports,ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"op-menu",style:{visibility:t.showTip?"hidden":"visible",minHeight:t.showMangerEntery&&this.$$appStore.h5QueryString.frompc&&!this.$$appStore.h5QueryString.nomanagerentry?t.$$u(72):0}},[t.isFavorite||t.isShare?i("ul",{staticClass:"share-collect",style:{borderColor:t.bottomColor.isLight?t.bottomColor.borderColor:"rgba(255, 255, 255, 0.13)"}},[t.isFavorite?i("li",{style:{color:t.bottomColor.textColor},on:{click:t.addFavorite}},[i("i",{class:{clifont:!0,"anticon--":!t.isCollect,"anticon-shoucangnew-01-1-01":t.isCollect}}),t._v(" "+t._s(t.$$t("code.favorite"))+" ")]):t._e(),t.isShare?i("li",{style:{color:t.bottomColor.textColor,borderColor:t.bottomColor.isLight?t.bottomColor.borderColor:"rgba(255, 255, 255, 0.13)"},on:{click:t.addShare}},[i("i",{staticClass:"clifont anticon-share-bottom-new"}),t._v(" "+t._s(t.$$t("code.share"))+" ")]):t._e()]):t._e()])},Ii=[];let xi=class extends r["d"]{get isCollect(){return this.$$appStore.isCollect}get isFavorite(){return this.$$getValue(this.codeData,"show_collect",0)&&!this.isH5Preview}get isShare(){return this.$$getValue(this.codeData,"show_share",0)}get isH5Preview(){return 2===this.$$getValue(this.codeData,"qrcode_record.route_type",0)}adminEntry(){this._showTip("adminEntry")}addFavorite(){this._showTip("addFavorite","addFav")}_showTip(t,e){this.$emit("showTip",t,e)}addShare(){this.$$toast("点击右上角「···」，进行分享");const t=Object(h["b"])(".__toast-inner-wrap");t.length&&(t[t.length-1].style.whiteSpace="nowrap")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],xi.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],xi.prototype,"showTip",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],xi.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],xi.prototype,"showMangerEntery",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],xi.prototype,"isEnableToMina",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],xi.prototype,"originalId",void 0),xi=Object(s["a"])([r["a"]],xi);var Ti=xi,ki=Ti,Vi=(i("0452"),Object(k["a"])(ki,ji,Ii,!1,null,"21fb5ec8",null)),Mi=Vi.exports;let Pi=class extends r["d"]{constructor(){super(...arguments),this.showTip=!1}get validOpenTime(){return this.$$getValue(this.validInfo,"validOpenTime",{})}get validLocation(){return this.$$getValue(this.validInfo,"validLocation",{})}get isPoweredBy(){return this.$$getValue(this.codeData,"show_powered_by",1)}get shouldShowComplain(){return this.$$getValue(this.codeData,"show_complain",1)}get isTrialEdtion(){return 100===this.$$getValue(this.codeData,"edition_msg.edition_id",0)}get subTplCodeOpenEdit(){return!1}hoverTip(){const t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1||t.indexOf("iPod")>-1||t.indexOf("Symbian")>-1;e||(this.showTip=!0)}hideTip(){this.showTip&&(this.showTip=!1)}getShowTip(t,e){this.$emit("showTip",t,e)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Pi.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Pi.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Pi.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:()=>!1})],Pi.prototype,"isRecordCode",void 0),Object(s["a"])([Object(r["c"])({type:String,default:()=>""})],Pi.prototype,"originalId",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:()=>!1})],Pi.prototype,"isEnableToMina",void 0),Pi=Object(s["a"])([Object(r["a"])({components:{CompanyCard:_i,CodeMark:Si,OpMenu:Mi}})],Pi);var Di=Pi,Li=Di,qi=(i("7189"),Object(k["a"])(Li,li,di,!1,null,"095bba7c",null)),Ri=qi.exports,Fi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"__code_table"},[i("div",{domProps:{innerHTML:t._s(t.tableHTML)}})])},Ei=[];const Hi={5:"tb1",6:"tb6",7:"tb2",8:"tb3",9:"tb4",10:"tb5",1:"tb7",2:"tb8",3:"tb9",4:"tb10"};let zi=class extends r["d"]{constructor(){super(...arguments),this.tableHTML=""}mounted(){const t=this.data.attribute_list;this.decodeTable(t)}decodeTable(t){if(Object(b["D"])(t)){const e=[];t.forEach(t=>{const{key:i,columns:o,data:a}=JSON.parse(Object(b["x"])(t,"table_html.value","{}"));e.push(`\n      <table class="${Hi[i]}">\n${o[0].title?`\n      <thead>\n        <tr>\n          <th colspan="${o[0].colSpan}">${o[0].title}</th>\n${(()=>o.map((t,e)=>0===e?"":t.title?`<th>${t.title}</th>`:"").join(""))()}\n        </tr>\n      </thead>\n    `:""}\n        <tbody>\n${(()=>{const t=[];return a.forEach(e=>{const i=["<tr>"];for(const[t,o]of Object(b["g"])(e))"key"!==t&&i.push(`<td>${""===String(o).trim()?"&nbsp;":o}</td>`);i.push("</tr>"),t.push(i.join(""))}),t.join("")})()}\n        </tbody>\n      </table>\n    `)}),this.tableHTML=e.join("")}else this.tableHTML=""}};Object(s["a"])([Object(r["c"])({type:Object})],zi.prototype,"data",void 0),zi=Object(s["a"])([r["a"]],zi);var Bi=zi,Wi=Bi,Ni=(i("f8b0"),Object(k["a"])(Wi,Fi,Ei,!1,null,null,null)),Ai=Ni.exports,Ui=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",{staticClass:"empty-video-module"},[i("video-module",{attrs:{title:t.data.attribute_list[0].video_name.value,emptyTitle:t.data.attribute_list[0].title.value,src:t.src,cover:t.getPosterSrc(t.data.attribute_list[0]),"comp-data":t.data,"can-play":t.canPlay,long:t.data.attribute_list[0].video_long.value,remainNum:t.remainNum,isPaidUser:t.isPaidUser},on:{playCounter:t.playCounter}})],1):t._e()},Qi=[],Gi=i("0cbd");let Ji=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.remainNum=0,this.src="",this.show=!1}beforeMount(){this.src=this.data.attribute_list[0].video_url.value,this.$$appStore.isTopMode&&(this.src=this.data.attribute_list[0].video_url.value.replace("tcview-nc.clewm.net","tcv-nc.clewm.net"))}async mounted(){const{video_url:t}=this.data.attribute_list[0];if(t.value){this.show=!0;const t=await this.checkCanPlay();this.canPlay=t}}getPosterSrc(t){let e;if(""!==t.preview_url.value)e=t.preview_url.value;else{const i=t.video_url.value.split("/");e="http://qiniu-nc.clewm.net/climinavideoposter/"+i[i.length-1]}return e}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(p["n"])(this.$$appStore.codeData,this.data,"video")),e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0;const{play_available:i}=t;return 1===i}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(h["l"])("frompc")||await n["c"].playCounter(Object(p["n"])(this.$$appStore.codeData,this.data,"video"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Ji.prototype,"data",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:1})],Ji.prototype,"isPaidUser",void 0),Ji=Object(s["a"])([Object(r["a"])({components:{VideoModule:Gi["a"]}})],Ji);var Yi=Ji,Xi=Yi,Ki=(i("4d42"),Object(k["a"])(Xi,Ui,Qi,!1,null,"f25d9578",null)),Zi=Ki.exports,to=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.headType?i("div",{class:"head-module-wrap "+(t.imageStyle?"x-imageStyle"+t.imageStyle:""),style:t.$$setStyle({common:{padding:"0 "+("image"===t.headType?"0":t.$$u(10)),paddingTop:t.$$u(t.headCmpInfo.headModule.gap.top),paddingBottom:t.$$u(t.headCmpInfo.headModule.gap.bottom),color:t.baseColor}})},["file"===t.headType?i("head-file",{attrs:{fileMsg:t.moduleMsg,bottomColor:t.bottomColor,hasRichText:t.hasRichText,currentFontSize:t.currentFontSize},on:{fileReadToMina:t.fileReadToMina}}):t._e(),"video"===t.headType?i("head-video",{attrs:{videoMsg:t.moduleMsg,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize}}):t._e(),"image"===t.headType?i("head-img",{attrs:{imgMsg:t.moduleMsg,codeColorInfo:t.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,swiperBgColor:t.swiperBgColor,allImgs:t.allImgs,currentFontSize:t.currentFontSize}}):t._e(),"audio"===t.headType?i("head-audio",{attrs:{audioMsg:t.moduleMsg,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize}}):t._e()],1):t._e()},eo=[],io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"headFileWrapper"},[t.templateComponentId?i("div",{staticClass:"placeholderWrapper",attrs:{"data-template-component-id":t.templateComponentId}},[i("div",{staticClass:"placeholderEl"},[i("i",{class:"clifont anticon-cli-file placeholderIcon font-size-16-"+t.currentFontSize}),i("div",{class:"placeholderName font-size-12-"+t.currentFontSize},[t._v(" "+t._s(t.templateComponentTitle)+" ")])])]):[1===t.$$getValue(t.fileList,"length",0)?i("div",{staticClass:"singleFile",class:{noTitle:t.noTitle,isOnlyHead:t.isOnlyHead},style:t.$$appStore.codeInfo.isRecordCode?"padding: 0 36px":""},[i("div",{on:{click:t.handleFileItem}},[i("image-dif",{staticClass:"fileImg",attrs:{src:t.$$getValue(t.headFileDecoder,"fileImg",""),cusStyle:t.$$setStyle({common:{width:"90px",height:"115px",margin:"0 auto"},h5:{width:t.$$u("90px"),height:t.$$u("115px"),minWidth:"90px",minHeight:"115px"}})}})],1),i("div",{staticClass:"fileName",style:"color: "+t.$$getValue(t.headFileDecoder,"defaultStyle.title.color","")+";\n        opacity: "+t.$$getValue(t.headFileDecoder,"defaultStyle.title.opacity","")+";"},[t._v(" "+t._s(t.fileMajorName)),i("span",{staticClass:"nowrap"},[t._v(t._s(t.extension))])]),i("div",{staticClass:"fileSize",style:"color: "+t.$$getValue(t.headFileDecoder,"defaultStyle.size.color","")+";\n        opacity: "+t.$$getValue(t.headFileDecoder,"defaultStyle.size.opacity","")},[t._v(" "+t._s(t.$$getValue(t.fileList,"0.file_size.value",""))+" ")]),t.canSinglePreview?i("div",{staticClass:"fileOperation"},[i("div",{style:{color:"pure"===t.colorInfo.type?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.color",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnColor",""),backgroundColor:"pure"===t.colorInfo.type?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.bgColor",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnBackground","")},on:{click:function(e){return t.openFile({fileObj:t.fileList[0]})}}},[t._v(" "+t._s(t.$$t("code.preview"))+" ")])]):i("div",{staticClass:"fileOperation",class:{cannotDownload:!t.checkCanDownload(t.$$getValue(t.fileList,"0"))}},[t.checkCanDownload(t.$$getValue(t.fileList,"0"))?i("div",{style:{color:"pure"===t.colorInfo.type?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.color",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnColor",""),backgroundColor:"pure"===t.colorInfo.type?t.$$getValue(t.headFileDecoder,"defaultStyle.preview.bgColor",""):t.$$getValue(t.colorInfo,"gradient.headFilePreviewBtnBackground",""),marginBottom:"24px"},on:{click:function(e){return t.openSourceFile(t.fileList[0])}}},[t._v(" "+t._s(t.$$t("code.download"))+" ")]):t._e(),t.isOnlyHead&&t.checkCanDownload(t.$$getValue(t.fileList,"0"))?i("p",{staticClass:"fileOperationTip"},[t._v(" "+t._s(t.$$t("code.downloadFile.preview"))+t._s(t.$$t("code.downloadFile.download"))+" ")]):t._e(),t.checkCanDownload(t.$$getValue(t.fileList,"0"))?t._e():i("p",{staticClass:"fileOperationTip"},[t._v(" "+t._s(t.$$t("code.downloadFile.cannotDownload"))+" ")])])]):t._e(),t.$$getValue(t.fileList,"length",0)>1?i("div",{staticClass:"fileListBox"},[i("div",{staticClass:"fileList"},t._l(t.fileList,(function(e,o){return i("FileItem",{key:o,attrs:{index:o,fileObj:e},on:{handleClickFileItem:t.openFile}})})),1)]):t._e(),i("a",{staticClass:"placeholder-edit-nav",staticStyle:{display:"none"},attrs:{href:"placeholderLink:%7B%22component_id%22%3A%22"+t.fieldId+"%22%7D"}},[t._v(" 修改 ")])],t.isH5?i("preview",{ref:"preview",attrs:{imageArr:t.slideImage}}):t._e()],2)},oo=[];class ao{constructor(t,e,i,o){this.headFileData={defaultStyle:this.getDefaultStyle(e,i,o),fileImg:this.getFileImg(t)}}isDefaultStyle(t){return 0===t.length||!("FFFFFF"!==t.theme_color&&"ffffff"!==t.theme_color&&"fff"!==t.theme_color&&"FFF"!==t.theme_color||"000"!==t.font_color&&"000000"!==t.font_color)}getFileImg(t){const e=Object(p["r"])(t,"attribute_list.0.file_name.value",""),i=Object(p["r"])(e.split(".").slice(-1),"0");return Object(p["m"])(i)}getDefaultStyle(t,e,i){return this.isDefaultStyle(i)||("000"==i.font_color||"000000"==i.font_color?t.preview={color:"#fff",bgColor:e.lowThemeColor}:(t.title={color:"#fff",opacity:1},t.size={color:"#fff",opacity:.7},t.downLoad={color:"#fff",bgColor:"rgba(255, 255, 255, 0.2)"},t.preview={color:"#"+i.theme_color,bgColor:"#fff"})),t}}var so=ao;let ro=class extends r["d"]{constructor(){super(...arguments),this.defaultStyle={title:{color:"#000",opacity:.87},size:{color:"#000",opacity:.3},downLoad:{color:"#000",bgColor:"rgba(255, 255, 255, 1)"},preview:{color:"#fff",bgColor:"#1aad19"}},this.noTitle=!1,this.fileList=this.filterValidFileList(),this.fileMajorName="",this.extension="",this.slideImage=[],this.isOnlyHead=!1,this.canSinglePreview=!1,this.templateComponentId=0,this.templateComponentTitle="",this.fieldId=0}get colorInfo(){return this.$$appStore.codeInfo.codeColorInfo}get isRecordCode(){return this.$$appStore.codeInfo.isRecordCode}get topStyle(){return this.$$appStore.codeData.qrcode_record.top_style}beforeMount(){0===this.$$getValue(this.topStyle,"length")||"#ffffff"===this.$$getValue(this.colorInfo,"themeColor")?this.defaultStyle={title:{color:"#000",opacity:.87},size:{color:"#000",opacity:.3},downLoad:{color:"#617891",bgColor:"rgba(255, 255, 255, 1)"},preview:{color:"#fff",bgColor:"#1aad19"}}:"#000000"===this.$$getValue(this.colorInfo,"foreColor")&&(this.defaultStyle.title={color:"#000",opacity:.87},this.defaultStyle.size={color:"#000",opacity:.3},this.defaultStyle.downLoad={color:this.$$getValue(this.colorInfo,"lowCrtColor"),bgColor:"rgba(255, 255, 255, 1)"},this.defaultStyle.preview={color:"#fff",bgColor:this.$$getValue(this.colorInfo,"lowThemeColor")}),this.headFileDecoder=new so(this.fileMsg,this.defaultStyle,this.$$appStore.codeInfo.codeColorInfo,this.$$appStore.codeData.qrcode_record.top_style).headFileData;const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0),t.isCompEmpty&&!t.isOrgDest&&!t.isRecordCode&&this.noTitle&&(this.isOnlyHead=!0);const e=this.$$getValue(this.fileList,"0.file_name.value",""),i=e.lastIndexOf(".")-4<0?0:e.lastIndexOf(".")-4,o=e.slice(0,i),a=e.slice(i,e.length),s=this.$$getValue(e.split(".").slice(-1),"0","").toLocaleLowerCase();this.canSinglePreview=Object(p["x"])(Rt["a"],s),this.extension=a,this.fileMajorName=o;const{id:r,title:n,fieldId:c}=Object(p["q"])(this.fileMsg);this.templateComponentId=r,this.templateComponentTitle=n,this.fieldId=c}filterValidFileList(){const t=this.$$getValue(this.fileMsg,"attribute_list",[])||[];return t.filter(t=>this.$$getValue(t,"file_url.value"))}handleFileItem(){this.canSinglePreview&&this.openFile({fileObj:this.fileList[0]})}isiOS(){const t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}iOSversion(){const t=navigator.userAgent,e=t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".");return parseInt(e,10)}isWeixinOrQQ(){const t=navigator.userAgent;return t.match(/MicroMessenger\/[0-9]/i)||t.match(/QQ\/[0-9]/i)}ios13WeixinGuide(t){const e=document.getElementsByTagName("html")[0].getAttribute("ver"),i=Rt["m"]+"/view-doc/download.html";window.open(`${i}?file=${t}&ver=${e}`)}openSourceFile(t){if(this.isH5){const e=this.$$getValue(t,"file_name.value",""),i=this.$$getValue(e.split(".").slice(-1),"0","").toLocaleLowerCase(),o=this.$$getValue(t,"file_url.value",""),a=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),s=this.$$getValue(this.$$appStore,"oid");if(n["a"].logClick(115,2,`${a}/${s}/${o}`),Object(p["x"])(Rt["e"],i))return this.slideImage=[o],void this.$refs.preview.openPreview(parseInt("0",10));this.openFile({fileObj:t,action:"download"})}else this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){this.$$setClipboardData({data:this.$$getValue(t,"file_url.value")})}})}openFile({fileObj:t,action:e}){if(this.isH5){const i=this.$$getValue(this.$$appStore,"codeData.open_readregister");if(1===i)return void this.$emit("fileReadToMina","文件仅支持在微信小程序查看");const o=this.$$getValue(t,"file_name.value",""),a=this.$$getValue(t,"can_download.value",0),s=this.$$getValue(o.split(".").slice(-1),"0","").toLocaleLowerCase(),r=this.$$getValue(t,"file_url.value","");if(Object(p["x"])(Rt["e"],s))return this.slideImage=[r],void this.$refs.preview.openPreview(parseInt("0",10));const n=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding"),c=this.$$getValue(this.$$appStore,"oid");this.$$openDocument({filePath:this.$$getValue(t,"file_url.value"),fileName:o,canDownload:a,coding:n,openId:c,action:e})}else this.$$downloadFile({url:this.$$getValue(t,"file_url.value")}).then(t=>{this.$$openDocument({filePath:t.tempFilePath}).then()})}copyUrl(t){const e=document.querySelector(t);e.select();const i=document.execCommand("copy");i||(e.setSelectionRange(0,e.value.length),e.focus(),document.execCommand("copy"),e.blur()),this.$$showModal({title:"这是一个外部链接",content:"文件链接已复制，前往浏览器粘贴并打开",confirmText:"我知道了",confirmColor:"#4caf50",success(){}})}checkCanDownload(t){return"1"===this.$$getValue(t,"can_download.value","1")}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ro.prototype,"fileMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ro.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ro.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],ro.prototype,"currentFontSize",void 0),ro=Object(s["a"])([Object(r["a"])({components:{ImageDif:$e["a"],FileItem:he,Preview:pe["a"]}})],ro);var no=ro,co=no,lo=(i("b8a3"),Object(k["a"])(co,io,oo,!1,null,"1c14fabc",null)),ho=lo.exports,po=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("video-module",{attrs:{data:t.videoMsg,remainNum:t.remainNum,isPaidUser:t.isPaidUser,currentFontSize:t.currentFontSize},on:{playCounter:t.playCounter}})],1)},uo=[];let go=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.noTitle=!1,this.remainNum=0}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0)}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(p["n"])(this.$$appStore.codeData,this.videoMsg,"video"));this.canPlay=!(1!==t.play_available);const e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(h["l"])("frompc")||await n["c"].playCounter(Object(p["n"])(this.$$appStore.codeData,this.videoMsg,"video"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],go.prototype,"videoMsg",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],go.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],go.prototype,"currentFontSize",void 0),go=Object(s["a"])([Object(r["a"])({components:{VideoModule:_t["a"]}})],go);var mo=go,fo=mo,_o=(i("0acb"),Object(k["a"])(fo,po,uo,!1,null,"1cfde788",null)),yo=_o.exports,bo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("image-module",{attrs:{data:t.imgMsg,codeColorInfo:t.codeColorInfo,hasTitle:t.hasTitle,hasRecord:t.hasRecord,hasRichText:t.hasRichText,swiperBgColor:t.swiperBgColor,isHeadImg:!0,allImgs:t.allImgs,currentFontSize:t.currentFontSize}})],1)},vo=[];let $o=class extends r["d"]{constructor(){super(...arguments),this.noTitle=!1}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],$o.prototype,"imgMsg",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],$o.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$o.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$o.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$o.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],$o.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],$o.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],$o.prototype,"currentFontSize",void 0),$o=Object(s["a"])([Object(r["a"])({components:{ImageModule:ke}})],$o);var wo=$o,Co=wo,Oo=(i("fdd8"),Object(k["a"])(Co,bo,vo,!1,null,"78bf0f27",null)),So=Oo.exports,jo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.noTitle?"noTitle":""},[i("audio-module",{attrs:{audioName:t.audioMsg.attribute_list[0].audio_name.value,audioUrl:t.src,audioSize:t.audioMsg.attribute_list[0].audio_size.value,audioLong:t.audioMsg.attribute_list[0].audio_long.value,headAudio:!0,canPlay:t.canPlay,remainNum:t.remainNum,isPaidUser:t.isPaidUser,data:t.audioMsg,currentFontSize:t.currentFontSize},on:{playCounter:t.playCounter}})],1)},Io=[],xo=i("3154");let To=class extends r["d"]{constructor(){super(...arguments),this.canPlay=!0,this.noTitle=!1,this.remainNum=0,this.src=""}beforeMount(){const{codeInfo:t}=this.$$appStore;0===Object.keys(t.codeHeaderTitleInfo).length&&(this.noTitle=!0),this.src=this.audioMsg.attribute_list[0].audio_url.value,this.$$appStore.isTopMode&&(this.src=this.audioMsg.attribute_list[0].audio_url.value.replace("tcview-nc.clewm.net","tcv-nc.clewm.net"))}mounted(){this.checkCanPlay()}async checkCanPlay(){const{data:t}=await n["c"].mediaCanPlay(Object(p["n"])(this.$$appStore.codeData,this.audioMsg,"audio"));this.canPlay=!(1!==t.play_available);const e=t.play_maximum_limit-t.play_limit;this.remainNum=e>0?e:0}async playCounter(){this.isPaidUser||this.$$appStore.isTopMode||Object(h["l"])("frompc")||await n["c"].playCounter(Object(p["n"])(this.$$appStore.codeData,this.audioMsg,"audio"))}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],To.prototype,"audioMsg",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],To.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],To.prototype,"currentFontSize",void 0),To=Object(s["a"])([Object(r["a"])({components:{AudioModule:xo["a"]}})],To);var ko=To,Vo=ko,Mo=(i("22db"),Object(k["a"])(Vo,jo,Io,!1,null,"04879fde",null)),Po=Mo.exports;let Do=class extends r["d"]{constructor(){super(...arguments),this.headType="",this.moduleMsg={},this.imageStyle="",this.baseColor=""}codeDataChange(){this.updateModuleMsg()}beforeMount(){this.updateModuleMsg();const t=this.$$getValue(this.codeColorInfo,"foreColor");this.baseColor=Object(p["x"])(["#ffffff","#fff"],t)?"#fff":"#333"}updateModuleMsg(){const t=this.$$getValue(this.codeData,"qrcode_top_component",[]);let e="",i={};for(const o of t)Object(p["x"])(["audio","video","image","file"],o.component_code)&&!Object(p["x"])([1,"1"],o.status)&&(e=o.component_code,i=o);this.headType=e,this.moduleMsg=i,"image"===e&&(this.imageStyle=Object(b["x"])(i,"attribute_list.0.image_style.value","1"))}fileReadToMina(t){this.$emit("fileReadToMina",t)}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Do.prototype,"codeData",void 0),Object(s["a"])([Object(r["e"])("codeData")],Do.prototype,"codeDataChange",null),Object(s["a"])([Object(r["c"])({type:Number,default:0})],Do.prototype,"isPaidUser",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Do.prototype,"codeColorInfo",void 0),Object(s["a"])([Object(r["c"])({type:String})],Do.prototype,"title",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Do.prototype,"hasTitle",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Do.prototype,"hasRecord",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Do.prototype,"hasRichText",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"transparent"})],Do.prototype,"swiperBgColor",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:()=>[]})],Do.prototype,"allImgs",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],Do.prototype,"bottomColor",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],Do.prototype,"showRecordView",void 0),Object(s["a"])([Object(r["c"])({type:Array,default:!1})],Do.prototype,"hasStatusOrTask",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],Do.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"1"})],Do.prototype,"currentFontSize",void 0),Do=Object(s["a"])([Object(r["a"])({components:{HeadFile:ho,HeadVideo:yo,HeadImg:So,HeadAudio:Po},computed:{}})],Do);var Lo=Do,qo=Lo,Ro=(i("4538"),Object(k["a"])(qo,to,eo,!1,null,null,null)),Fo=Ro.exports,Eo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.status.isOpen&&t.status.shown?i("div",{staticClass:"notary",style:{marginTop:t.$$u(t.headCmpInfo.notary.gap.top),marginBottom:t.$$u(t.headCmpInfo.notary.gap.bottom)},on:{click:t.toNotaryDetail}},[t._m(0),i("div",{staticClass:"notary-title"},[t._v("内容已被区块链存证")]),t.notaryData.tx_hash?i("div",{staticClass:"notary-hash"},[t._v(" 存证哈希："+t._s(t.notaryData.tx_hash)+" ")]):i("div",{staticClass:"notary-hash"},[i("div",{staticClass:"placeholder",staticStyle:{"margin-top":"4px"}}),i("div",{staticClass:"placeholder",staticStyle:{"margin-top":"6px"}})]),t.notaryData.tx_hash?i("div",{staticClass:"notary-action"},[i("span",[t._v("查看详情")])]):i("div",{staticClass:"notary-action",staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[t._v(" 存证信息加载中... ")])]):t._e()},Ho=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notary-icon"},[i("img",{attrs:{src:"https://static.clewm.net/cli/images/mina-cli/notary.png"}})])}],zo=i("a719");const Bo=t=>{const e={isOpen:!1,shown:!1,creating:!1,hasCert:!1,needCreateCert:!1};return t?(Object(zo["a"])(t)||(1===t.status&&(e.isOpen=!0),1===t.card_status&&(e.shown=!0),t.notary_data||(e.creating=!0),Object(g["a"])(t,"notary_data.tx_hash","")||(e.creating=!0),Object(g["a"])(t,"notary_data.cert_url","")&&(e.hasCert=!0),!e.isOpen||e.creating||e.hasCert||(e.needCreateCert=!0)),e):e};let Wo=class extends r["d"]{constructor(){super(...arguments),this.status={},this.notaryConfig={},this.notaryData={}}mounted(){this.init()}async init(){var t,e;const i=null===(t=this.codeData)||void 0===t||null===(e=t.form_data)||void 0===e?void 0:e.notary_config,o=Bo(i);if(this.status=o,o.isOpen&&o.shown){var a,s;const t=await n["c"].getChildQrCodeNotaryData(null===(a=this.codeData)||void 0===a||null===(s=a.qrcode_record)||void 0===s?void 0:s.web_url);this.notaryData=t.data.notary_data}}toNotaryDetail(){this.tip()}tip(){return"notaryToMp"}};Object(s["a"])([Object(r["c"])({type:Object})],Wo.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:null})],Wo.prototype,"headCmpInfo",void 0),Object(s["a"])([Object(r["b"])("tip")],Wo.prototype,"tip",null),Wo=Object(s["a"])([r["a"]],Wo);var No=Wo,Ao=No,Uo=(i("3359"),Object(k["a"])(Ao,Eo,Ho,!1,null,null,null)),Qo=Uo.exports,Go=i("46c6"),Jo=i("1157"),Yo=i.n(Jo),Xo=i("7963");const Ko={fontSize10:"10px",fontSize11:"11px",fontSize12:"12px",fontSize13:"13px",fontSize14:"14px",fontSize15:"15px",fontSize16:"16px",fontSize17:"17px",fontSize18:"18px",fontSize19:"19px",fontSize20:"20px",fontSize22:"22px",fontSize24:"24px"},Zo={fontSize10:"11.2px",fontSize11:"12.4px",fontSize12:"13.5px",fontSize13:"14.6px",fontSize14:"15.8px",fontSize15:"16.9px",fontSize16:"18px",fontSize17:"19.1px",fontSize18:"20.3px",fontSize19:"21.3px",fontSize20:"22.5px",fontSize22:"24.2px",fontSize24:"27px"},ta={fontSize10:"14px",fontSize11:"15.4px",fontSize12:"16.8px",fontSize13:"18.2px",fontSize14:"19.6px",fontSize15:"21px",fontSize16:"22.4px",fontSize17:"23.8px",fontSize18:"25.2px",fontSize19:"26.6px",fontSize20:"28px",fontSize22:"30.8px",fontSize24:"33.6px"};class ea{static setFontSizeWx(t,e){"1"===e?t.setData({fontSizeMsg:Ko,currentFontSize:"1"}):"2"===e?t.setData({fontSizeMsg:Zo,currentFontSize:"2"}):"3"===e?t.setData({fontSizeMsg:ta,currentFontSize:"3"}):t.setData({fontSizeMsg:Ko,currentFontSize:"1"})}static setFontSizeH5(t,e){t.currentFontSize="1","1"===e?(t.fontSizeMsg=Ko,t.currentFontSize="1"):"2"===e?(t.fontSizeMsg=Zo,t.currentFontSize="2"):"3"===e?(t.fontSizeMsg=ta,t.currentFontSize="3"):(t.fontSizeMsg=Ko,t.currentFontSize="1")}}var ia=ea;const oa={content:"仅支持在微信小程序中操作",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(16)}rem;">请使用微信扫一扫</span>`,showCancel:!1,confirmName:"我知道了",cancelName:"",confirmContent:"",cancelContent:""},aa=["qFW5cVd","qfDqcST","qWgL6r3","qOB8Yoq","qchVOEz","qTkTg6L","qWgL6r3","qwwVebn","qvrQHgv","qbuh4hS","qBK0n7u","q2AnEO8","qFOgtwT","q1cfzSt","qQEdMdP","qV6v9yd","qgU6a50","qHvhQCf","qeUYLXn"];let sa=class extends r["d"]{constructor(){super(...arguments),this.bodypt=0,this.name="CodePreview",this.headerBackground="transparent",this.loading=!0,this.minHeight=null,this.noBottomContent=!1,this.frompc=!!this.$$appStore.h5QueryString.frompc,this.noRecord=!1,this.token={},this.orgId=void 0,this.prevScanContent=void 0,this.prevScanTip=void 0,this.showExpandBtn=!1,this.showRecordExceptFloat=!1,this.statusList=[],this.recordStatusCount=0,this.tasksList=[],this.calcFakeHeight="$$u(0)",this.DynamicPos=Xo["c"],this.dynamicPos=Xo["c"].Head,this.dynamicStyleCfg=null,this.Operate_Pos=Xo["b"],this.operatePos=Xo["b"].Head,this.isRecordOperateTop=!0,this.isRecordOperateBottom=!1,this.codeData={log_msg:{last_desc:null,data_list:[]}},this.wxConfigReady=!1,this.originalId=void 0,this.commonInfo={codeColorInfo:{},codeHeaderTitleInfo:{}},this.hasTitle=!1,this.hasRecord=!1,this.hasRichText=!1,this.currentFontSize="1",this.allImgs=[],this.swiperBgColor="transparent",this.bottomColor={},this.isH5FromWeixin=!1,this.getOpenTypeLoding=0,this.richShowRecordView=!1,this.overIPhoneX=!1,this.isWechatScanError=!1,this.wechatErrorTipModalConfig={content:"当前微信扫码服务器不稳定，请稍后再试。"},this.isScreenshot=!1,this.oldCompontent=[],this.scanPara=Object(p["a"])({},oa),this.codeType="qrcode",this.qrcodeCount=0,this.summaryCodeCurPage=1,this.isEnableToMina=!1,this.isEnableSystem=!1,this.isEnableWx=!1,this.hasWxVersion=!1,this.curMoal="",this.appId="",this.slotUrlSchema="",this.slotToMina=!1,this.summaryCodeSort=0,this.summaryCodeSearch="",this.summaryFilter={},this.summaryLoading=!1,this.code40206=!1,this.orgValidParams={},this.isSearching=!1,this.showQiYeWxLoading=!1,this.isEnableQiWxToMina=!1,this.showOpenQiYeWxLoading=!1,this.targetXcxAppId="",this.toMinaFail=!1,this.showGroupInfo=!1,this.codeCheckAuth={},this.isNotSameCompany=!1,this.isWorkWatched=!1,this.gl3View=!1}async pwdChanged(){this.initCode()}async urlChanged(){if(await this.getCodeInfo(),this.$emit("loaded",this.codeData),!this.showQiYeWxLoading)try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(t){console.error("获取微信分享配置以及设置微信分享失败"),console.error(t)}this.$$logic.h5(()=>{window.scrollTo(0,0)})}showToMinaTipsChanged(){this.showToMinaTips&&setTimeout(()=>{try{const t=document.getElementsByClassName("union-launch-btn")[0];t.addEventListener("launch",t=>{this.clickTimes(t)}),t.addEventListener("error",t=>{this.clickTimesFail(t.detail)})}catch(t){console.warn(t)}},100)}codeDataChange(){this.$nextTick(this.h5CalcMinHeight)}onLogMsgChange(){const t=Object(b["x"])(this.codeData,"log_msg"),e=Object(Xo["f"])(t),{posType:i}=e;this.dynamicPos=i,this.dynamicStyleCfg=e;const o=Object(Xo["d"])(t);this.operatePos=o;const a=i===Xo["c"].Head||o===Xo["b"].Head,s=i===Xo["c"].Body||o===Xo["b"].BodyBottom;this.isRecordOperateTop=a,this.isRecordOperateBottom=s}onFontSizeChange(){const t=Object(b["x"])(this.codeData,"show_font_size");ia.setFontSizeH5(this,String(t))}showExpandBtnChange(){this.$nextTick(this.h5CalcMinHeight)}dataChange(){this.originalId&&this.wxConfigReady&&this.addOpenLaunchListener()}createCmpInfo(t){var e;const{qrcode_compontent:i,operateData:o,statusList:a,tasksList:s,codeCommonInfo:r,state_show_mode:n,qrcode_top_component:c,record_summary_status:l,expand_log:d,qrcode_record:h,form_data:p,soncode_edit_position:u,log_msg:g,qrcode_msg:m}=null!==(e=this.codeData)&&void 0!==e?e:{},f=this.$$appStore.h5QueryString.frompc,{tpl_qrcode_status:_}=null!==h&&void 0!==h?h:{},v=null===m||void 0===m?void 0:m.template_form_auth_info,$=Object(b["j"])(v,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i}),w=null===$||void 0===$?void 0:$.auth_type,C=f&&3===_&&5!==(null!==w&&void 0!==w?w:5)&&!u,S={project:y["e"].MPCLI,hasDynamicViewAuth:!1,qrcodeCompontent:i,operateMsg:o,statusList:a,tasksList:s,preData:r,stateShowMode:n,qrcodeTopComponent:c,recordSummaryStatus:l,expandLog:d,qrcodeRecord:h,formData:p,isEditor:C,soncodeEditPosition:u,recordMsg:g};return new O({...S,position:t}).getData()}h5CalcMinHeight(){this.isH5&&(this.minHeight=this.isScreenshot?null:Object(h["k"])())}isCliCode(t){t||(t=this.url);const e=t.indexOf("qr61.cn")>-1&&-1===t.indexOf("h.qr61.cn")||t.indexOf("qr46.cn")>-1&&-1===t.indexOf("h.qr46.cn"),i=t.indexOf("qr71.cn")>-1&&-1===t.indexOf("h.qr71.cn"),o=e||i;return o}mounted(){const t=this.isCliCode(this.url);this.showQiYeWxLoading=Object(h["r"])()&&Object(h["p"])()&&t,this.isEnableQiWxToMina=Object(h["p"])(),this.overIPhoneX=Object(p["K"])(),this.initCode(),this.$$appStore.h5QueryString.bodypt&&(this.bodypt=this.$$appStore.h5QueryString.bodypt),this.isEnableToMina=Object(h["q"])(),this.isEnableSystem=Object(h["s"])()?Object(h["h"])(Object(h["m"])(),"10.3"):Object(h["h"])(Object(h["g"])(),"5.0"),this.isEnableWx=!!Object(h["v"])()&&Object(h["h"])(Object(h["v"])(),"7.0.12"),this.hasWxVersion=!!Object(h["v"])()}async getWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:0});return i}async getWorkWxJsConfig({corpId:t,suiteId:e}){const i=await n["c"].getJsConfig({corpId:t,suiteId:e,url:encodeURIComponent(window.location.href),isAgent:1});return i}async getAllJsConfig({corpId:t,suiteId:e}){const i=await this.getWxJsConfig({corpId:t,suiteId:e}),o=await this.getWorkWxJsConfig({corpId:t,suiteId:e});if(1===i.code&&1===o.code){const t=i.data,e=o.data;try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,qiYeConfig:{corpid:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList},callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0}),this.qiYeWeixinAgentConfig(e)}})})}catch(a){console.error("获取微信分享配置以及设置微信分享失败"),console.error(a),this.showQiYeWxLoading=!1}}else this.showQiYeWxLoading=!1}qiYeWeixinAgentConfig(t){wx&&wx.agentConfig&&wx.agentConfig({corpid:t.appId,agentid:t.agentId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,success:()=>{if(wx&&wx.invoke){let t=this.url;-1===t.indexOf("http://qr")&&(t="http://"+this.url),wx.invoke("launchMiniprogram",{appid:this.targetXcxAppId,path:`pages/code/code.html?q=${encodeURIComponent(t)}&codeOrigin=wxWorkScan`},t=>{"launchMiniprogram:ok"===t.err_msg?wx.closeWindow&&setTimeout(()=>{wx.closeWindow()},500):(console.error("企业微信打开小程序错误",t),"31"===this.codeData.code?(this.isNotSameCompany=!0,this.toMinaFail=!0,this.showQiYeWxLoading=!1):this.showQiYeWxLoading=!1)})}},fail:t=>{console.error("企业微信agentConfig错误了",t),"31"===this.codeData.code?(this.isNotSameCompany=!0,this.toMinaFail=!0,this.showQiYeWxLoading=!1):this.showQiYeWxLoading=!1}})}async getAllJsConfigBrowser({corpId:t,suiteId:e}){const i=await this.getWorkWxJsConfig({corpId:t,suiteId:e});if(1===i.code){const t=i.data;try{await this.$$logic.h5(async()=>{await this.$$appStore.setKey({key:"workWxConfigData",value:t}),this.qiYeWeixinAgentConfigBrowser(t)})}catch(o){console.error("获取微信分享配置以及设置微信分享失败"),console.error(o)}}}qiYeWeixinAgentConfigBrowser(t){wx&&wx.agentConfig&&wx.agentConfig({corpid:t.appId,agentid:t.agentId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,success:()=>{},fail:t=>{console.error("企业微信agentConfig错误了",t)}})}previewLog(){const t=this.$$getValue(this.codeData,"qrcode_record.route_type"),e=navigator.userAgent.toLowerCase(),i=e.indexOf("micromessenger")>-1&&e.indexOf("wxwork")>-1,o=e.match(/QQ\/[0-9]/i);if(2===t&&(o||i)){const t=this.getCoding(this.url);n["a"].logClick(104,i?180027:180028,"",{cvid:(new L["a"]).id,coding:t})}n["a"].logClick(104,146054,"",{cvid:(new L["a"]).id}),this.hasRecord&&n["a"].logClick(104,146055,"",{cvid:(new L["a"]).id})}calcHeight(){const t=this.overIPhoneX||this.$$appStore.h5QueryString.frompc;let e=0;return this.showToMinaTips&&(e+=58),this.showExpandBtn&&(e+=69),t&&(e+=30),"height: "+this.$$u(e)}calcMinaBottom(){const t=this.overIPhoneX||this.$$appStore.h5QueryString.frompc;let e=16,i="";return t&&(e+=30),this.showExpandBtn&&(i="box-shadow: none"),`padding-bottom: ${this.$$u(e)};${i}`}onTipClick(){let t="";this.$$appStore.h5QueryString.frompc?t="":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableSystem?t="toMinaSystemFail":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableWx?t="toMinaWxFail":this.isEnableToMina&&(t="toMina"),this.tip(t)}showWeixinTipModal(){const t=navigator.userAgent,e=t.match(/MicroMessenger\//i);2===this.$$getValue(this.codeData,"qrcode_record.route_type")&&e?(this.scanPara=Object(p["a"])({},{content:"表单仅支持在微信小程序中填写",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${this.$$px2rem(16)}rem;" >请联系该二维码的制作者将打开方式修改为「小程序」</span>`,showCancel:!0,confirmName:"我知道了",cancelName:"了解详情",confirmContent:"",cancelContent:'<a class="cancel-btn" href="http://h.qr61.cn/o2eikt/qroADBP">了解详情</a>'}),this.isH5FromWeixin=!0):(this.scanPara=Object(p["a"])({},oa),this.isH5FromWeixin=!1);const i=this.getCoding(this.url);Object(p["x"])(aa,i)&&(this.scanPara=Object(p["a"])({},oa,{content:"你可以前往小程序快速体验模板建码、表单填写等功能",tip:`<div><img style="margin-top: ${Object(p["N"])(10)}rem;width: ${Object(p["N"])(100)}rem" src="${Rt["m"]}/images/mpcli/minapp.png"><p style="margin-top: ${Object(p["N"])(10)}rem">长按图片保存，微信扫一扫前往小程序</p></div>`,showCancel:!1,confirmName:"",confirmContent:""}))}async initCode(){const t=Object(h["t"])(window.location.href);try{if(Object(b["x"])(t,"url","").indexOf("gl3_view")>-1){this.gl3View=!0;const e=t.url.replace(/gl3_view/,t.c);t.url=e,this.url=e}}catch(a){console.debug("error",a)}console.log("queries",t),this.isScreenshot=t.isScreenshot,t.preview_signature&&(this.token={preview_signature:t.preview_signature,preview_time:t.preview_time}),t.frompc&&t.org_id&&(this.orgId=+t.org_id);const e=await this.getCodeInfo();if(429===e)return;console.debug(e,"result");const i=Object(b["x"])(e,"org_msg.coding",0);if(this.showQiYeWxLoading){const t=await n["c"].getWxCorpIdByOrgCode({orgCode:i,env:"wxwork"});if(1===t.code){const e=Object(b["x"])(t,"data.corp_id",0),i=Object(b["x"])(t,"data.suite_id",0);this.targetXcxAppId=Object(b["x"])(t,"data.xcx_app_id",""),e?(this.showOpenQiYeWxLoading=!0,this.getAllJsConfig({corpId:e,suiteId:i})):this.showQiYeWxLoading=!1}else this.showQiYeWxLoading=!1}else if(this.$$appStore.h5QueryString.frompc){const t=await n["c"].getWxCorpIdByOrgCode({orgCode:i,env:"wxwork"});if(1===t.code){const e=Object(b["x"])(t,"data.corp_id",0),i=Object(b["x"])(t,"data.suite_id",0);this.targetXcxAppId=Object(b["x"])(t,"data.xcx_app_id",""),e&&this.getAllJsConfigBrowser({corpId:e,suiteId:i})}}if(this.getTargetStateMsg(),this.getRecordEventMsg(),this.getTargetQrcodeTaskMsg(),this.code40206=40206===Object(b["x"])(this.$$appStore.onlycheckedRet,"code"),this.showWeixinTipModal(),"26"===e.code)return void(this.loading=!0);if("31"===e.code){const t=Object(b["x"])(e,"qrcode_msg.visible_auth_info"),i=this.isSummaryCode?4:1,o=Object(p["g"])(Object(b["x"])(t,"auth_list"),t=>t.data_type===i&&Object(p["x"])([1,13,14,3],t.auth_type)&&"visible"===t.privi_type);if(Object(p["a"])(t,{auth_list:o}),_(t))return this.orgName=Object(b["x"])(e,"org_msg.name","未知企业"),this.isWorkWatched=!0,void(this.showQiYeWxLoading||(this.toMinaFail=!0));try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(s){console.error("获取微信分享配置以及设置微信分享失败"),console.error(s)}return this.showGroupInfo=!0,void(this.codeCheckAuth=t)}if(this.$emit("loaded",this.codeData),0!==+this.codeData.code)return;if(!this.showQiYeWxLoading)try{await this.$$logic.h5(async()=>{await Object(d["a"])({data:this.codeData,callback:()=>{this.wxConfigReady=!0,this.$$appStore.setKey({key:"wxConfigReady",value:!0})}})})}catch(s){console.error("获取微信分享配置以及设置微信分享失败"),console.error(s)}this.getOpenTypeLoding=1;const o=async()=>{Object(h["l"])("noBottomContent")&&(this.noBottomContent=!0),Object(h["l"])("noRecord")&&(this.noRecord=!0)};if(this.isScreenshot){let t=0;const e=(t,e)=>new Promise(i=>{setTimeout(()=>{t(),i(!0)},e)});await(()=>{const{oldCompontent:i}=this,o=i.length;return new Promise(async(a,r)=>{try{for(let a=0;a<o;a+=1){const o=i[a],s=parseInt(getComputedStyle(document.querySelector(".__code_module-content")).height,10);if(await e(()=>{s<1304?this.codeData.qrcode_compontent.push(o):t=1},30),t)break}this.getImgs(),a(!0)}catch(s){console.error(s),r(s)}})})()}setTimeout(()=>{this.$$logic.h5(()=>{o(),this.h5CalcMinHeight(),window.$h5CalcMinHeight=this.h5CalcMinHeight.bind(this),window.addEventListener("load",()=>{this.h5CalcMinHeight()})}),this.$emit("loaded",this.codeData),this.showSubCodeEditBtns()})}showSubCodeEditBtns(){var t,e,i;const o=this.$$appStore.h5QueryString.frompc;if(!o)return;const{codeData:a}=this,s=null===a||void 0===a||null===(t=a.qrcode_record)||void 0===t?void 0:t.tpl_qrcode_status;if(Object(p["e"])("tpl_qrcode_status",s),3!==s)return;const r=null===a||void 0===a||null===(e=a.qrcode_msg)||void 0===e?void 0:e.template_form_auth_info,n=Object(b["j"])(r,t=>{const{data_type:e,privi_type:i}=t;return 3===e&&"record"===i});Object(p["e"])("editAuth",n);const c=null===n||void 0===n?void 0:n.auth_type;if(Object(p["e"])("auth_type",c),5===(null!==c&&void 0!==c?c:5))return;const l=null===a||void 0===a?void 0:a.soncode_edit_position;if(Object(p["e"])("soncodeEditPosition",l),l)return;const{currentFontSize:d}=this;Yo()("body").addClass("x-showSubCodeEditBtns"),Object(p["e"])("codeData",a);const h=null===a||void 0===a||null===(i=a.qrcode_msg)||void 0===i?void 0:i.form_data;Object(p["e"])("formData",h);const u=Object(p["l"])(h);Object(p["e"])("fieldMap",u);const g=".placeholder-no-edit-nav,.placeholder-no-edit-nav-new",m=".placeholder-edit-nav,.placeholder-edit-nav-new";Yo()([g,m].join(",")).each((t,e)=>{const i=Yo()(e),o=Object(b["e"])(i.attr("href")||""),a="placeholderLink:";if(o.substr(0,a.length)===a){const{component_id:t}=Object(b["R"])(o.substr(a.length),{}),e=u[t];if(null!==e&&void 0!==e&&e.canEdit){const t=i.is(g),o=!!i.closest(['section[data-key="previewTable-table-tpl9"]','section[data-key="previewTable-table-tpl10"]'].join(",")).length,a=i.closest('section[data-key="previewTable-table-tpl11"]');a.length&&i.wrap('<div class="x-placeholder-btn-wrapper" />');const r=i.closest(".common-title");var s;if(r.length)if(t)i.wrap('<div class="x-placeholder-field-title-wrapper" />'),Yo()('<span class="x-placeholder-field-title" />').text(null!==(s=e.title)&&void 0!==s?s:"").insertBefore(i);else r.children().add(i).css({verticalAlign:"middle"});let n;n=o&&t?e.desc||"请填写":t?"请填写":"修改",i.addClass("font-size-12-"+d).text(n).show()}}});const f=".placeholderWrapper";Yo()(f).each((t,e)=>{const i=Yo()(e),o=i.attr("data-template-component-id"),a=u[o];null!==a&&void 0!==a&&a.canEdit?i.find(".placeholderName").text(a.desc||"上传"+a.title):i.hide()}),Yo()([g,m,f].join(",")).on("click",t=>(this.$refs.tipModal.showModal(),!1))}getImgs(){const{codeData:t}=this,e=this.$$getValue(t,"qrcode_compontent",[]),i=this.$$getValue(t,"qrcode_top_component",[]);let o=[];Object(p["j"])(i,t=>{"image"===t.component_code&&(o=o.concat(t.attribute_list.filter(t=>t.image_url.value)))}),Object(p["j"])(e,t=>{"image"===t.component_code&&(o=o.concat(t.attribute_list.filter(t=>t.image_url.value))),"batchImage"===t.component_code&&(o=o.concat(this.$$getValue(t,"attribute_list.0.image_url.value",[]).filter(t=>t.value&&t.value.value)))}),window.__allImgs=o,this.listenImgs()}listenImgs(){const t=()=>{const t=document.createElement("div");t.innerHTML='<div id="loadedImgs"></div>',document.body.appendChild(t)};let e=setInterval(()=>{const{__allImgs:i}=window,o=window.__loadedImgs||[];i.length===o.length&&(t(),window.clearInterval(e),e=null)},300),i=setTimeout(()=>{e&&(t(),window.clearInterval(e)),window.clearTimeout(i),i=null},1e4)}getCoding(t){let e=t;return e||(e=""),e&&e.indexOf("://")>-1&&([,e]=e.split("://")),e&&([,,e]=e.split("/")),e||""}getOrgCode(t){let e="";if(!t)return"";if(t.indexOf("wxa.cli.im")>-1){const[,i]=t.split("C_");[e]=i.split("/")}else t.indexOf("http://qr")>-1?[,,,e]=t.split("/"):t.indexOf("qr")>-1&&([,e]=t.split("/"));return e}onSummaryCodeSearch({value:t}){this.summaryCodeSearch=t,this.getCodeInfo(),this.$emit("loaded",this.codeData)}onSummaryCodeSort({id:t}){this.summaryCodeSort=0===t?"0":t,this.getCodeInfo(),this.$emit("loaded",this.codeData)}changeCategoryType(t){this.categoryType=t}setIsSearching(t){this.isSearching=t}async getCodeInfo(){const{position:t}=this.$$appStore;let e,i;if(e=this.$$appStore.onlycheckedRet?this.$$appStore.onlycheckedRet:await n["c"].onlychecked(this.getCoding(this.url),this.getOrgCode(this.url)),429===e){const t=Object(h["t"])(window.location.href);return this.$$go("/pages/shunt-info/main",t),e}if(288===e.code)return e.code="288",this.codeData=e,e;if(40206===e.code&&(await this.$$appStore.setKey({key:"getQrcodePropertiesLimit",value:!0}),await this.$$appStore.setKey({key:"onlycheckedRet",value:e})),this.codeType=Object(b["n"])(this.url),"summary"===this.codeType){const e={};this.summaryCodeSearch&&(e.list_name=this.summaryCodeSearch),this.summaryCodeSort&&(e.sort=Number(this.summaryCodeSort)),this.summaryFilter=e,this.summaryLoading=!0,i=await n["c"].getSyCodeInfoAll(this.url,this.pwd,t,this.token,this.orgId,e),this.orgValidParams=Object(b["x"])(i,"org_msg.org_valid_params",{});const o=this.$$getValue(this,"$$appStore.h5QueryString.fromRedirect");if(!this.categoryType||!o){const t=this.isSummaryCode?2:0,e=+Object(b["x"])(i,"show_style.property_value",t);let o="normal";0===e?o="normal":1===e?o="card":2===e&&(o="normal_new"),this.categoryType=o}this.summaryCodeCurPage=1}else i=await n["c"].getCodeInfoAll(this.url,this.pwd,t,this.token,this.orgId,this.alipay);let o=!1;const a=this.$$getValue(i,"qrcode_record"),s=this.$$getValue(i,"qrcode_count"),r=this.$$getValue(i,"qrcode_top_component",[]),c=this.$$getValue(a,"tpl_qrcode_status"),l=this.$$getValue(a,"name_rule"),d=this.$$getValue(l,"show_status"),u=this.$$getValue(a,"log_status"),g=Object(p["x"])([2,"2"],c);o=g&&l?Object(p["x"])([1,"1"],d)&&!!this.$$getValue(a,"list_name"):Object(p["Q"])(r,t=>{const{component_code:e,status:i}=t,o=this.$$getValue(t,"attribute_list.0.content_html.value","");return"text"===e&&1!==i&&o}),this.hasTitle=o;const m=Object(p["x"])([1,"1"],u);this.hasRecord=m,this.qrcodeCount=s;let f=!1;const _=this.$$getValue(i,"qrcode_compontent",[]),$=_.filter(t=>!Object(p["x"])(["recordlog","recordview"],t.component_code)),w=!!$.length;_&&Object(p["j"])(_,t=>{const e="recordview"===t.component_code&&0===t.status;f&&e?t.status=3:e&&(f=!0)}),this.isSummaryCode&&(this.summaryCodeSort=this.$$getValue(_,"0.page_msg.sort_value",0),this.summaryLoading=!1),this.richShowRecordView=f,this.hasRichText=w;const C=this.$$getValue(i,"qrcode_record.top_style"),O=this.$$getValue(C,"theme_color",""),S=this.$$getValue(C,"font_color",""),j=1===this.$$getValue(C,"color_style",0);let I="transparent";Object(p["j"])(r,t=>{const{component_code:e,status:i}=t;if(1===i)return!0;if("image"===e){const e=this.$$getValue(t,"attribute_list.0"),i=this.$$getValue(e,"prew_type.value",y["d"].TILE);if(i===y["d"].SWIPER){const t=this.$$getValue(e,"image_style.value",y["b"].IMAGE_STYLE_1),{bgUseThemeColor:i}=v["a"].getSwiperDotColors({themeColor:O,textColor:S,project:y["e"].MPCLI,position:y["c"].TOP_MODULE,imageStyle:t,hasTitle:o,hasRecord:m,hasRichText:w,isGradient:j});i||(I="#fff")}return!1}return!0}),this.swiperBgColor=I;try{if("26"===i.code)return this.loading=!0,i}catch(x){return i}return this.codeData=i,this.isScreenshot&&(this.oldCompontent=this.codeData.qrcode_compontent,this.codeData.qrcode_compontent=[]),this.allImgs=this.getAllImgs(i),this.commonInfo=i.codeCommonInfo||this.commonInfo,this.loading=!1,this.bottomColor=this.getBottomColor(),this.showExpandBtn=this.commonInfo.isRecordCode&&this.commonInfo.hasOpenRecordLog&&2===this.codeData.log_msg.expand_log,this.showRecordExceptFloat=!this.noRecord&&this.commonInfo.isRecordCode&&(this.commonInfo.hasOpenRecordView&&!f||this.commonInfo.hasOpenRecordLog&&2!==this.$$getValue(this.codeData,"log_msg.expand_log"))&&(!!this.$$getValue(this.codeData,"log_msg.data_list.length")||!!this.$$getValue(this.codeData,"log_msg.last_desc.add_time")),this.$$logic.h5(async()=>{!Object(h["l"])("noScanCount")&&this.$$getValue(i,"qrcode_record.coding",!1)&&(4===c||this.gl3View||n["a"].scan(i));const t=await n["c"].getTargetXcxOriginalId(this.url);this.originalId=this.$$getValue(t,"data.original_id",""),this.appId=this.$$getValue(t,"data.app_id",""),this.previewLog()}),t&&t.lat&&this.$emit("loaded",this.codeData),i}async getUrlSchema(t){const e=this.url,i="/pages/code/code";let o="q="+e;"bottomBtn"===t&&(o+="&fromH5ExpandBtn=1"),"number"===typeof t&&(o=`${o}&fromH5ListTplId=${t}`),"recordCheck"===t&&(o+="&fromH5RecordCheck=1"),"addFav"===t&&(o+="&fromH5AddFavorite=1"),"fromH5CheckMyRecord"===t&&(o+="&fromH5CheckMyRecord=1"),"toRecordHistory"===t&&(o+="&fromH5toRecordHistory=1");const a=`${i}?${o}`;let s="";const r=this.getOrgCode(this.url),c=await n["c"].getUrlSchema(i,o,this.appId,r);if(s=await this.getLocalUrlSchema(c),s)return s;const l=this.setUrlSchemaStorage(c,a);return l}getLocalUrlSchema(t){var e;const{fetchUrl:i}=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.wx_url_scheme)||{};return new Promise((t,e)=>{try{t(Object(u["a"])(i).then(t=>{var e;const i=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.urlScheme;return i}))}catch(o){e()}})}setUrlSchemaStorage(t,e){if(1===this.$$getValue(t,"code",0)){const i=this.$$getValue(t,"data",{});i.openlink&&(i.urlSchema=e);const o=JSON.parse(localStorage.getItem("H5URLTOMINA"))||[];return o.length>=50&&o.splice(0,1),o.push(i),localStorage.setItem("H5URLTOMINA",JSON.stringify(o)),this.$$getValue(t,"data",{}).openlink}return null}doFav(){const t=this.$$getValue(this.$$appStore.codeData,"qrcode_record.coding",""),e=this.$$getValue(this.$$appStore.codeData,"qrcode_record.web_url","");this.$$appStore.setKey({key:"isCollect",value:!0});const i="wx74e11b8ce3ec48e5",o="im",a=`${Object(Go["a"])().cliUrl}/wx_collect.html?coding=${t}&type=nccode&web_url=${e}&app_id=${i}`,s="https://open.weixin.qq.com/connect/oauth2/authorize?",r=`${s}appid=${i}&redirect_uri=http%3a%2f%2fwechat.cli.im%2fwx-api-${o}%2foauth%2fopenid%3fredirect_uri%3d${encodeURIComponent(encodeURIComponent(a))}%26appid%3d${i}&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect`;window.location.href=r}toOtherMina(t,e,i){Object(p["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelName:"取消",noConfirmBtn:!0,cancelContent:'<span class="cancel-btn">取消</span>',confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n          <span style="color:#4caf50;">前往小程序</span>\n          <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n            <wx-open-launch-weapp\n              data-type="inModalToOtherMina"\n              class="launch-btn"\n              style="display:block;width:100%;height:100%;"\n              username="${e}"\n              path="${i}"\n            >\n              <template>\n                <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n              </template>\n            </wx-open-launch-weapp>\n          </div>\n        </div>`});const o=()=>{setTimeout(()=>{this.addOpenLaunchListener()},20)};this.curMoal="",this.$refs.modal.showModal(o)}toCliMina(t,e,i){const o=()=>{};Object(p["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelName:"取消",confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n          <span style="color:#4caf50;">前往小程序</span>\n          <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n            <wx-open-launch-weapp\n              data-type="inModalToCliMina"\n              class="launch-btn"\n              style="display:block;width:100%;height:100%;"\n              username="${this.originalId}"\n              path="/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}${1===e?"&fromH5RecordCheck=1":"&fromH5ListTplId="+i}"\n            >\n              <template>\n                <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n              </template>\n            </wx-open-launch-weapp>\n          </div>\n        </div>`}),this.curMoal="",this.$refs.modal.showModal(o)}onFileReadToMina(t){const e=()=>{};Object(p["a"])(this.scanPara,{content:t,tip:"",showCancel:!0,cancelContent:"",cancelName:"取消",noConfirmBtn:!0,confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n          <span style="color:#4caf50;">前往小程序</span>\n          <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n            <wx-open-launch-weapp\n              data-type="inModalToCliMina"\n              class="launch-btn"\n              style="display:block;width:100%;height:100%;"\n              username="${this.originalId}"\n              path="/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}"\n            >\n              <template>\n                <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n              </template>\n            </wx-open-launch-weapp>\n          </div>\n        </div>`}),this.curMoal="",this.$refs.modal.showModal(e)}addRecordTipsToMina(t,e){const i=()=>{};let o="",a="",s="";"recordCheck"===t?(o="数据汇总仅支持在微信小程序查看",a="是否跳转至小程序"):Object(p["x"])(["bottomBtn","normal"],t)||"number"===typeof t?(o="仅支持在微信小程序中操作",a="是否跳转至小程序"):"fromH5CheckMyRecord"===t?(o="我填写的表单数据仅支持在微信小程序查看",a="是否跳转至小程序"):"addFav"===t?(o="二维码仅支持在微信小程序中收藏",a="是否跳转至小程序"):"toRecordHistory"===t?(o="待处理仅支持在微信小程序中查看",a="是否跳转至小程序"):"notaryToMp"===t&&(o="存证详情仅支持在微信小程序中查看",a="是否跳转至小程序"),e?this.slotUrlSchema=e:"recordCheck"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5RecordCheck=1`:"bottomBtn"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5ExpandBtn=1`:"normal"===t?s="/pages/code/code.html?q="+this.$$appStore.h5QueryString.url:"number"===typeof t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5ListTplId=${t}`:"fromH5CheckMyRecord"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&fromH5CheckMyRecord=1`:"addFav"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5AddFavorite=1`:"toRecordHistory"===t?s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5toRecordHistory=1`:"notaryToMp"===t&&(s=`/pages/code/code.html?q=${this.$$appStore.h5QueryString.url}&&fromH5SubCodeToNotaryDetail=1`),e||(this.slotToMina=!0),Object(p["a"])(this.scanPara,{content:o,tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(16)}rem;">${a}</span>`,showCancel:!0,cancelName:"取消",cancelContent:'<span class="cancel-btn">取消</span>',slotContent:!0,type:t,slotPath:s}),this.curMoal="",this.$refs.modal.showModal(i)}async tip(t,e){this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableSystem?t="toMinaSystemFail":this.isH5FromWeixin&&this.hasWxVersion&&!this.isEnableWx&&(t="toMinaWxFail");const i=[" qq","mqqbrowser","huaweibrowser","safari","miuibrowser","wxwork"];let o=!1;if(Object(p["j"])(i,t=>{navigator.userAgent.toLowerCase().indexOf(t)>-1&&(o=!0)}),"notaryToMp"===t&&(e="notaryToMp"),o=o&&!this.alipay,e&&o&&b["H"]&&!Object(h["l"])("frompc")&&!Object(p["x"])(["toMinaSystemFail","toMinaWxFail"],t)&&!this.isEnableToMina){let t="";if(t=await this.getUrlSchema(e),t)return void this.addRecordTipsToMina(e,t)}if(this.isEnableToMina&&!Object(p["x"])(["toMinaSystemFail","toMinaWxFail"],t))return void this.addRecordTipsToMina(e);let a=()=>{};if(t)if(this.curMoal=t,this.prevScanContent=this.scanPara.content,this.prevScanTip=this.scanPara.tip,"addFavorite"===t)Object(p["a"])(this.scanPara,{content:"微信扫码即可收藏",tip:"其他App扫码暂不支持收藏"});else if("showHistoryTip"===t){const t=this.$$getValue(this.codeData,"qrcode_record.route_type");if(2===t)Object(p["a"])(this.scanPara,{content:"二维码制作者设置的打开方式不支持查看数据汇总。如需查看，请通知制作者修改打开方式为「小程序」。",tip:""});else{const t=this.$$appStore.h5QueryString.frompc;Object(p["a"])(this.scanPara,{content:t?"数据汇总已设置加密":"当前仅支持微信扫码查看",tip:t?"请在手机端用微信扫码后，输入密码查看":"数据汇总有查看权限，需要微信授权"})}}else"adminEntry"===t?this.isEnableToMina?(Object(p["a"])(this.scanPara,{content:"仅支持在小程序中管理前往小程序并验证管理权限",tip:"",showCancel:!0,cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>',confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n                <span style="color:#4caf50;">前往小程序</span>\n                <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n                  <wx-open-launch-weapp\n                    data-type="adminEntry"\n                    class="launch-btn"\n                    style="display:block;width:100%;height:100%;"\n                    username="${this.originalId}"\n                    path="/subPackages/Analysis/pages/AdminEntry/index.html?qrcode_id=${this.$$getValue(this.codeData,"qrcode_record.id")}&coding=${this.$$getValue(this.codeData,"qrcode_record.coding")}&user_id=${this.$$getValue(this.codeData,"qrcode_record.user_id")}&org_id=${this.$$getValue(this.codeData,"org_msg.id")}"\n                  >\n                    <template>\n                      <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n                    </template>\n                  </wx-open-launch-weapp>\n                </div>\n              </div>`}),a=()=>{this.addOpenLaunchListener()}):Object(p["a"])(this.scanPara,{content:"微信扫码即可管理二维码",tip:"其他App扫码暂不支持管理"}):"toMinaSystemFail"===t?(n["a"].logClick(104,146060,"",{cvid:(new L["a"]).id}),Object(p["a"])(this.scanPara,{content:"当前系统版本过低",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(14)}rem;">不支持跳转小程序，建议升级系统版本</span>`})):"toMinaWxFail"===t?(n["a"].logClick(104,146061,"",{cvid:(new L["a"]).id}),Object(p["a"])(this.scanPara,{content:"当前微信版本过低",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(14)}rem;">不支持跳转小程序，建议升级微信版本</span>`})):"errorLink"===t?Object(p["a"])(this.scanPara,{content:"链接错误",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(14)}rem;"></span>`,showCancel:!1,confirmName:"我知道了"}):"otherMinaNotWx"===t?Object(p["a"])(this.scanPara,{content:"该链接内容仅支持在微信中打开",tip:"请使用微信扫一扫",cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>'}):"recordCheck"===t?Object(p["a"])(this.scanPara,{content:"数据汇总仅支持在微信小程序查看",tip:"请使用微信扫一扫",cancelName:"我知道了",cancelContent:'<a class="cancel-btn">我知道了</a>'}):"toRecordHistory"===t&&(this.isEnableToMina?Object(p["a"])(this.scanPara,{content:"是否跳转至小程序",tip:"",showCancel:!0,cancelName:"取消",confirmContent:`<div style="position:relative;width:100%;heiht:100%;display:flex;align-items:center;justify-content:center">\n                <span style="color:#4caf50;">前往小程序</span>\n                <div class="launch-placeholder" style="position:absolute;width:100%;height:100%;left:0;top:0;">\n                  <wx-open-launch-weapp\n                    data-type="recordHistory"\n                    class="launch-btn"\n                    style="display:block;width:100%;height:100%;"\n                    username="${this.originalId}"\n                    path="/subPackages/codeRecord/pages/recordPipelineHistory/index.html?codeId=${this.$$getValue(this.codeData,"qrcode_record.id")}&org_id=${this.$$getValue(this.codeData,"org_msg.id")}&orgCode=${this.$$getValue(this.codeData,"org_msg.coding")}&formAuth=0&noPower=count_last_desc&formCount=0&showOwner=0&processStatus=1"\n                  >\n                    <template>\n                      <div style="display:block;width:100%;height:104px;background:#000;color:#fff;visibility: hidden">打开小程序</div>\n                    </template>\n                  </wx-open-launch-weapp>\n                </div>\n              </div>`}):Object(p["a"])(this.scanPara,{content:"微信扫码即可查看",tip:"其他App扫码暂不支持查看"}));else Object(p["a"])(this.scanPara,{content:"仅支持在微信小程序中操作",tip:`<span style="color: rgba(0, 0, 0, 0.87); font-weight: bold; font-size: ${Object(p["N"])(16)}rem;">请使用微信扫一扫</span>`,cancelName:"取消",cancelContent:'<a class="cancel-btn">取消</a>',confirmName:"我知道了"});this.curMoal="",this.$refs.modal.showModal(a)}showTip(){this.tip("toRecordHistory","toRecordHistory")}onModalHide(){null!=this.prevScanContent&&(this.scanPara.content=this.prevScanContent,this.prevScanContent=void 0),null!=this.prevScanTip&&(this.scanPara.tip=this.prevScanTip,this.prevScanTip=void 0),"toMina"===this.curMoal&&n["a"].logClick(104,146059,"",{cvid:(new L["a"]).id})}getAllImgs(t){let e=[];const{pixelRatio:i,windowWidth:o}=this.$$getSystemInfo(),a=t=>{const a=new v["a"]({data:{attribute_list:t.attribute_list},project:y["e"].MPCLI,dpr:i,windowWidth:o,imageStyle1Margin:16}),s=[];Object(p["I"])(a.images,t=>s.push(t.computedPreviewUrl)),e=e.concat(s)};return Object(p["j"])(t.qrcode_top_component,t=>{"image"===t.component_code&&a(t)}),Object(p["j"])(t.qrcode_compontent,t=>{if("image"===t.component_code&&a(t),"batchImage"===t.component_code&&t.attribute_list[0]&&t.attribute_list[0].image_url){const i=this.$$getValue(t.attribute_list[0],"image_url.value",[]),o=v["a"].getComputedUrl({data:i,windowWidth:this.$$getSystemInfo().computedWindowWidth,type:0});e=e.concat(o)}}),e}isTopImg(){let t=!1;const e=this.$$getValue(this.codeData,"qrcode_top_component",[]);return e instanceof Array&&e.forEach(e=>{if("image"===this.$$getValue(e,"component_code")){const i=this.$$getValue(e,"attribute_list",[]).filter(t=>this.$$getValue(t,"image_url.value")),o=this.$$getValue(i,"0.image_style.value","1");"3"===o&&(this.fixAppH5EmptyHeight(),t=!0)}}),t}fixAppH5EmptyHeight(){const t=Object(h["a"])("#__empty-container"),e=Object(h["a"])(".empty-module");if(t){const e=parseInt(Object(h["e"])(t,"height"),10);e>0&&(t.style.height="0")}e&&(e.style.height="0",e.style.marginTop="0")}needFlexCenter(){const t=this.$$getValue(this.commonInfo,"isCompEmpty");if(!t||this.statusList.length)return!1;const e=this.$$getValue(this.codeData,"qrcode_top_component");let i=!1;const o=[];return e instanceof Array&&e.forEach(t=>{const e=this.$$getValue(t,"component_code");Object(p["x"])(["text","recordlog","recordview"],e)||o.push(t)}),i=!this.showRecordExceptFloat&&this.onlySingleCenterComp(o),i}onlySingleCenterComp(t){let e=!0;if(t.length>1)e=!1;else if(1===t.length){const i=t[0];if(Object(p["x"])(["file","audio"],this.$$getValue(i,"component_code")))this.$$getValue(i,"attribute_list.length")>1&&(e=!0);else{if("image"===this.$$getValue(i,"component_code")&&1===this.$$getValue(i,"attribute_list.length")&&"3"!==this.$$getValue(i,"attribute_list.0.image_style.value"))return!0;if("image"===this.$$getValue(i,"component_code")&&"0"===this.$$getValue(i,"attribute_list.0.prew_type.value")&&"3"!==this.$$getValue(i,"attribute_list.0.image_style.value"))return!0;e=!1}}return e}getBottomColor(){const t={},e=this.$$getValue(this.codeData,"codeCommonInfo",{});return t.isLight=Object(p["x"])(["#000","#000000"],this.$$getValue(e,"codeColorInfo.foreColor")),e.isCompEmpty&&e.codeColorInfo.themeColor&&!Object(p["x"])(["#fff","#ffffff","#f4f4f4"],e.codeColorInfo.themeColor.toLowerCase())?Object(p["x"])(["#fff","#ffffff"],e.codeColorInfo.foreColor)?(t.defaultColor="rgba(255, 255, 255, 0.5)",t.borderColor="rgba(120, 130, 140, 0.13)",t.textColor="#fff",t):Object(p["x"])(["#000","#000000"],e.codeColorInfo.foreColor)?(t.defaultColor="rgba(0, 0, 0, 0.3)",t.borderColor="rgba(120, 130, 140, 0.13)",t.textColor="rgba(0, 0, 0, 0.5)",t):(this.$$appStore.h5QueryString.frompc?(t.defaultColor="rgba(0, 0, 0, 0.32)",t.textColor="#166bc7"):(t.defaultColor="rgba(0, 0, 0, 0.32)",t.textColor="#617891"),t.borderColor="rgba(120, 130, 140, 0.13);",t):(this.$$appStore.h5QueryString.frompc?(t.defaultColor="rgba(0, 0, 0, 0.32)",t.textColor="#166bc7"):(t.defaultColor="rgba(0, 0, 0, 0.32)",t.textColor="#617891"),t.isLight=!0,t)}asyncRenderManual(t){const{isSummaryCode:e,codeData:i}=this;let o=1;e&&(o=this.$$getValue(t,"0.page_msg.current_page",1)),this.summaryCodeCurPage=o,Object(p["z"])(this.$$getValue(i,"qrcode_compontent"))&&Object(p["z"])(t)&&(this.codeData.qrcode_compontent=i.qrcode_compontent.concat(t))}get isSummaryCode(){return"summary"===this.codeType}isWechatScanErrorr(){const t=Number(this.$$getValue(this.codeData,"qrcode_record.route_type",1));Object(p["H"])()&&2!==t&&(this.$refs.wechatErrorTipModal.showModal(),this.isWechatScanError=!0)}addOpenLaunchListener(){const t=document.getElementsByClassName("launch-btn"),e=this;Object(p["j"])(t,t=>{const{dataset:{type:i}}=t;if("topRecordHistory"===i||"goRecordFormPage"===i)return;let o=0;const a={cvid:(new L["a"]).id};"goFormListPage"===i||"goRecordFormPage"===i?(o=146056,a.expandLog="goFormListPage"===i?2:0):"inModalToMina"===i?o=146058:"topToMina"===i?o=146062:"topRecordHistory"===i?o=146063:"myRecordHistory"===i&&(o=146064),t.addEventListener("launch",()=>{n["a"].logClick(104,o,"",a)}),t.addEventListener("error",t=>{try{a.errMsg=JSON.stringify(t.detail),n["a"].logClick(104,o,"",a),"inModalToOtherMina"!==i&&"ToOtherMina"!==i||(e.$refs.modal.hideModal(),e.$$toast("小程序跳转失败，请联系二维码制作者检查设置",5e3,!1,"65%"))}catch(s){console.log(s)}})})}clickTimes(t){const{codeData:e}=this,i=Object(b["x"])(e,"qrcode_record.coding"),o=Object(b["x"])(e,"org_msg.user_id");n["a"].logClick(104,118154,"",{openid:(new L["a"]).id,coding:i,userId:o,message:JSON.stringify(t)})}clickTimesFail(t){const{codeData:e}=this,i=Object(b["x"])(e,"qrcode_record.coding"),o=Object(b["x"])(e,"org_msg.user_id");n["a"].logClick(104,118155,"",{openid:(new L["a"]).id,coding:i,userId:o,error:JSON.stringify(t)})}async getTargetStateMsg(){const{url:t,codeData:e}=this,i=await n["c"].getTargetStateMsg(t);if(1===Object(b["x"])(i,"code")){const t=Object(b["x"])(e,"qrcode_record.id");if(this.$$getValue(i,`data.${t}.length`)){const e=Object(b["x"])(i,"data."+t,[]),o=e.filter(t=>{t.formatUpdateTime=b["T"].handleRecordTime(t.ass_update_time);const e=Object(b["x"])(t,"state_change_log.0.from_target_msg",null);return t.tplType7State=e?b["T"].getTplType7State(e):null,(Object(b["x"])(t,"id")||1===t.is_default)&&Object(b["x"])(t,"state_name")});this.statusList=o,this.codeData=Object(p["a"])({},this.codeData,{statusList:o}),await this.$$appStore.setKey({key:"codeStatus",value:o})}}}async getRecordEventMsg(){const{url:t}=this,e=await n["c"].getRecordEventMsg(t);1===Object(b["x"])(e,"code")&&(this.recordStatusCount=Object(b["x"])(e,"data.count")||0)}async getTargetQrcodeTaskMsg(){const{url:t}=this,e=await n["c"].getTargetQrcodeTaskMsg(t);1===Object(b["x"])(e,"code")&&(this.tasksList=Object(b["x"])(e,"data",[]),this.codeData=Object(p["a"])({},this.codeData,{tasksList:Object(b["x"])(e,"data",[])}))}};Object(s["a"])([Object(r["c"])({type:String,default:""})],sa.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],sa.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],sa.prototype,"pwd",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],sa.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],sa.prototype,"alipay",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],sa.prototype,"showToMinaTips",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"normal"})],sa.prototype,"categoryType",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"未知企业"})],sa.prototype,"orgName",void 0),Object(s["a"])([Object(r["c"])({type:String,default:"0"})],sa.prototype,"errorCode",void 0),Object(s["a"])([Object(r["e"])("pwd")],sa.prototype,"pwdChanged",null),Object(s["a"])([Object(r["e"])("url")],sa.prototype,"urlChanged",null),Object(s["a"])([Object(r["e"])("showToMinaTips")],sa.prototype,"showToMinaTipsChanged",null),Object(s["a"])([Object(r["e"])("codeData.code")],sa.prototype,"codeDataChange",null),Object(s["a"])([Object(r["e"])("codeData.log_msg")],sa.prototype,"onLogMsgChange",null),Object(s["a"])([Object(r["e"])("codeData.show_font_size")],sa.prototype,"onFontSizeChange",null),Object(s["a"])([Object(r["e"])("showExpandBtn")],sa.prototype,"showExpandBtnChange",null),Object(s["a"])([Object(r["e"])("originalId"),Object(r["e"])("wxConfigReady")],sa.prototype,"dataChange",null),sa=Object(s["a"])([Object(r["a"])({components:{CodeTitle:M,VideoModule:_t["a"],RecordPreview:yt["a"],TextModule:bt["a"],AudioModule:vt["a"],ContactModule:It,FileModule:_e,ImageModule:ke,RedirectModule:Bt,SummaryAction:ie,EmptyModuleImage:Ee,EmptyModuleLocation:Ue,EmptyModuleText:Ze,EmptyModuleVideo:Zi,EmptyModuleTable:ci,CodeBottomContent:Ri,TableModule:Ai,HeadModule:Fo,Modal:X["a"],CodeStatus:lt,CodeTasks:ft,ToMina:H,AddressModule:Dt,NotaryCard:Qo,WxworkErrorPage:G,GroupInfoPage:it},computed:{hasContent(){var t;const e=(null===(t=this.codeData)||void 0===t?void 0:t.qrcode_compontent)||[];return!!Object(p["g"])(e||[],t=>!["recordlog","recordview"].includes(null===t||void 0===t?void 0:t.component_code)).length},fontSizeClass(){return"font-size-17-"+this.currentFontSize},headCmpInfo(){return this.createCmpInfo("top")},footCmpInfo(){return this.createCmpInfo("bottom")}}})],sa);var ra=sa,na=ra,ca=(i("6233"),i("bf1e"),Object(k["a"])(na,c,l,!1,null,"77dc45eb",null)),la=ca.exports,da=i("c3d1"),ha=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow?i("div",["6"!==t.errorCode&&"100"!==t.errorCode||9===t.auditReasonId||10===t.auditReasonId?i("div",[i("image-dif",{attrs:{src:t.src,cusStyle:t.$$setStyle({common:Object.assign({},{width:t.width,height:t.height,backgroundSize:"100% 100%",margin:"-1"===t.errorCode?"25% auto 0":"45% auto 0"},"-1"===t.errorCode?{position:"relative",left:t.$$u(60)}:{}),h5:{width:t.$$u(""+t.width),height:t.$$u(""+t.height)}})}}),i("div",{staticClass:"tips",class:{loadErrTips:"-1"===t.errorCode,auditTips:9===t.auditReasonId||10===t.auditReasonId}},[t._v(" "+t._s(t.tips)+" ")]),t.fusing?i("div",{staticClass:"fusing",class:{auditTipsDesc:9===t.auditReasonId||10===t.auditReasonId}},[t._v(" "+t._s(t.fusing)+" ")]):t._e()],1):t._e(),"6"===t.errorCode&&9!==t.auditReasonId&&10!==t.auditReasonId?i("div",[13===t.auditReasonId?i("image-dif",{attrs:{src:t.auditFail3,cusStyle:t.$$setStyle({common:{width:"80px",height:"80px",margin:"160px auto 0"},h5:{width:t.$$u("80px"),height:t.$$u("80px")}})}}):i("image-dif",{attrs:{src:t.auditFail2,cusStyle:t.$$setStyle({common:{width:"56px",height:"56px",margin:"160px auto 0"},h5:{width:t.$$u("56px"),height:t.$$u("56px")}})}}),5===t.auditReasonId?i("div",[i("div",{staticClass:"outline-reminds"},[t._v(" "+t._s(this.contentText1)+" ")])]):t._e(),5!==t.auditReasonId&&9!==t.auditReasonId&&10!==t.auditReasonId?i("div",[i("div",{staticClass:"outline-tips"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"outline-reminds"},[t._v(" "+t._s(this.contentText1)+" ")]),t.showButtons?i("div",{staticClass:"recover",attrs:{"data-url":this.restoreUrl},on:{click:t.gotoRecover}},[t._v(" 申请恢复 ")]):t._e()]):t._e()],1):t._e(),"100"===t.errorCode?i("div",[i("div",{staticClass:"outline-reminds",staticStyle:{margintop:"40%",padding:"0 3em"}},[t._v(" "+t._s(t.errorTips)+" ")])]):t._e()]):t._e()},pa=[];let ua=class extends r["d"]{constructor(){super(...arguments),this.tips="加载失败，请检查网络后重试",this.src="https://static.clewm.net/cli/images/mina-cli/router@2x.png",this.fusing="",this.width="227px",this.height="241px",this.auditFail2="https://ncstatic.clewm.net/feres/a44fa42f_e92fd9c4_1658387996.png",this.auditFail3="https://ncstatic.clewm.net/feres/a9d81c3b_8631bd01_1659087063.png",this.restoreUrl="http://qr71.cn/o2eikt/qiVBCeg",this.contentUrl="http://qr71.cn/o2eikt/qluGoZu",this.contentText1="该二维码内容因违反相关法律法规或者微信规则，现已暂停访问。",this.auditReasonId=0,this.title="",this.showButtons=!1}mounted(){this.isNotaryError&&(this.tips="请使用微信扫码，其他App扫码暂不支持扫码预览")}updated(){const t=+this.$$getValue(this.auditReason,"id",0);let e;switch(e=11===t?"该二维码内容已被隐藏":12===t?"系统升级中":13===t?"该二维码已停止访问":"已停止该二维码访问",this.auditReasonId=t,this.title=e,this.showButtons=!Object(b["C"])([11,12,13],t),this.dispatchPage(),t){case 1:this.restoreUrl="http://qr71.cn/ohvBCP/qcIGLK7",this.contentUrl="http://qr71.cn/ohvBCP/qmOmfUf",this.contentText1="该二维码内容因违反微信内容管理规范，现已暂停访问。";break;case 2:this.restoreUrl="http://qr71.cn/ohvBCP/qRNzCPi",this.contentUrl="http://qr71.cn/ohvBCP/q2sDKNm",this.contentText1="该二维码内容因资质存疑，现已暂停访问。";break;case 3:return this.restoreUrl="http://qr71.cn/ohvBCP/qh0LkTK",this.contentUrl="http://qr71.cn/ohvBCP/qSrcDA8",void(this.contentText1="该二维码内容因包含违规营销广告信息，现已暂停访问。");case 4:this.restoreUrl="http://qr71.cn/ohvBCP/qa6EY8q",this.contentUrl="http://qr71.cn/ohvBCP/qIP6tnW",this.contentText1="该二维码内的网址链接可能存在风险，现已暂停访问。";break;case 5:case 6:case 7:case 8:this.restoreUrl="",this.contentUrl="",this.contentText1="该二维码内容正在审核中，请稍后访问。\n如需加速审核，请发送您的草料账号到邮箱shenhe@nears.cn";break;case 11:this.restoreUrl="",this.contentUrl="",this.contentText1="草料二维码不具备发布政治（含法律法规）、\n经济、军事、外交、历史、新闻、社会突发事件等\n内容的资质。根据相关法律法规及第三方平台要求，\n该二维码内容已被隐藏。\n\n对造成的不便，我们深表歉意。\n申诉请联系审核邮箱：shenhe@nears.cn";break;case 12:this.restoreUrl="",this.contentUrl="",this.contentText1="为落实最新法律法规和平台对时政信息类目核定的\n要求，我们正在升级系统，落实内容管理责任。\n\n对造成的不便，我们深表歉意。\n申诉请联系审核邮箱：shenhe@nears.cn";break;case 13:this.restoreUrl="",this.contentUrl="",this.contentText1="";break;default:break}}dispatchPage(){if(Object(b["C"])(this.url.split("/"),"idcode"))return this.tips="请使用微信扫码查看",void(this.src="https://static.clewm.net/cli/images/mpcli/gowechat.png");if(9===this.auditReasonId)return this.tips="该码当前访问量过大",this.width="128px",this.height="128px",this.src="https://static.clewm.net/cli/images/mina-cli/not_available@2x.png",void(this.fusing="你可以稍后进行访问");if(10===this.auditReasonId)return this.tips="该二维码已停止访问",this.width="128px",this.height="128px",void(this.src="https://static.clewm.net/cli/images/mina-cli/not_available@2x.png");switch(this.errorCode){case"-1":return this.tips="加载失败，请检查网络后重试",void(this.src="https://static.clewm.net/cli/images/mina-cli/router@2x.png");case"1":return this.tips="当前码已被作者删除",this.src="https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png",this.width="173px",void(this.height="173px");case"7":return this.tips="当前码已被作者删除",this.src="https://static.clewm.net/cli/images/mina-cli/mina_is_deleted@2x.png",this.width="173px",void(this.height="173px");case"9":this.tips="该页面达到499次访问上限\n需要审核通过之后才能继续访问",this.src="https://static.clewm.net/cli/images/mina-cli/mina_check.png",this.fusing="如需加快审核，请联系：service@nears.cn",this.width="173px",this.height="173px";break;case"288":this.tips="该二维码访问频繁，请5-10分钟后重试",this.src="https://static.clewm.net/cli/images/mina-cli/audit_fail@2x.png",this.width="205px",this.height="178px";break;default:break}}gotoRecover(t){const{url:e}=t.target.dataset;this.$router.push("/?url="+e)}};Object(s["a"])([Object(r["c"])({type:String,default:"-1"})],ua.prototype,"errorCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"isNotaryError",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ua.prototype,"url",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],ua.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],ua.prototype,"errorTips",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({})})],ua.prototype,"auditReason",void 0),Object(s["a"])([Object(r["e"])("errorCode"),Object(r["e"])("auditReason")],ua.prototype,"mounted",null),ua=Object(s["a"])([Object(r["a"])({components:{ImageDif:$e["a"]}})],ua);var ga=ua,ma=ga,fa=(i("c6d4"),Object(k["a"])(ma,ha,pa,!1,null,"97cb5910",null)),_a=fa.exports,ya=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.needShow&&!t.isLoading&!t.autoEnter?i("div",{class:"content "+(t.isIphoneX?"isIPhoneX":"")+" "+(t.reminder.length>150?"isMoreInfo":""),style:t.bodypb||t.bodypt?{height:"calc(100vh - "+this.$$u(t.bodypb)+" - "+this.$$u(t.bodypt)+")"}:{}},[i("div",{staticClass:"cont"},[i("div",{ref:"title",staticClass:"tips"},[t._v(" 该内容已被制作者加密 ")]),i("div",{staticClass:"input-div",on:{click:t.inputClicked}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],ref:"pswInpput",staticClass:"psw-input",attrs:{type:"password",placeholder:"请输入访问密码"},domProps:{value:t.pwd},on:{focus:t.inputFocus,blur:t.inputBlur,input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),t.reminder?i("div",{staticClass:"reminder"},[t._v(" 密码提示："+t._s(t.reminder)+" ")]):t._e()]),i("div",{class:"footer "+(t.isIosFocus?"iosFooter":""),style:{height:this.$$px2rem(t.footerHeight)+"rem"}},[i("div",{staticClass:"el-checkbox"},[i("label",{on:{click:t.change}},[i("div",{staticClass:"check"},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.rememberPsw}}),t._m(0)]),i("div",{staticClass:"word"},[t._v(" 下次自动进入 ")])])]),i("div",{staticClass:"comfirm",on:{click:t.comfirm}},[t._v(" 确定 ")])])]):t._e()},ba=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"show"},[i("i",{staticClass:"clifont anticon-check"})])}],va=i("3c61");let $a=class extends r["d"]{constructor(){super(...arguments),this.bodypb=0,this.bodypt=0,this.firstLocked=!0,this.pwd="",this.footerHeight=178,this.topScroll=400,this.isIosFocus=!1,this.autoEnter=!1,this.isLoading=!0}get isIphoneX(){return va["a"].isIphoneX}urlChange(){this.updateData()}codeIdChange(){this.updateData()}renderPwdChanged(){"19"!==this.code||this.firstLocked||this.isLoading||(this.isLoading=!1,this.autoEnter=!1,this.$$toast("密码错误，请重试！")),this.isLoading=!1}created(){if(Object(p["C"])()&&(this.footerHeight=234),Object(p["y"])()){const t=document.documentElement.clientHeight||document.body.clientHeight;window.addEventListener("resize",()=>{this.andriodListen(t)})}}mounted(){setTimeout(()=>{this.$refs.title&&(this.topScroll=this.$refs.title.getBoundingClientRect().top)},1e3);const t=Object(h["t"])(window.location.href);t.bodypb&&!this.$$appStore.noAppBottomEmpty&&(this.bodypb=t.bodypb),t.bodypt&&(this.bodypt=t.bodypt)}updateData(){const t=localStorage.getItem("codePsw_"+this.codeId)||"";if(t){this.pwd=t,this.$emit("checkboxChange",!0);const e=localStorage.getItem("isNewCodePsw")||!1;e&&(this.autoEnter=!0,this.comfirm())}else this.isLoading=!1,this.pwd="",this.firstLocked=!0}andriodListen(t){const e=document.documentElement.clientHeight||document.body.clientHeight;this.footerHeight=t<e?82+(Object(p["C"])()?152:96):138}change(t){t.preventDefault(),t.stopPropagation(),this.$emit("checkboxChange",!this.rememberPsw)}inputClicked(){this.$refs.pswInpput&&this.$refs.pswInpput.focus()}inputFocus(){if(!this.$$appStore.h5QueryString.frompc&&!Object(p["y"])()){const t=window.screen.height;let e=200;switch(t){case 568:e=100;break;case 667:e=130;break;case 736:e=200;break;case 812:e=200;break;case 896:e=260;break;default:e=200}setTimeout(()=>{this.isIosFocus=!0,this.footerHeight=138,document.body.scrollTop=this.topScroll+e,document.documentElement.scrollTop=this.topScroll+e},10)}}inputBlur(){this.$$appStore.h5QueryString.frompc||(document.body.scrollTop=0,document.documentElement.scrollTop=0,this.footerHeight=82+(Object(p["C"])()?152:96),this.isIosFocus=!1)}comfirm(){""!==this.pwd?(this.firstLocked=!1,this.$emit("confirmed",this.pwd)):this.$$toast("请输入密码！")}};Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$a.prototype,"rememberPsw",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],$a.prototype,"url",void 0),Object(s["a"])([Object(r["e"])("url")],$a.prototype,"urlChange",null),Object(s["a"])([Object(r["c"])({type:Number,default:0})],$a.prototype,"codeId",void 0),Object(s["a"])([Object(r["e"])("codeId")],$a.prototype,"codeIdChange",null),Object(s["a"])([Object(r["c"])({type:String,default:""})],$a.prototype,"reminder",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$a.prototype,"needShow",void 0),Object(s["a"])([Object(r["c"])({type:String,default:""})],$a.prototype,"code",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],$a.prototype,"renderPwd",void 0),Object(s["a"])([Object(r["e"])("renderPwd")],$a.prototype,"renderPwdChanged",null),$a=Object(s["a"])([Object(r["a"])({})],$a);var wa=$a,Ca=wa,Oa=(i("30a0"),Object(k["a"])(Ca,ya,ba,!1,null,"c90d1bf0",null)),Sa=Oa.exports,ja=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",[i("div",{staticClass:"content"},[i("img",{staticClass:"valid-img",attrs:{src:t.imgUrl}}),i("div",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"info",domProps:{innerHTML:t._s(t.info)}})]),t.isFree?i("div",{staticClass:"footer",style:t.isIphoneX?"margin-bottom: "+t.$$u(44):"margin-bottom: "+t.$$u(24)},[i("a",{attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.title"))+" ")]),i("a",{staticStyle:{color:"rgb(153, 153, 153)"},attrs:{href:"javascript:void(0);"},on:{click:t.goQA}},[t._v(" "+t._s(t.$$t("code.newPowerBy.build"))+" ")])]):t._e()]):t._e()},Ia=[];let xa=class extends r["d"]{constructor(){super(...arguments),this.title="二维码无法查看",this.imgUrl=Rt["m"]+"/images/mina-cli/artwork@2x.png?v=20191225",this.info="该二维码制作者设置"}get isFree(){return this.$$getValue(this.codeData,"edition_msg.edition_id",1)<=1}get isIphoneX(){return va["a"].isIphoneX}validCodeChange(){this.validCode&&this.renderValidInfo()}renderValidInfo(){const{validCode:t,validTime:e,validOpen:i,validOpenTime:o,validLocation:a,validOpenPsd:s}=this.validInfo;switch(t){case 1:e.hasExpired?(this.title="当前日期无法查看二维码",this.info="该二维码制作者设置有效期截止"+e.endTime):(this.title="当前日期无法查看二维码",this.info=`该二维码制作者设置查看有效期<br />${e.startTime}至${e.endTime}`);break;case 2:{const t=navigator.userAgent.toLowerCase(),{h5QueryString:e}=this.$$appStore;i.canShare||1!==+e.wxscene&&"timeline"!==e.from&&"groupmessage"!==e.from&&"singlemessage"!==e.from?i.allowOtherApp||-1!==t.indexOf("micromessenger")||(this.title="二维码无法查看",this.info="该二维码制作者设置仅允许微信打开"):(this.title="二维码无法查看",this.info="该二维码制作者设置不允许“微信转发分享”打开");break}case 3:this.title="当前时段无法查看二维码",this.info=`该二维码制作者设置“每天${o.startTime}-${o.endTime}${a.radius?`、${a.address}附近${a.radius}`:""}${s.hasPsd?"、输入密码":""}”查看`;break;case 4:this.title="当前地理位置无法查看二维码",this.info=`该二维码制作者设置“${o.startTime?`每天${o.startTime}-${o.endTime}、`:""}${a.address}附近${a.radius}${s.hasPsd?"、输入密码":""}”查看`;break;case 5:this.title="获取定位失败",this.info="该二维码被限制查看区域，当前应用无法获取定位，请使用微信打开！";break;default:break}}getCoding(){let t=this.$route.query.url;return t||(t=""),t&&t.indexOf("://")>-1&&([,t]=t.split("://")),t&&([,,t]=t.split("/")),t||""}goQA(){const t=this.$$getValue(this.$$appStore,"codeData.qrcode_record.coding")||null;n["a"].logClick(114,118038,"",{cvid:(new L["a"]).id,coding:t||this.getCoding()}),window.location.href=Rt["d"]+"/power-by.html?cid=630&type=6"}};Object(s["a"])([Object(r["c"])({type:Object,default:()=>{}})],xa.prototype,"codeData",void 0),Object(s["a"])([Object(r["c"])({type:Object,default:()=>({validCode:0})})],xa.prototype,"validInfo",void 0),Object(s["a"])([Object(r["c"])({type:Number,default:0})],xa.prototype,"validCode",void 0),Object(s["a"])([Object(r["c"])({type:Boolean,default:!1})],xa.prototype,"show",void 0),Object(s["a"])([Object(r["e"])("validInfo.validCode"),Object(r["e"])("validCode")],xa.prototype,"validCodeChange",null),xa=Object(s["a"])([r["a"]],xa);var Ta=xa,ka=Ta,Va=(i("107a"),Object(k["a"])(ka,ja,Ia,!1,null,"6dc90d1e",null)),Ma=Va.exports,Pa=i("8211");let Da=class extends r["d"]{constructor(){super(...arguments),this.pageHeaderColor="rgba(0, 0, 0, 0.87)",this.pageHeaderBackground="white",this.headerbg="transparent",this.codeData={},this.headerTitle="",this.onScrollFlag=!0,this.url="",this.codeShow=!0,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,this.recordShow=!1,this.qrcodeUrl="",this.reminder="",this.pwd="",this.isNotaryError=!1,this.renderPwd=!1,this.validInfo={},this.validPosCount=0,this.rememberPsw=!1,this.codeId=0,this.showToMinaTips=!1,this.isScan=!1,this.scanObj=[],this.isUserCode=!1,this.alipay=!1,this.errorTips="",this.categoryType="",this.orgName=""}validPageChanged(){this.$$appStore.setKey({key:"hasValidPage",value:this.validPage})}urlChanged(){this.codeShow=!1,this.url=this.$route.query.url,setTimeout(()=>{this.codeShow=!0},500)}get needShow(){return this.codeShow&&!this.errorPage&&!this.lockedPage&&!this.validPage}created(){if(this.isH5){const e=Object(h["t"])(window.location.href),i=decodeURIComponent(e.url);if(this.categoryType=e.categoryType,i&&i.indexOf("/tc/")>-1)return void this.$$go("/pages/assistView/main",{q:i});e.scanIndex&&(localStorage.setItem("topIndex",e.scanIndex),this.$$appStore.setKey({key:"isTopMode",value:!0}),this.isScan=!0,this.scanIndex=parseInt(e.scanIndex,10),e.isUserCode?(this.isUserCode=!0,this.scanObj=JSON.parse(localStorage.getItem("userqrList"))):this.scanObj=JSON.parse(localStorage.getItem("top500qrList")));const o=decodeURIComponent(e.url);if(this.url=o,this.url){const t=this.getCoding(this.url);"n"===t.substr(0,1)&&(this.isNotaryError=!0)}if(o&&-1===o.indexOf("wxa.cli.im/qr")&&o.indexOf("/a4")>-1){this.url=o.split("/a4").join("");const t=this.getCoding(this.url);n["a"].logClick(104,118001,(new L["a"]).id,t)}if(o&&o.indexOf("/share")>-1&&(this.url=o.split("/share").join("")),o&&o.indexOf("/mina_enterprise")>-1&&(this.url=o.split("/mina_enterprise").join("")),o&&o.indexOf("/from_price")>-1&&(this.url=o.split("/from_price").join("")),o&&o.indexOf("/_scan")>-1){this.url=o.split("/_scan")[0];try{const t=(new L["a"]).id;n["a"].logClick(29,152147,t,JSON.stringify({openId:t,coding:this.url.split("/").pop(),ua:navigator.userAgent}))}catch(t){console.error(t)}}navigator.userAgent.indexOf("AlipayClient")>-1&&navigator.userAgent.indexOf("MiniProgram")>-1&&(this.alipay=!0),o&&o.indexOf("/alipayApp")>-1&&(this.url=o.split("/alipayApp").join(""),this.alipay=!0),(o&&o.indexOf("/rd/")>-1||o&&o.split("/")[2]&&"r"===o.split("/")[2].charAt(0))&&(this.codeShow=!1,this.recordShow=!0)}else this.url=this.url?this.url:this.$mp.options.url,this.url&&this.url.indexOf("/share")>-1&&(this.url=this.url.split("/share").join("")),this.url&&this.url.indexOf("/mina_enterprise")>-1&&(this.url=this.url.split("/mina_enterprise").join("")),this.url&&this.url.indexOf("/from_price")>-1&&(this.url=this.url.split("/from_price").join(""))}initValidInfo(t){const{open_location_info:e,open_time_info:i,open_password_info:o}=this.$$getValue(t,"visible_auth_info",{}),a=t=>(t=t||{},"00:00"===t.start_time&&"23:59"===t.end_time?{startTime:"",endTime:""}:{startTime:t.start_time,endTime:t.end_time}),s=t=>t?t>=1e3?Math.round(t/1e3)+"公里":t+"米":"";return{validLocation:{address:this.$$getValue(e,"address",""),radius:s(this.$$getValue(e,"radius"))},validOpenTime:a(i),validOpenPsd:{hasPsd:this.$$getValue(o,"status")}}}validTime(t){const e=t.valid_days_num||-2,i=t.start_time,o=t.end_time,a={1:"一天",3:"三天",180:"六个月",360:"一年",720:"二年",1800:"五年",3600:"十年",[-1]:"自定义",[-2]:"长期有效"},s=t=>t||"",r=new Date,n=r.getMonth()+1,c=r.getDate(),l=`${r.getFullYear()}-${n<10?"0"+n:n}-${c<10?"0"+c:c}`,d=new Date(l).getTime()>new Date(o).getTime(),h=new Date(l).getTime()<new Date(i).getTime()||d;return{validDay:a[e],startTime:s(i),endTime:s(o),isLimit:h,hasExpired:d}}isWechatOpen(){const t=this.$$getValue(navigator,"userAgent","").toLowerCase();return t.indexOf("micromessenger")>-1&&t.indexOf("wxwork")<0}isHighVersion(t){const e=this.$$getValue(t,"edition_msg.from_edition_id",1);return parseInt(e,10)>1}isShowToMinaTips(t){if(this.scanIndex||0===this.scanIndex)return!1;if(this.isHighVersion(t))return!1;if(!this.isWechatOpen())return!1;const e=this.$$getValue(t,"qrcode_record.route_type",1);return 2!==e}codeLoaded(t){this.renderPwd=!this.renderPwd,this.codeData=t;const e=t.qrcode_msg?"qrcode_msg":"";this.showToMinaTips=this.isShowToMinaTips(t);const{h5QueryString:i}=this.$$appStore;if("nc_check"===i.from)return this.validInfo=this.initValidInfo(t),this.pageHeaderColor=t.codeCommonInfo.codeColorInfo.foreColor,this.pageHeaderBackground=t.codeCommonInfo.codeColorInfo.themeColor,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,void(this.codeShow=!0);const{valid_time:o}=this.$$getValue(t,e,{});if(o){const{isLimit:t,...e}=this.validTime(o);if(t)return this.validInfo={validCode:1,validTime:e},this.validPage=!0,void(this.codeShow=!1)}const{open_methods:a}=this.$$getValue(t,e,{});if(a){const t=this.$$getValue(navigator,"userAgent","").toLowerCase();if(!a.share&&(1===+i.wxscene||"timeline"===i.from||"groupmessage"===i.from||"singlemessage"===i.from)||!a.other_app&&-1===t.indexOf("micromessenger"))return this.validInfo={validCode:2,validOpen:{canShare:a.share,allowOtherApp:a.other_app}},this.validPage=!0,void(this.codeShow=!1)}if(this.validInfo=this.initValidInfo(t),"19"===t.code){const e=this.$$getValue(t,"qrcode_msg.qrcode_record.tpl_qrcode_status",0),i=this.$$getValue(t,"qrcode_msg.qrcode_record.tpl_qrcode_id",0),o=this.$$getValue(t,"qrcode_msg.qrcode_record.id",0),a=2===e?i:o;return this.codeId=a,this.lockedPage=!0,this.errorPage=!1,this.codeShow=!1,void(this.reminder=t.visible_auth_info.open_password_info.psw_tip)}return"24"===t.code?(this.validPosCount>=1?(this.validInfo.validCode=4,this.validPage=!0):(this.$$getLocation({type:"gcj02"}).then(async t=>{const e={lat:t.lat,lon:t.lng};await this.$$appStore.setKey({key:"position",value:e}),this.$refs.viewCodeComp.getCodeInfo()}).catch(()=>{this.validPage=!0,this.validInfo.validCode=5}),this.validPosCount=this.validPosCount+1,this.validPage=!1),void(this.codeShow=!1)):"25"===t.code?(this.validInfo.validCode=3,this.validPage=!0,void(this.codeShow=!1)):0!==+t.code&&"31"!==t.code?(this.errorPage=!0,this.lockedPage=!1,this.codeShow=!1,void(this.errorTips=t.errorTips)):(this.rememberPsw&&this.codeId&&(localStorage.setItem("codePsw_"+this.codeId,this.pwd),localStorage.setItem("isNewCodePsw","true")),this.orgName=this.$$getValue(t,"org_msg.name","未知企业"),this.pageHeaderColor=t.codeCommonInfo.codeColorInfo.foreColor,this.pageHeaderBackground=t.codeCommonInfo.codeColorInfo.themeColor,this.errorPage=!1,this.lockedPage=!1,this.validPage=!1,void(this.codeShow=!0))}codeReloaded(t){this.pwd===t&&this.$$toast("密码错误，请重试！"),this.pwd=t}checkboxChange(t){this.rememberPsw=t}onPageScroll({scrollTop:t}){if(t<=50&&(this.headerbg="transparent",this.headerTitle=""),t>=50)return this.headerbg=this.pageHeaderBackground,void(this.headerTitle=this.codeData.codeCommonInfo.codeHeaderTitleInfo.title);this.headerbg="transparent",this.headerTitle=""}onPullDownRefresh(){setTimeout(()=>{},1e3)}scanNext(){const{scanIndex:t,scanObj:e}=this;if(t===e.length-1)return void this.$$toast("It is already the last QR code!");let i=`${e[t+1].enter_url}&scanIndex=${t+1}`;this.isUserCode&&(i=`${e[t+1].enter_url}&scanIndex=${t+1}&isUserCode=true`),window.location.href=`${i}?v=${(new Date).getTime()}`}scanPrev(){const{scanIndex:t,scanObj:e}=this;if(0===t)return void this.$$toast("It is already the first QR code!");let i=`${e[t-1].enter_url}&scanIndex=${t-1}`;this.isUserCode&&(i=`${e[t-1].enter_url}&scanIndex=${t-1}&isUserCode=true`),window.location.href=`${i}?v=${(new Date).getTime()}`}scanUserinfo(){const{scanIndex:t,scanObj:e}=this;window.location.href="https://h5.clewm.net//user-info.html?orgid="+e[t].org_id}getCoding(t){let e=t;return e||(e=""),e&&e.indexOf("://")>-1&&([,e]=e.split("://")),e&&([,,e]=e.split("/")),e||""}};Object(s["a"])([Object(r["e"])("validPage")],Da.prototype,"validPageChanged",null),Object(s["a"])([Object(r["e"])("$route",{deep:!0})],Da.prototype,"urlChanged",null),Da=Object(s["a"])([Object(r["a"])({components:{ViewCodeComp:la,PageHeader:da["a"],ErrorPage:_a,LockedPage:Sa,ValidPage:Ma,RecordRemind:Pa["a"]}})],Da);var La=Da,qa=La,Ra=(i("afdd"),Object(k["a"])(qa,o,a,!1,null,"91ed64e2",null));e["default"]=Ra.exports},"8a2d":function(t,e,i){},"8ac0":function(t,e,i){},9934:function(t,e,i){"use strict";i("66bc")},"9a3e":function(t,e,i){},"9a3e6":function(t,e,i){"use strict";i("821b")},"9a85":function(t,e,i){},"9f5e":function(t,e,i){"use strict";i("ab98")},a31d:function(t,e,i){},a6c3:function(t,e,i){},a9bd:function(t,e,i){"use strict";i("aee5")},aa2e:function(t,e,i){},ab98:function(t,e,i){},aee5:function(t,e,i){},afdd:function(t,e,i){"use strict";i("cd90")},b8a3:function(t,e,i){"use strict";i("5920")},bb04:function(t,e,i){},bd26:function(t,e,i){},bf1e:function(t,e,i){"use strict";i("ca8e")},c6d4:function(t,e,i){"use strict";i("bb04")},ca8e:function(t,e,i){},cac3:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return p}));var o=i("d6ad"),a=(i("6260"),i("a607")),s=(i("08f7"),i("1ddc"),i("dfe4"),i("300c"),i("a719"),i("6b40")),r=i("d197"),n=i("f1d0");const c={Default:1,Admin:8,Group:1,Any:4,Password:3,None:12,WithinGroup:13,WxWork:14,Tpl:2},l=r["a"];c.Any;var d;(function(t){t[t["CONTENT_STR"]=0]="CONTENT_STR",t[t["CONTENT_CODE"]=1]="CONTENT_CODE"})(d||(d={}));c.Default;const h=t=>(Object(a["a"])(t,t=>{var e,i,o,a,s,r;if(1===(null===t||void 0===t||null===(e=t.tpl_number)||void 0===e?void 0:e.number_type)&&(0===(null===t||void 0===t||null===(i=t.tpl_number)||void 0===i?void 0:i.status)&&1===(null===t||void 0===t||null===(o=t.tpl_number)||void 0===o?void 0:o.show_static_qrcode_status)&&(t.tpl_number.show_static_qrcode_status=0),t.tpl_number.number_type=2,null===t||void 0===t||null===(a=t.tpl_number)||void 0===a||!a.number_type_options||null===t||void 0===t||null===(s=t.tpl_number)||void 0===s||null===(r=s.number_type_options)||void 0===r||!r.length)){const e=[{option_type:1,option_value:5,number_content_type:d.CONTENT_STR},{option_type:1,option_value:5,number_content_type:d.CONTENT_CODE}];t.tpl_number.number_type_options=e}}),t),p=t=>{var e;const i={},{log_msg_tag:a,expand_log:r,expand_btn:c,promise_info:l,recordview_position:d,record_summary_title:p,isRecordCase:u,operateItems:g,record_summary_status:m,subscribe_status:f,recordview_extend:_}=t;let{data_list:y}=t;return null!==(e=y)&&void 0!==e&&e.length&&(y=h(y)),i.log_msg=y||[],i.log_msg_tag=a||"",i.record_summary_title=p||(u?s["e"]:""),i.recordview_position=d||s["f"],i.expand_log=null==r?s["d"]:r,i.expand_btn=c||s["c"],i.promise_info=l||{skip_promise:1,promise_tpl:null,promise_record:null},i.operateItems=g||[],i.record_summary_status=null!==m&&void 0!==m?m:1,i.subscribe_status=null!==f&&void 0!==f?f:n["f"].NONE,i.recordview_extend=_,{...i,_oldData:Object(o["a"])(i)}}},cd90:function(t,e,i){},d3cd:function(t,e,i){"use strict";i("9a85")},d4f0:function(t,e,i){},da7e:function(t,e,i){"use strict";i("aa2e")},e192:function(t,e,i){"use strict";i("f79f")},e195:function(t,e,i){"use strict";i("38cb")},e1e6:function(t,e,i){},e56b:function(t,e,i){},e724:function(t,e,i){"use strict";i("f00f")},e9b2:function(t,e,i){},efa1:function(t,e,i){},f00f:function(t,e,i){},f6c1:function(t,e,i){"use strict";i("4d7d")},f79f:function(t,e,i){},f8b0:function(t,e,i){"use strict";i("8a2d")},fdd8:function(t,e,i){"use strict";i("3616")}}]);